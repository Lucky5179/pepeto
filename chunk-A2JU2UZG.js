import{c as zI,d as Ju}from"./chunk-C7M62FTT.js";import{a as ws}from"./chunk-Z6CMRWID.js";import{a as Je,c as Zm,f as e2,g as ve,h as Lr,i as xi,j as wt,k as $c,m as L}from"./chunk-YWNSDLME.js";var Wc={};Lr(Wc,{__assign:()=>y0,__asyncDelegator:()=>hM,__asyncGenerator:()=>uM,__asyncValues:()=>lM,__await:()=>Jc,__awaiter:()=>nM,__classPrivateFieldGet:()=>vM,__classPrivateFieldSet:()=>bM,__createBinding:()=>aM,__decorate:()=>tM,__exportStar:()=>oM,__extends:()=>ZI,__generator:()=>sM,__importDefault:()=>gM,__importStar:()=>pM,__makeTemplateObject:()=>dM,__metadata:()=>iM,__param:()=>rM,__read:()=>a2,__rest:()=>eM,__spread:()=>cM,__spreadArrays:()=>fM,__values:()=>w0});function ZI(r,e){m0(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function eM(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function tM(r,e,t,i){var n=arguments.length,a=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var u=r.length-1;u>=0;u--)(c=r[u])&&(a=(n<3?c(a):n>3?c(e,t,a):c(e,t))||a);return n>3&&a&&Object.defineProperty(e,t,a),a}function rM(r,e){return function(t,i){e(t,i,r)}}function iM(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function nM(r,e,t,i){function n(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(m){try{g(i.next(m))}catch(w){c(w)}}function p(m){try{g(i.throw(m))}catch(w){c(w)}}function g(m){m.done?a(m.value):n(m.value).then(u,p)}g((i=i.apply(r,e||[])).next())})}function sM(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(g){return function(m){return p([g,m])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,n=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(m){g=[6,m],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function aM(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function oM(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function w0(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a2(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,a=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){c={error:u}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return a}function cM(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(a2(arguments[e]));return r}function fM(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),n=0,e=0;e<t;e++)for(var a=arguments[e],c=0,u=a.length;c<u;c++,n++)i[n]=a[c];return i}function Jc(r){return this instanceof Jc?(this.v=r,this):new Jc(r)}function uM(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,a=[];return n={},c("next"),c("throw"),c("return"),n[Symbol.asyncIterator]=function(){return this},n;function c(R){i[R]&&(n[R]=function(I){return new Promise(function(O,B){a.push([R,I,O,B])>1||u(R,I)})})}function u(R,I){try{p(i[R](I))}catch(O){w(a[0][3],O)}}function p(R){R.value instanceof Jc?Promise.resolve(R.value.v).then(g,m):w(a[0][2],R)}function g(R){u("next",R)}function m(R){u("throw",R)}function w(R,I){R(I),a.shift(),a.length&&u(a[0][0],a[0][1])}}function hM(r){var e,t;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,a){e[n]=r[n]?function(c){return(t=!t)?{value:Jc(r[n](c)),done:n==="return"}:a?a(c):c}:a}}function lM(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof w0=="function"?w0(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(c){return new Promise(function(u,p){c=r[a](c),n(u,p,c.done,c.value)})}}function n(a,c,u,p){Promise.resolve(p).then(function(g){a({value:g,done:u})},c)}}function dM(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function pM(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function gM(r){return r&&r.__esModule?r:{default:r}}function vM(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function bM(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var m0,y0,Yc=e2(()=>{"use strict";m0=function(r,e){return m0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},m0(r,e)};y0=function(){return y0=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},y0.apply(this,arguments)}});var o2=ve(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.delay=void 0;function mM(r){return new Promise(e=>{setTimeout(()=>{e(!0)},r)})}Wu.delay=mM});var c2=ve(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.ONE_THOUSAND=Ao.ONE_HUNDRED=void 0;Ao.ONE_HUNDRED=100;Ao.ONE_THOUSAND=1e3});var f2=ve(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.ONE_YEAR=me.FOUR_WEEKS=me.THREE_WEEKS=me.TWO_WEEKS=me.ONE_WEEK=me.THIRTY_DAYS=me.SEVEN_DAYS=me.FIVE_DAYS=me.THREE_DAYS=me.ONE_DAY=me.TWENTY_FOUR_HOURS=me.TWELVE_HOURS=me.SIX_HOURS=me.THREE_HOURS=me.ONE_HOUR=me.SIXTY_MINUTES=me.THIRTY_MINUTES=me.TEN_MINUTES=me.FIVE_MINUTES=me.ONE_MINUTE=me.SIXTY_SECONDS=me.THIRTY_SECONDS=me.TEN_SECONDS=me.FIVE_SECONDS=me.ONE_SECOND=void 0;me.ONE_SECOND=1;me.FIVE_SECONDS=5;me.TEN_SECONDS=10;me.THIRTY_SECONDS=30;me.SIXTY_SECONDS=60;me.ONE_MINUTE=me.SIXTY_SECONDS;me.FIVE_MINUTES=me.ONE_MINUTE*5;me.TEN_MINUTES=me.ONE_MINUTE*10;me.THIRTY_MINUTES=me.ONE_MINUTE*30;me.SIXTY_MINUTES=me.ONE_MINUTE*60;me.ONE_HOUR=me.SIXTY_MINUTES;me.THREE_HOURS=me.ONE_HOUR*3;me.SIX_HOURS=me.ONE_HOUR*6;me.TWELVE_HOURS=me.ONE_HOUR*12;me.TWENTY_FOUR_HOURS=me.ONE_HOUR*24;me.ONE_DAY=me.TWENTY_FOUR_HOURS;me.THREE_DAYS=me.ONE_DAY*3;me.FIVE_DAYS=me.ONE_DAY*5;me.SEVEN_DAYS=me.ONE_DAY*7;me.THIRTY_DAYS=me.ONE_DAY*30;me.ONE_WEEK=me.SEVEN_DAYS;me.TWO_WEEKS=me.ONE_WEEK*2;me.THREE_WEEKS=me.ONE_WEEK*3;me.FOUR_WEEKS=me.ONE_WEEK*4;me.ONE_YEAR=me.ONE_DAY*365});var _0=ve(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});var u2=(Yc(),$c(Wc));u2.__exportStar(c2(),Yu);u2.__exportStar(f2(),Yu)});var l2=ve(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.fromMiliseconds=So.toMiliseconds=void 0;var h2=_0();function yM(r){return r*h2.ONE_THOUSAND}So.toMiliseconds=yM;function wM(r){return Math.floor(r/h2.ONE_THOUSAND)}So.fromMiliseconds=wM});var p2=ve(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var d2=(Yc(),$c(Wc));d2.__exportStar(o2(),Qu);d2.__exportStar(l2(),Qu)});var g2=ve(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.Watch=void 0;var Xu=class{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(typeof t.elapsed<"u")throw new Error(`Watch already stopped for label: ${e}`);let i=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:i})}get(e){let t=this.timestamps.get(e);if(typeof t>"u")throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}};Qc.Watch=Xu;Qc.default=Xu});var v2=ve(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.IWatch=void 0;var E0=class{};Zu.IWatch=E0});var b2=ve(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});var _M=(Yc(),$c(Wc));_M.__exportStar(v2(),x0)});var Mo=ve(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var eh=(Yc(),$c(Wc));eh.__exportStar(p2(),Io);eh.__exportStar(g2(),Io);eh.__exportStar(b2(),Io);eh.__exportStar(_0(),Io)});var A0=ve(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.getLocalStorage=Gt.getLocalStorageOrThrow=Gt.getCrypto=Gt.getCryptoOrThrow=Gt.getLocation=Gt.getLocationOrThrow=Gt.getNavigator=Gt.getNavigatorOrThrow=Gt.getDocument=Gt.getDocumentOrThrow=Gt.getFromWindowOrThrow=Gt.getFromWindow=void 0;function Na(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Gt.getFromWindow=Na;function Do(r){let e=Na(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Gt.getFromWindowOrThrow=Do;function EM(){return Do("document")}Gt.getDocumentOrThrow=EM;function xM(){return Na("document")}Gt.getDocument=xM;function AM(){return Do("navigator")}Gt.getNavigatorOrThrow=AM;function SM(){return Na("navigator")}Gt.getNavigator=SM;function IM(){return Do("location")}Gt.getLocationOrThrow=IM;function MM(){return Na("location")}Gt.getLocation=MM;function DM(){return Do("crypto")}Gt.getCryptoOrThrow=DM;function RM(){return Na("crypto")}Gt.getCrypto=RM;function PM(){return Do("localStorage")}Gt.getLocalStorageOrThrow=PM;function CM(){return Na("localStorage")}Gt.getLocalStorage=CM});var y2=ve(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.getWindowMetadata=void 0;var m2=A0();function OM(){let r,e;try{r=m2.getDocumentOrThrow(),e=m2.getLocationOrThrow()}catch{return null}function t(){let w=r.getElementsByTagName("link"),R=[];for(let I=0;I<w.length;I++){let O=w[I],B=O.getAttribute("rel");if(B&&B.toLowerCase().indexOf("icon")>-1){let F=O.getAttribute("href");if(F)if(F.toLowerCase().indexOf("https:")===-1&&F.toLowerCase().indexOf("http:")===-1&&F.indexOf("//")!==0){let z=e.protocol+"//"+e.host;if(F.indexOf("/")===0)z+=F;else{let Y=e.pathname.split("/");Y.pop();let $=Y.join("/");z+=$+"/"+F}R.push(z)}else if(F.indexOf("//")===0){let z=e.protocol+F;R.push(z)}else R.push(F)}}return R}function i(...w){let R=r.getElementsByTagName("meta");for(let I=0;I<R.length;I++){let O=R[I],B=["itemprop","property","name"].map(F=>O.getAttribute(F)).filter(F=>F?w.includes(F):!1);if(B.length&&B){let F=O.getAttribute("content");if(F)return F}}return""}function n(){let w=i("name","og:site_name","og:title","twitter:title");return w||(w=r.title),w}function a(){return i("description","og:description","twitter:description","keywords")}let c=n(),u=a(),p=e.origin,g=t();return{description:u,url:p,icons:g,name:c}}th.getWindowMetadata=OM});var _2=ve((Xj,w2)=>{"use strict";w2.exports=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)});var I2=ve((Zj,S2)=>{"use strict";var A2="%[a-f0-9]{2}",E2=new RegExp("("+A2+")|([^%]+?)","gi"),x2=new RegExp("("+A2+")+","gi");function S0(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),i=r.slice(e);return Array.prototype.concat.call([],S0(t),S0(i))}function NM(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(E2)||[],t=1;t<e.length;t++)r=S0(e,t).join(""),e=r.match(E2)||[];return r}}function TM(r){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=x2.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=NM(t[0]);i!==t[0]&&(e[t[0]]=i)}t=x2.exec(r)}e["%C2"]="\uFFFD";for(var n=Object.keys(e),a=0;a<n.length;a++){var c=n[a];r=r.replace(new RegExp(c,"g"),e[c])}return r}S2.exports=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return TM(r)}}});var D2=ve((eH,M2)=>{"use strict";M2.exports=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];let t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]}});var P2=ve((tH,R2)=>{"use strict";R2.exports=function(r,e){for(var t={},i=Object.keys(r),n=Array.isArray(e),a=0;a<i.length;a++){var c=i[a],u=r[c];(n?e.indexOf(c)!==-1:e(c,u,r))&&(t[c]=u)}return t}});var F2=ve(ui=>{"use strict";var LM=_2(),qM=I2(),O2=D2(),BM=P2(),FM=r=>r==null,I0=Symbol("encodeFragmentIdentifier");function UM(r){switch(r.arrayFormat){case"index":return e=>(t,i)=>{let n=t.length;return i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?t:i===null?[...t,[ur(e,r),"[",n,"]"].join("")]:[...t,[ur(e,r),"[",ur(n,r),"]=",ur(i,r)].join("")]};case"bracket":return e=>(t,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?t:i===null?[...t,[ur(e,r),"[]"].join("")]:[...t,[ur(e,r),"[]=",ur(i,r)].join("")];case"colon-list-separator":return e=>(t,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?t:i===null?[...t,[ur(e,r),":list="].join("")]:[...t,[ur(e,r),":list=",ur(i,r)].join("")];case"comma":case"separator":case"bracket-separator":{let e=r.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(i,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?i:(n=n===null?"":n,i.length===0?[[ur(t,r),e,ur(n,r)].join("")]:[[i,ur(n,r)].join(r.arrayFormatSeparator)])}default:return e=>(t,i)=>i===void 0||r.skipNull&&i===null||r.skipEmptyString&&i===""?t:i===null?[...t,ur(e,r)]:[...t,[ur(e,r),"=",ur(i,r)].join("")]}}function zM(r){let e;switch(r.arrayFormat){case"index":return(t,i,n)=>{if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){n[t]=i;return}n[t]===void 0&&(n[t]={}),n[t][e[1]]=i};case"bracket":return(t,i,n)=>{if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),!e){n[t]=i;return}if(n[t]===void 0){n[t]=[i];return}n[t]=[].concat(n[t],i)};case"colon-list-separator":return(t,i,n)=>{if(e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!e){n[t]=i;return}if(n[t]===void 0){n[t]=[i];return}n[t]=[].concat(n[t],i)};case"comma":case"separator":return(t,i,n)=>{let a=typeof i=="string"&&i.includes(r.arrayFormatSeparator),c=typeof i=="string"&&!a&&_s(i,r).includes(r.arrayFormatSeparator);i=c?_s(i,r):i;let u=a||c?i.split(r.arrayFormatSeparator).map(p=>_s(p,r)):i===null?i:_s(i,r);n[t]=u};case"bracket-separator":return(t,i,n)=>{let a=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!a){n[t]=i&&_s(i,r);return}let c=i===null?[]:i.split(r.arrayFormatSeparator).map(u=>_s(u,r));if(n[t]===void 0){n[t]=c;return}n[t]=[].concat(n[t],c)};default:return(t,i,n)=>{if(n[t]===void 0){n[t]=i;return}n[t]=[].concat(n[t],i)}}}function N2(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function ur(r,e){return e.encode?e.strict?LM(r):encodeURIComponent(r):r}function _s(r,e){return e.decode?qM(r):r}function T2(r){return Array.isArray(r)?r.sort():typeof r=="object"?T2(Object.keys(r)).sort((e,t)=>Number(e)-Number(t)).map(e=>r[e]):r}function L2(r){let e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function kM(r){let e="",t=r.indexOf("#");return t!==-1&&(e=r.slice(t)),e}function q2(r){r=L2(r);let e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function C2(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function B2(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),N2(e.arrayFormatSeparator);let t=zM(e),i=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return i;for(let n of r.split("&")){if(n==="")continue;let[a,c]=O2(e.decode?n.replace(/\+/g," "):n,"=");c=c===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?c:_s(c,e),t(_s(a,e),c,i)}for(let n of Object.keys(i)){let a=i[n];if(typeof a=="object"&&a!==null)for(let c of Object.keys(a))a[c]=C2(a[c],e);else i[n]=C2(a,e)}return e.sort===!1?i:(e.sort===!0?Object.keys(i).sort():Object.keys(i).sort(e.sort)).reduce((n,a)=>{let c=i[a];return c&&typeof c=="object"&&!Array.isArray(c)?n[a]=T2(c):n[a]=c,n},Object.create(null))}ui.extract=q2;ui.parse=B2;ui.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),N2(e.arrayFormatSeparator);let t=c=>e.skipNull&&FM(r[c])||e.skipEmptyString&&r[c]==="",i=UM(e),n={};for(let c of Object.keys(r))t(c)||(n[c]=r[c]);let a=Object.keys(n);return e.sort!==!1&&a.sort(e.sort),a.map(c=>{let u=r[c];return u===void 0?"":u===null?ur(c,e):Array.isArray(u)?u.length===0&&e.arrayFormat==="bracket-separator"?ur(c,e)+"[]":u.reduce(i(c),[]).join("&"):ur(c,e)+"="+ur(u,e)}).filter(c=>c.length>0).join("&")};ui.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);let[t,i]=O2(r,"#");return Object.assign({url:t.split("?")[0]||"",query:B2(q2(r),e)},e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:_s(i,e)}:{})};ui.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0,[I0]:!0},e);let t=L2(r.url).split("?")[0]||"",i=ui.extract(r.url),n=ui.parse(i,{sort:!1}),a=Object.assign(n,r.query),c=ui.stringify(a,e);c&&(c=`?${c}`);let u=kM(r.url);return r.fragmentIdentifier&&(u=`#${e[I0]?ur(r.fragmentIdentifier,e):r.fragmentIdentifier}`),`${t}${c}${u}`};ui.pick=(r,e,t)=>{t=Object.assign({parseFragmentIdentifier:!0,[I0]:!1},t);let{url:i,query:n,fragmentIdentifier:a}=ui.parseUrl(r,t);return ui.stringifyUrl({url:i,query:BM(n,e),fragmentIdentifier:a},t)};ui.exclude=(r,e,t)=>{let i=Array.isArray(e)?n=>!e.includes(n):(n,a)=>!e(n,a);return ui.pick(r,i,t)}});var U2=ve(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});function jM(r,e){var t=r>>>16&65535,i=r&65535,n=e>>>16&65535,a=e&65535;return i*a+(t*a+i*n<<16>>>0)|0}Ai.mul=Math.imul||jM;function HM(r,e){return r+e|0}Ai.add=HM;function KM(r,e){return r-e|0}Ai.sub=KM;function VM(r,e){return r<<e|r>>>32-e}Ai.rotl=VM;function GM(r,e){return r<<32-e|r>>>e}Ai.rotr=GM;function $M(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r}Ai.isInteger=Number.isInteger||$M;Ai.MAX_SAFE_INTEGER=9007199254740991;Ai.isSafeInteger=function(r){return Ai.isInteger(r)&&r>=-Ai.MAX_SAFE_INTEGER&&r<=Ai.MAX_SAFE_INTEGER}});var Ro=ve(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});var z2=U2();function JM(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}Ye.readInt16BE=JM;function WM(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}Ye.readUint16BE=WM;function YM(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}Ye.readInt16LE=YM;function QM(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}Ye.readUint16LE=QM;function k2(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}Ye.writeUint16BE=k2;Ye.writeInt16BE=k2;function j2(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}Ye.writeUint16LE=j2;Ye.writeInt16LE=j2;function M0(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}Ye.readInt32BE=M0;function D0(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}Ye.readUint32BE=D0;function R0(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}Ye.readInt32LE=R0;function P0(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}Ye.readUint32LE=P0;function rh(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}Ye.writeUint32BE=rh;Ye.writeInt32BE=rh;function ih(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}Ye.writeUint32LE=ih;Ye.writeInt32LE=ih;function XM(r,e){e===void 0&&(e=0);var t=M0(r,e),i=M0(r,e+4);return t*4294967296+i-(i>>31)*4294967296}Ye.readInt64BE=XM;function ZM(r,e){e===void 0&&(e=0);var t=D0(r,e),i=D0(r,e+4);return t*4294967296+i}Ye.readUint64BE=ZM;function eD(r,e){e===void 0&&(e=0);var t=R0(r,e),i=R0(r,e+4);return i*4294967296+t-(t>>31)*4294967296}Ye.readInt64LE=eD;function tD(r,e){e===void 0&&(e=0);var t=P0(r,e),i=P0(r,e+4);return i*4294967296+t}Ye.readUint64LE=tD;function H2(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),rh(r/4294967296>>>0,e,t),rh(r>>>0,e,t+4),e}Ye.writeUint64BE=H2;Ye.writeInt64BE=H2;function K2(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),ih(r>>>0,e,t),ih(r/4294967296>>>0,e,t+4),e}Ye.writeUint64LE=K2;Ye.writeInt64LE=K2;function rD(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,a=r/8+t-1;a>=t;a--)i+=e[a]*n,n*=256;return i}Ye.readUintBE=rD;function iD(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,a=t;a<t+r/8;a++)i+=e[a]*n,n*=256;return i}Ye.readUintLE=iD;function nD(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!z2.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,a=r/8+i-1;a>=i;a--)t[a]=e/n&255,n*=256;return t}Ye.writeUintBE=nD;function sD(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!z2.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,a=i;a<i+r/8;a++)t[a]=e/n&255,n*=256;return t}Ye.writeUintLE=sD;function aD(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}Ye.readFloat32BE=aD;function oD(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}Ye.readFloat32LE=oD;function cD(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}Ye.readFloat64BE=cD;function fD(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}Ye.readFloat64LE=fD;function uD(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r),e}Ye.writeFloat32BE=uD;function hD(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r,!0),e}Ye.writeFloat32LE=hD;function lD(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r),e}Ye.writeFloat64BE=lD;function dD(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r,!0),e}Ye.writeFloat64LE=dD});var ji=ve(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});function pD(r){for(var e=0;e<r.length;e++)r[e]=0;return r}C0.wipe=pD});var G2=ve(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});var qr=Ro(),O0=ji(),gD=20;function vD(r,e,t){for(var i=1634760805,n=857760878,a=2036477234,c=1797285236,u=t[3]<<24|t[2]<<16|t[1]<<8|t[0],p=t[7]<<24|t[6]<<16|t[5]<<8|t[4],g=t[11]<<24|t[10]<<16|t[9]<<8|t[8],m=t[15]<<24|t[14]<<16|t[13]<<8|t[12],w=t[19]<<24|t[18]<<16|t[17]<<8|t[16],R=t[23]<<24|t[22]<<16|t[21]<<8|t[20],I=t[27]<<24|t[26]<<16|t[25]<<8|t[24],O=t[31]<<24|t[30]<<16|t[29]<<8|t[28],B=e[3]<<24|e[2]<<16|e[1]<<8|e[0],F=e[7]<<24|e[6]<<16|e[5]<<8|e[4],z=e[11]<<24|e[10]<<16|e[9]<<8|e[8],Y=e[15]<<24|e[14]<<16|e[13]<<8|e[12],$=i,K=n,X=a,te=c,k=u,U=p,ae=g,P=m,d=w,_=R,f=I,l=O,b=B,S=F,M=z,A=Y,v=0;v<gD;v+=2)$=$+k|0,b^=$,b=b>>>16|b<<16,d=d+b|0,k^=d,k=k>>>20|k<<12,K=K+U|0,S^=K,S=S>>>16|S<<16,_=_+S|0,U^=_,U=U>>>20|U<<12,X=X+ae|0,M^=X,M=M>>>16|M<<16,f=f+M|0,ae^=f,ae=ae>>>20|ae<<12,te=te+P|0,A^=te,A=A>>>16|A<<16,l=l+A|0,P^=l,P=P>>>20|P<<12,X=X+ae|0,M^=X,M=M>>>24|M<<8,f=f+M|0,ae^=f,ae=ae>>>25|ae<<7,te=te+P|0,A^=te,A=A>>>24|A<<8,l=l+A|0,P^=l,P=P>>>25|P<<7,K=K+U|0,S^=K,S=S>>>24|S<<8,_=_+S|0,U^=_,U=U>>>25|U<<7,$=$+k|0,b^=$,b=b>>>24|b<<8,d=d+b|0,k^=d,k=k>>>25|k<<7,$=$+U|0,A^=$,A=A>>>16|A<<16,f=f+A|0,U^=f,U=U>>>20|U<<12,K=K+ae|0,b^=K,b=b>>>16|b<<16,l=l+b|0,ae^=l,ae=ae>>>20|ae<<12,X=X+P|0,S^=X,S=S>>>16|S<<16,d=d+S|0,P^=d,P=P>>>20|P<<12,te=te+k|0,M^=te,M=M>>>16|M<<16,_=_+M|0,k^=_,k=k>>>20|k<<12,X=X+P|0,S^=X,S=S>>>24|S<<8,d=d+S|0,P^=d,P=P>>>25|P<<7,te=te+k|0,M^=te,M=M>>>24|M<<8,_=_+M|0,k^=_,k=k>>>25|k<<7,K=K+ae|0,b^=K,b=b>>>24|b<<8,l=l+b|0,ae^=l,ae=ae>>>25|ae<<7,$=$+U|0,A^=$,A=A>>>24|A<<8,f=f+A|0,U^=f,U=U>>>25|U<<7;qr.writeUint32LE($+i|0,r,0),qr.writeUint32LE(K+n|0,r,4),qr.writeUint32LE(X+a|0,r,8),qr.writeUint32LE(te+c|0,r,12),qr.writeUint32LE(k+u|0,r,16),qr.writeUint32LE(U+p|0,r,20),qr.writeUint32LE(ae+g|0,r,24),qr.writeUint32LE(P+m|0,r,28),qr.writeUint32LE(d+w|0,r,32),qr.writeUint32LE(_+R|0,r,36),qr.writeUint32LE(f+I|0,r,40),qr.writeUint32LE(l+O|0,r,44),qr.writeUint32LE(b+B|0,r,48),qr.writeUint32LE(S+F|0,r,52),qr.writeUint32LE(M+z|0,r,56),qr.writeUint32LE(A+Y|0,r,60)}function V2(r,e,t,i,n){if(n===void 0&&(n=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var a,c;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),c=a.length-e.length,a.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,c=n}for(var u=new Uint8Array(64),p=0;p<t.length;p+=64){vD(u,a,r);for(var g=p;g<p+64&&g<t.length;g++)i[g]=t[g]^u[g-p];mD(a,0,c)}return O0.wipe(u),n===0&&O0.wipe(a),i}nh.streamXOR=V2;function bD(r,e,t,i){return i===void 0&&(i=0),O0.wipe(t),V2(r,e,t,t,i)}nh.stream=bD;function mD(r,e,t){for(var i=1;t--;)i=i+(r[e]&255)|0,r[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}});var sh=ve(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});function yD(r,e,t){return~(r-1)&e|r-1&t}Po.select=yD;function wD(r,e){return(r|0)-(e|0)-1>>>31&1}Po.lessOrEqual=wD;function $2(r,e){if(r.length!==e.length)return 0;for(var t=0,i=0;i<r.length;i++)t|=r[i]^e[i];return 1&t-1>>>8}Po.compare=$2;function _D(r,e){return r.length===0||e.length===0?!1:$2(r,e)!==0}Po.equal=_D});var W2=ve(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});var ED=sh(),ah=ji();Es.DIGEST_LENGTH=16;var J2=function(){function r(e){this.digestLength=Es.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var t=e[0]|e[1]<<8;this._r[0]=t&8191;var i=e[2]|e[3]<<8;this._r[1]=(t>>>13|i<<3)&8191;var n=e[4]|e[5]<<8;this._r[2]=(i>>>10|n<<6)&7939;var a=e[6]|e[7]<<8;this._r[3]=(n>>>7|a<<9)&8191;var c=e[8]|e[9]<<8;this._r[4]=(a>>>4|c<<12)&255,this._r[5]=c>>>1&8190;var u=e[10]|e[11]<<8;this._r[6]=(c>>>14|u<<2)&8191;var p=e[12]|e[13]<<8;this._r[7]=(u>>>11|p<<5)&8065;var g=e[14]|e[15]<<8;this._r[8]=(p>>>8|g<<8)&8191,this._r[9]=g>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return r.prototype._blocks=function(e,t,i){for(var n=this._fin?0:2048,a=this._h[0],c=this._h[1],u=this._h[2],p=this._h[3],g=this._h[4],m=this._h[5],w=this._h[6],R=this._h[7],I=this._h[8],O=this._h[9],B=this._r[0],F=this._r[1],z=this._r[2],Y=this._r[3],$=this._r[4],K=this._r[5],X=this._r[6],te=this._r[7],k=this._r[8],U=this._r[9];i>=16;){var ae=e[t+0]|e[t+1]<<8;a+=ae&8191;var P=e[t+2]|e[t+3]<<8;c+=(ae>>>13|P<<3)&8191;var d=e[t+4]|e[t+5]<<8;u+=(P>>>10|d<<6)&8191;var _=e[t+6]|e[t+7]<<8;p+=(d>>>7|_<<9)&8191;var f=e[t+8]|e[t+9]<<8;g+=(_>>>4|f<<12)&8191,m+=f>>>1&8191;var l=e[t+10]|e[t+11]<<8;w+=(f>>>14|l<<2)&8191;var b=e[t+12]|e[t+13]<<8;R+=(l>>>11|b<<5)&8191;var S=e[t+14]|e[t+15]<<8;I+=(b>>>8|S<<8)&8191,O+=S>>>5|n;var M=0,A=M;A+=a*B,A+=c*(5*U),A+=u*(5*k),A+=p*(5*te),A+=g*(5*X),M=A>>>13,A&=8191,A+=m*(5*K),A+=w*(5*$),A+=R*(5*Y),A+=I*(5*z),A+=O*(5*F),M+=A>>>13,A&=8191;var v=M;v+=a*F,v+=c*B,v+=u*(5*U),v+=p*(5*k),v+=g*(5*te),M=v>>>13,v&=8191,v+=m*(5*X),v+=w*(5*K),v+=R*(5*$),v+=I*(5*Y),v+=O*(5*z),M+=v>>>13,v&=8191;var x=M;x+=a*z,x+=c*F,x+=u*B,x+=p*(5*U),x+=g*(5*k),M=x>>>13,x&=8191,x+=m*(5*te),x+=w*(5*X),x+=R*(5*K),x+=I*(5*$),x+=O*(5*Y),M+=x>>>13,x&=8191;var y=M;y+=a*Y,y+=c*z,y+=u*F,y+=p*B,y+=g*(5*U),M=y>>>13,y&=8191,y+=m*(5*k),y+=w*(5*te),y+=R*(5*X),y+=I*(5*K),y+=O*(5*$),M+=y>>>13,y&=8191;var N=M;N+=a*$,N+=c*Y,N+=u*z,N+=p*F,N+=g*B,M=N>>>13,N&=8191,N+=m*(5*U),N+=w*(5*k),N+=R*(5*te),N+=I*(5*X),N+=O*(5*K),M+=N>>>13,N&=8191;var Z=M;Z+=a*K,Z+=c*$,Z+=u*Y,Z+=p*z,Z+=g*F,M=Z>>>13,Z&=8191,Z+=m*B,Z+=w*(5*U),Z+=R*(5*k),Z+=I*(5*te),Z+=O*(5*X),M+=Z>>>13,Z&=8191;var ee=M;ee+=a*X,ee+=c*K,ee+=u*$,ee+=p*Y,ee+=g*z,M=ee>>>13,ee&=8191,ee+=m*F,ee+=w*B,ee+=R*(5*U),ee+=I*(5*k),ee+=O*(5*te),M+=ee>>>13,ee&=8191;var D=M;D+=a*te,D+=c*X,D+=u*K,D+=p*$,D+=g*Y,M=D>>>13,D&=8191,D+=m*z,D+=w*F,D+=R*B,D+=I*(5*U),D+=O*(5*k),M+=D>>>13,D&=8191;var V=M;V+=a*k,V+=c*te,V+=u*X,V+=p*K,V+=g*$,M=V>>>13,V&=8191,V+=m*Y,V+=w*z,V+=R*F,V+=I*B,V+=O*(5*U),M+=V>>>13,V&=8191;var G=M;G+=a*U,G+=c*k,G+=u*te,G+=p*X,G+=g*K,M=G>>>13,G&=8191,G+=m*$,G+=w*Y,G+=R*z,G+=I*F,G+=O*B,M+=G>>>13,G&=8191,M=(M<<2)+M|0,M=M+A|0,A=M&8191,M=M>>>13,v+=M,a=A,c=v,u=x,p=y,g=N,m=Z,w=ee,R=D,I=V,O=G,t+=16,i-=16}this._h[0]=a,this._h[1]=c,this._h[2]=u,this._h[3]=p,this._h[4]=g,this._h[5]=m,this._h[6]=w,this._h[7]=R,this._h[8]=I,this._h[9]=O},r.prototype.finish=function(e,t){t===void 0&&(t=0);var i=new Uint16Array(10),n,a,c,u;if(this._leftover){for(u=this._leftover,this._buffer[u++]=1;u<16;u++)this._buffer[u]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(n=this._h[1]>>>13,this._h[1]&=8191,u=2;u<10;u++)this._h[u]+=n,n=this._h[u]>>>13,this._h[u]&=8191;for(this._h[0]+=n*5,n=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=n,n=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=n,i[0]=this._h[0]+5,n=i[0]>>>13,i[0]&=8191,u=1;u<10;u++)i[u]=this._h[u]+n,n=i[u]>>>13,i[u]&=8191;for(i[9]-=8192,a=(n^1)-1,u=0;u<10;u++)i[u]&=a;for(a=~a,u=0;u<10;u++)this._h[u]=this._h[u]&a|i[u];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,c=this._h[0]+this._pad[0],this._h[0]=c&65535,u=1;u<8;u++)c=(this._h[u]+this._pad[u]|0)+(c>>>16)|0,this._h[u]=c&65535;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},r.prototype.update=function(e){var t=0,i=e.length,n;if(this._leftover){n=16-this._leftover,n>i&&(n=i);for(var a=0;a<n;a++)this._buffer[this._leftover+a]=e[t+a];if(i-=n,t+=n,this._leftover+=n,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(i>=16&&(n=i-i%16,this._blocks(e,t,n),t+=n,i-=n),i){for(var a=0;a<i;a++)this._buffer[this._leftover+a]=e[t+a];this._leftover+=i}return this},r.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},r.prototype.clean=function(){return ah.wipe(this._buffer),ah.wipe(this._r),ah.wipe(this._h),ah.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},r}();Es.Poly1305=J2;function xD(r,e){var t=new J2(r);t.update(e);var i=t.digest();return t.clean(),i}Es.oneTimeAuth=xD;function AD(r,e){return r.length!==Es.DIGEST_LENGTH||e.length!==Es.DIGEST_LENGTH?!1:ED.equal(r,e)}Es.equal=AD});var X2=ve(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var oh=G2(),SD=W2(),Xc=ji(),Y2=Ro(),ID=sh();xs.KEY_LENGTH=32;xs.NONCE_LENGTH=12;xs.TAG_LENGTH=16;var Q2=new Uint8Array(16),MD=function(){function r(e){if(this.nonceLength=xs.NONCE_LENGTH,this.tagLength=xs.TAG_LENGTH,e.length!==xs.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return r.prototype.seal=function(e,t,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var a=new Uint8Array(16);a.set(e,a.length-e.length);var c=new Uint8Array(32);oh.stream(this._key,a,c,4);var u=t.length+this.tagLength,p;if(n){if(n.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");p=n}else p=new Uint8Array(u);return oh.streamXOR(this._key,a,t,p,4),this._authenticate(p.subarray(p.length-this.tagLength,p.length),c,p.subarray(0,p.length-this.tagLength),i),Xc.wipe(a),p},r.prototype.open=function(e,t,i,n){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var a=new Uint8Array(16);a.set(e,a.length-e.length);var c=new Uint8Array(32);oh.stream(this._key,a,c,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,c,t.subarray(0,t.length-this.tagLength),i),!ID.equal(u,t.subarray(t.length-this.tagLength,t.length)))return null;var p=t.length-this.tagLength,g;if(n){if(n.length!==p)throw new Error("ChaCha20Poly1305: incorrect destination length");g=n}else g=new Uint8Array(p);return oh.streamXOR(this._key,a,t.subarray(0,t.length-this.tagLength),g,4),Xc.wipe(a),g},r.prototype.clean=function(){return Xc.wipe(this._key),this},r.prototype._authenticate=function(e,t,i,n){var a=new SD.Poly1305(t);n&&(a.update(n),n.length%16>0&&a.update(Q2.subarray(n.length%16))),a.update(i),i.length%16>0&&a.update(Q2.subarray(i.length%16));var c=new Uint8Array(8);n&&Y2.writeUint64LE(n.length,c),a.update(c),Y2.writeUint64LE(i.length,c),a.update(c);for(var u=a.digest(),p=0;p<u.length;p++)e[p]=u[p];a.clean(),Xc.wipe(u),Xc.wipe(c)},r}();xs.ChaCha20Poly1305=MD});var Z2=ve(N0=>{"use strict";Object.defineProperty(N0,"__esModule",{value:!0});function DD(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}N0.isSerializableHash=DD});var ty=ve(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});var Dn=Z2(),RD=sh(),PD=ji(),ey=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),Dn.isSerializableHash(this._inner)&&Dn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),PD.wipe(i)}return r.prototype.reset=function(){if(!Dn.isSerializableHash(this._inner)||!Dn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){Dn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Dn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!Dn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!Dn.isSerializableHash(this._inner)||!Dn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!Dn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();Zc.HMAC=ey;function CD(r,e,t){var i=new ey(r,e);i.update(t);var n=i.digest();return i.clean(),n}Zc.hmac=CD;Zc.equal=RD.equal});var ny=ve(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});var ry=ty(),iy=ji(),OD=function(){function r(e,t,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var a=ry.hmac(this._hash,i,t);this._hmac=new ry.HMAC(e,a),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),iy.wipe(this._buffer),iy.wipe(this._counter),this._bufpos=0},r}();T0.HKDF=OD});var ay=ve(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.BrowserRandomSource=void 0;var sy=65536,L0=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let i=0;i<t.length;i+=sy)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,sy)));return t}};ch.BrowserRandomSource=L0});var q0=ve(()=>{"use strict"});var oy=ve(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.NodeRandomSource=void 0;var ND=ji(),B0=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Zm<"u"){let e=q0();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let i=new Uint8Array(e);for(let n=0;n<i.length;n++)i[n]=t[n];return(0,ND.wipe)(t),i}};fh.NodeRandomSource=B0});var cy=ve(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.SystemRandomSource=void 0;var TD=ay(),LD=oy(),F0=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new TD.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new LD.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};uh.SystemRandomSource=F0});var ef=ve(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.randomStringForEntropy=Br.randomString=Br.randomUint32=Br.randomBytes=Br.defaultRandomSource=void 0;var qD=cy(),BD=Ro(),fy=ji();Br.defaultRandomSource=new qD.SystemRandomSource;function U0(r,e=Br.defaultRandomSource){return e.randomBytes(r)}Br.randomBytes=U0;function FD(r=Br.defaultRandomSource){let e=U0(4,r),t=(0,BD.readUint32LE)(e);return(0,fy.wipe)(e),t}Br.randomUint32=FD;var uy="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function hy(r,e=uy,t=Br.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let i="",n=e.length,a=256-256%n;for(;r>0;){let c=U0(Math.ceil(r*256/a),t);for(let u=0;u<c.length&&r>0;u++){let p=c[u];p<a&&(i+=e.charAt(p%n),r--)}(0,fy.wipe)(c)}return i}Br.randomString=hy;function UD(r,e=uy,t=Br.defaultRandomSource){let i=Math.ceil(r/(Math.log(e.length)/Math.LN2));return hy(i,e,t)}Br.randomStringForEntropy=UD});var dy=ve(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var lh=Ro(),hh=ji();Zs.DIGEST_LENGTH=32;Zs.BLOCK_SIZE=64;var ly=function(){function r(){this.digestLength=Zs.DIGEST_LENGTH,this.blockSize=Zs.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){hh.wipe(this._buffer),hh.wipe(this._temp),this.reset()},r.prototype.update=function(e,t){if(t===void 0&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var i=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[i++],t--;this._bufferLength===this.blockSize&&(z0(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(i=z0(this._temp,this._state,e,i,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[i++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,i=this._bufferLength,n=t/536870912|0,a=t<<3,c=t%64<56?64:128;this._buffer[i]=128;for(var u=i+1;u<c-8;u++)this._buffer[u]=0;lh.writeUint32BE(n,this._buffer,c-8),lh.writeUint32BE(a,this._buffer,c-4),z0(this._temp,this._state,this._buffer,0,c),this._finished=!0}for(var u=0;u<this.digestLength/4;u++)lh.writeUint32BE(this._state[u],e,u*4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){hh.wipe(e.state),e.buffer&&hh.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();Zs.SHA256=ly;var zD=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function z0(r,e,t,i,n){for(;n>=64;){for(var a=e[0],c=e[1],u=e[2],p=e[3],g=e[4],m=e[5],w=e[6],R=e[7],I=0;I<16;I++){var O=i+I*4;r[I]=lh.readUint32BE(t,O)}for(var I=16;I<64;I++){var B=r[I-2],F=(B>>>17|B<<15)^(B>>>19|B<<13)^B>>>10;B=r[I-15];var z=(B>>>7|B<<25)^(B>>>18|B<<14)^B>>>3;r[I]=(F+r[I-7]|0)+(z+r[I-16]|0)}for(var I=0;I<64;I++){var F=(((g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&m^~g&w)|0)+(R+(zD[I]+r[I]|0)|0)|0,z=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;R=w,w=m,m=g,g=p+F|0,p=u,u=c,c=a,a=F+z|0}e[0]+=a,e[1]+=c,e[2]+=u,e[3]+=p,e[4]+=g,e[5]+=m,e[6]+=w,e[7]+=R,i+=64,n-=64}return i}function kD(r){var e=new ly;e.update(r);var t=e.digest();return e.clean(),t}Zs.hash=kD});var by=ve(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.sharedKey=rr.generateKeyPair=rr.generateKeyPairFromSeed=rr.scalarMultBase=rr.scalarMult=rr.SHARED_KEY_LENGTH=rr.SECRET_KEY_LENGTH=rr.PUBLIC_KEY_LENGTH=void 0;var jD=ef(),HD=ji();rr.PUBLIC_KEY_LENGTH=32;rr.SECRET_KEY_LENGTH=32;rr.SHARED_KEY_LENGTH=32;function Rn(r){let e=new Float64Array(16);if(r)for(let t=0;t<r.length;t++)e[t]=r[t];return e}var py=new Uint8Array(32);py[0]=9;var KD=Rn([56129,1]);function k0(r){let e=1;for(let t=0;t<16;t++){let i=r[t]+e+65535;e=Math.floor(i/65536),r[t]=i-e*65536}r[0]+=e-1+37*(e-1)}function tf(r,e,t){let i=~(t-1);for(let n=0;n<16;n++){let a=i&(r[n]^e[n]);r[n]^=a,e[n]^=a}}function VD(r,e){let t=Rn(),i=Rn();for(let n=0;n<16;n++)i[n]=e[n];k0(i),k0(i),k0(i);for(let n=0;n<2;n++){t[0]=i[0]-65517;for(let c=1;c<15;c++)t[c]=i[c]-65535-(t[c-1]>>16&1),t[c-1]&=65535;t[15]=i[15]-32767-(t[14]>>16&1);let a=t[15]>>16&1;t[14]&=65535,tf(i,t,1-a)}for(let n=0;n<16;n++)r[2*n]=i[n]&255,r[2*n+1]=i[n]>>8}function GD(r,e){for(let t=0;t<16;t++)r[t]=e[2*t]+(e[2*t+1]<<8);r[15]&=32767}function dh(r,e,t){for(let i=0;i<16;i++)r[i]=e[i]+t[i]}function ph(r,e,t){for(let i=0;i<16;i++)r[i]=e[i]-t[i]}function As(r,e,t){let i,n,a=0,c=0,u=0,p=0,g=0,m=0,w=0,R=0,I=0,O=0,B=0,F=0,z=0,Y=0,$=0,K=0,X=0,te=0,k=0,U=0,ae=0,P=0,d=0,_=0,f=0,l=0,b=0,S=0,M=0,A=0,v=0,x=t[0],y=t[1],N=t[2],Z=t[3],ee=t[4],D=t[5],V=t[6],G=t[7],J=t[8],ie=t[9],fe=t[10],se=t[11],ce=t[12],pe=t[13],ne=t[14],de=t[15];i=e[0],a+=i*x,c+=i*y,u+=i*N,p+=i*Z,g+=i*ee,m+=i*D,w+=i*V,R+=i*G,I+=i*J,O+=i*ie,B+=i*fe,F+=i*se,z+=i*ce,Y+=i*pe,$+=i*ne,K+=i*de,i=e[1],c+=i*x,u+=i*y,p+=i*N,g+=i*Z,m+=i*ee,w+=i*D,R+=i*V,I+=i*G,O+=i*J,B+=i*ie,F+=i*fe,z+=i*se,Y+=i*ce,$+=i*pe,K+=i*ne,X+=i*de,i=e[2],u+=i*x,p+=i*y,g+=i*N,m+=i*Z,w+=i*ee,R+=i*D,I+=i*V,O+=i*G,B+=i*J,F+=i*ie,z+=i*fe,Y+=i*se,$+=i*ce,K+=i*pe,X+=i*ne,te+=i*de,i=e[3],p+=i*x,g+=i*y,m+=i*N,w+=i*Z,R+=i*ee,I+=i*D,O+=i*V,B+=i*G,F+=i*J,z+=i*ie,Y+=i*fe,$+=i*se,K+=i*ce,X+=i*pe,te+=i*ne,k+=i*de,i=e[4],g+=i*x,m+=i*y,w+=i*N,R+=i*Z,I+=i*ee,O+=i*D,B+=i*V,F+=i*G,z+=i*J,Y+=i*ie,$+=i*fe,K+=i*se,X+=i*ce,te+=i*pe,k+=i*ne,U+=i*de,i=e[5],m+=i*x,w+=i*y,R+=i*N,I+=i*Z,O+=i*ee,B+=i*D,F+=i*V,z+=i*G,Y+=i*J,$+=i*ie,K+=i*fe,X+=i*se,te+=i*ce,k+=i*pe,U+=i*ne,ae+=i*de,i=e[6],w+=i*x,R+=i*y,I+=i*N,O+=i*Z,B+=i*ee,F+=i*D,z+=i*V,Y+=i*G,$+=i*J,K+=i*ie,X+=i*fe,te+=i*se,k+=i*ce,U+=i*pe,ae+=i*ne,P+=i*de,i=e[7],R+=i*x,I+=i*y,O+=i*N,B+=i*Z,F+=i*ee,z+=i*D,Y+=i*V,$+=i*G,K+=i*J,X+=i*ie,te+=i*fe,k+=i*se,U+=i*ce,ae+=i*pe,P+=i*ne,d+=i*de,i=e[8],I+=i*x,O+=i*y,B+=i*N,F+=i*Z,z+=i*ee,Y+=i*D,$+=i*V,K+=i*G,X+=i*J,te+=i*ie,k+=i*fe,U+=i*se,ae+=i*ce,P+=i*pe,d+=i*ne,_+=i*de,i=e[9],O+=i*x,B+=i*y,F+=i*N,z+=i*Z,Y+=i*ee,$+=i*D,K+=i*V,X+=i*G,te+=i*J,k+=i*ie,U+=i*fe,ae+=i*se,P+=i*ce,d+=i*pe,_+=i*ne,f+=i*de,i=e[10],B+=i*x,F+=i*y,z+=i*N,Y+=i*Z,$+=i*ee,K+=i*D,X+=i*V,te+=i*G,k+=i*J,U+=i*ie,ae+=i*fe,P+=i*se,d+=i*ce,_+=i*pe,f+=i*ne,l+=i*de,i=e[11],F+=i*x,z+=i*y,Y+=i*N,$+=i*Z,K+=i*ee,X+=i*D,te+=i*V,k+=i*G,U+=i*J,ae+=i*ie,P+=i*fe,d+=i*se,_+=i*ce,f+=i*pe,l+=i*ne,b+=i*de,i=e[12],z+=i*x,Y+=i*y,$+=i*N,K+=i*Z,X+=i*ee,te+=i*D,k+=i*V,U+=i*G,ae+=i*J,P+=i*ie,d+=i*fe,_+=i*se,f+=i*ce,l+=i*pe,b+=i*ne,S+=i*de,i=e[13],Y+=i*x,$+=i*y,K+=i*N,X+=i*Z,te+=i*ee,k+=i*D,U+=i*V,ae+=i*G,P+=i*J,d+=i*ie,_+=i*fe,f+=i*se,l+=i*ce,b+=i*pe,S+=i*ne,M+=i*de,i=e[14],$+=i*x,K+=i*y,X+=i*N,te+=i*Z,k+=i*ee,U+=i*D,ae+=i*V,P+=i*G,d+=i*J,_+=i*ie,f+=i*fe,l+=i*se,b+=i*ce,S+=i*pe,M+=i*ne,A+=i*de,i=e[15],K+=i*x,X+=i*y,te+=i*N,k+=i*Z,U+=i*ee,ae+=i*D,P+=i*V,d+=i*G,_+=i*J,f+=i*ie,l+=i*fe,b+=i*se,S+=i*ce,M+=i*pe,A+=i*ne,v+=i*de,a+=38*X,c+=38*te,u+=38*k,p+=38*U,g+=38*ae,m+=38*P,w+=38*d,R+=38*_,I+=38*f,O+=38*l,B+=38*b,F+=38*S,z+=38*M,Y+=38*A,$+=38*v,n=1,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,i=z+n+65535,n=Math.floor(i/65536),z=i-n*65536,i=Y+n+65535,n=Math.floor(i/65536),Y=i-n*65536,i=$+n+65535,n=Math.floor(i/65536),$=i-n*65536,i=K+n+65535,n=Math.floor(i/65536),K=i-n*65536,a+=n-1+37*(n-1),n=1,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,i=z+n+65535,n=Math.floor(i/65536),z=i-n*65536,i=Y+n+65535,n=Math.floor(i/65536),Y=i-n*65536,i=$+n+65535,n=Math.floor(i/65536),$=i-n*65536,i=K+n+65535,n=Math.floor(i/65536),K=i-n*65536,a+=n-1+37*(n-1),r[0]=a,r[1]=c,r[2]=u,r[3]=p,r[4]=g,r[5]=m,r[6]=w,r[7]=R,r[8]=I,r[9]=O,r[10]=B,r[11]=F,r[12]=z,r[13]=Y,r[14]=$,r[15]=K}function rf(r,e){As(r,e,e)}function $D(r,e){let t=Rn();for(let i=0;i<16;i++)t[i]=e[i];for(let i=253;i>=0;i--)rf(t,t),i!==2&&i!==4&&As(t,t,e);for(let i=0;i<16;i++)r[i]=t[i]}function j0(r,e){let t=new Uint8Array(32),i=new Float64Array(80),n=Rn(),a=Rn(),c=Rn(),u=Rn(),p=Rn(),g=Rn();for(let I=0;I<31;I++)t[I]=r[I];t[31]=r[31]&127|64,t[0]&=248,GD(i,e);for(let I=0;I<16;I++)a[I]=i[I];n[0]=u[0]=1;for(let I=254;I>=0;--I){let O=t[I>>>3]>>>(I&7)&1;tf(n,a,O),tf(c,u,O),dh(p,n,c),ph(n,n,c),dh(c,a,u),ph(a,a,u),rf(u,p),rf(g,n),As(n,c,n),As(c,a,p),dh(p,n,c),ph(n,n,c),rf(a,n),ph(c,u,g),As(n,c,KD),dh(n,n,u),As(c,c,n),As(n,u,g),As(u,a,i),rf(a,p),tf(n,a,O),tf(c,u,O)}for(let I=0;I<16;I++)i[I+16]=n[I],i[I+32]=c[I],i[I+48]=a[I],i[I+64]=u[I];let m=i.subarray(32),w=i.subarray(16);$D(m,m),As(w,w,m);let R=new Uint8Array(32);return VD(R,w),R}rr.scalarMult=j0;function gy(r){return j0(r,py)}rr.scalarMultBase=gy;function vy(r){if(r.length!==rr.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${rr.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(r);return{publicKey:gy(e),secretKey:e}}rr.generateKeyPairFromSeed=vy;function JD(r){let e=(0,jD.randomBytes)(32,r),t=vy(e);return(0,HD.wipe)(e),t}rr.generateKeyPair=JD;function WD(r,e,t=!1){if(r.length!==rr.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==rr.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let i=j0(r,e);if(t){let n=0;for(let a=0;a<i.length;a++)n|=i[a];if(n===0)throw new Error("X25519: invalid shared key")}return i}rr.sharedKey=WD});var Fy=ve((RK,aP)=>{aP.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var Cn=ve((Uy,up)=>{"use strict";(function(r,e){"use strict";function t(P,d){if(!P)throw new Error(d||"Assertion failed")}function i(P,d){P.super_=d;var _=function(){};_.prototype=d.prototype,P.prototype=new _,P.prototype.constructor=P}function n(P,d,_){if(n.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((d==="le"||d==="be")&&(_=d,d=10),this._init(P||0,d||10,_||"be"))}typeof r=="object"?r.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=zI().Buffer}catch{}n.isBN=function(d){return d instanceof n?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===n.wordSize&&Array.isArray(d.words)},n.max=function(d,_){return d.cmp(_)>0?d:_},n.min=function(d,_){return d.cmp(_)<0?d:_},n.prototype._init=function(d,_,f){if(typeof d=="number")return this._initNumber(d,_,f);if(typeof d=="object")return this._initArray(d,_,f);_==="hex"&&(_=16),t(_===(_|0)&&_>=2&&_<=36),d=d.toString().replace(/\s+/g,"");var l=0;d[0]==="-"&&(l++,this.negative=1),l<d.length&&(_===16?this._parseHex(d,l,f):(this._parseBase(d,_,l),f==="le"&&this._initArray(this.toArray(),_,f)))},n.prototype._initNumber=function(d,_,f){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(t(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),_,f)},n.prototype._initArray=function(d,_,f){if(t(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var b,S,M=0;if(f==="be")for(l=d.length-1,b=0;l>=0;l-=3)S=d[l]|d[l-1]<<8|d[l-2]<<16,this.words[b]|=S<<M&67108863,this.words[b+1]=S>>>26-M&67108863,M+=24,M>=26&&(M-=26,b++);else if(f==="le")for(l=0,b=0;l<d.length;l+=3)S=d[l]|d[l+1]<<8|d[l+2]<<16,this.words[b]|=S<<M&67108863,this.words[b+1]=S>>>26-M&67108863,M+=24,M>=26&&(M-=26,b++);return this.strip()};function c(P,d){var _=P.charCodeAt(d);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function u(P,d,_){var f=c(P,_);return _-1>=d&&(f|=c(P,_-1)<<4),f}n.prototype._parseHex=function(d,_,f){this.length=Math.ceil((d.length-_)/6),this.words=new Array(this.length);for(var l=0;l<this.length;l++)this.words[l]=0;var b=0,S=0,M;if(f==="be")for(l=d.length-1;l>=_;l-=2)M=u(d,_,l)<<b,this.words[S]|=M&67108863,b>=18?(b-=18,S+=1,this.words[S]|=M>>>26):b+=8;else{var A=d.length-_;for(l=A%2===0?_+1:_;l<d.length;l+=2)M=u(d,_,l)<<b,this.words[S]|=M&67108863,b>=18?(b-=18,S+=1,this.words[S]|=M>>>26):b+=8}this.strip()};function p(P,d,_,f){for(var l=0,b=Math.min(P.length,_),S=d;S<b;S++){var M=P.charCodeAt(S)-48;l*=f,M>=49?l+=M-49+10:M>=17?l+=M-17+10:l+=M}return l}n.prototype._parseBase=function(d,_,f){this.words=[0],this.length=1;for(var l=0,b=1;b<=67108863;b*=_)l++;l--,b=b/_|0;for(var S=d.length-f,M=S%l,A=Math.min(S,S-M)+f,v=0,x=f;x<A;x+=l)v=p(d,x,x+l,_),this.imuln(b),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(M!==0){var y=1;for(v=p(d,x,d.length,_),x=0;x<M;x++)y*=_;this.imuln(y),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},n.prototype.copy=function(d){d.words=new Array(this.length);for(var _=0;_<this.length;_++)d.words[_]=this.words[_];d.length=this.length,d.negative=this.negative,d.red=this.red},n.prototype.clone=function(){var d=new n(null);return this.copy(d),d},n.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(d,_){d=d||10,_=_|0||1;var f;if(d===16||d==="hex"){f="";for(var l=0,b=0,S=0;S<this.length;S++){var M=this.words[S],A=((M<<l|b)&16777215).toString(16);b=M>>>24-l&16777215,l+=2,l>=26&&(l-=26,S--),b!==0||S!==this.length-1?f=g[6-A.length]+A+f:f=A+f}for(b!==0&&(f=b.toString(16)+f);f.length%_!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(d===(d|0)&&d>=2&&d<=36){var v=m[d],x=w[d];f="";var y=this.clone();for(y.negative=0;!y.isZero();){var N=y.modn(x).toString(d);y=y.idivn(x),y.isZero()?f=N+f:f=g[v-N.length]+N+f}for(this.isZero()&&(f="0"+f);f.length%_!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}t(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(d,_){return t(typeof a<"u"),this.toArrayLike(a,d,_)},n.prototype.toArray=function(d,_){return this.toArrayLike(Array,d,_)},n.prototype.toArrayLike=function(d,_,f){var l=this.byteLength(),b=f||Math.max(1,l);t(l<=b,"byte array longer than desired length"),t(b>0,"Requested array length <= 0"),this.strip();var S=_==="le",M=new d(b),A,v,x=this.clone();if(S){for(v=0;!x.isZero();v++)A=x.andln(255),x.iushrn(8),M[v]=A;for(;v<b;v++)M[v]=0}else{for(v=0;v<b-l;v++)M[v]=0;for(v=0;!x.isZero();v++)A=x.andln(255),x.iushrn(8),M[b-v-1]=A}return M},Math.clz32?n.prototype._countBits=function(d){return 32-Math.clz32(d)}:n.prototype._countBits=function(d){var _=d,f=0;return _>=4096&&(f+=13,_>>>=13),_>=64&&(f+=7,_>>>=7),_>=8&&(f+=4,_>>>=4),_>=2&&(f+=2,_>>>=2),f+_},n.prototype._zeroBits=function(d){if(d===0)return 26;var _=d,f=0;return _&8191||(f+=13,_>>>=13),_&127||(f+=7,_>>>=7),_&15||(f+=4,_>>>=4),_&3||(f+=2,_>>>=2),_&1||f++,f},n.prototype.bitLength=function(){var d=this.words[this.length-1],_=this._countBits(d);return(this.length-1)*26+_};function R(P){for(var d=new Array(P.bitLength()),_=0;_<d.length;_++){var f=_/26|0,l=_%26;d[_]=(P.words[f]&1<<l)>>>l}return d}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,_=0;_<this.length;_++){var f=this._zeroBits(this.words[_]);if(d+=f,f!==26)break}return d},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},n.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var _=0;_<d.length;_++)this.words[_]=this.words[_]|d.words[_];return this.strip()},n.prototype.ior=function(d){return t((this.negative|d.negative)===0),this.iuor(d)},n.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},n.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},n.prototype.iuand=function(d){var _;this.length>d.length?_=d:_=this;for(var f=0;f<_.length;f++)this.words[f]=this.words[f]&d.words[f];return this.length=_.length,this.strip()},n.prototype.iand=function(d){return t((this.negative|d.negative)===0),this.iuand(d)},n.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},n.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},n.prototype.iuxor=function(d){var _,f;this.length>d.length?(_=this,f=d):(_=d,f=this);for(var l=0;l<f.length;l++)this.words[l]=_.words[l]^f.words[l];if(this!==_)for(;l<_.length;l++)this.words[l]=_.words[l];return this.length=_.length,this.strip()},n.prototype.ixor=function(d){return t((this.negative|d.negative)===0),this.iuxor(d)},n.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},n.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},n.prototype.inotn=function(d){t(typeof d=="number"&&d>=0);var _=Math.ceil(d/26)|0,f=d%26;this._expand(_),f>0&&_--;for(var l=0;l<_;l++)this.words[l]=~this.words[l]&67108863;return f>0&&(this.words[l]=~this.words[l]&67108863>>26-f),this.strip()},n.prototype.notn=function(d){return this.clone().inotn(d)},n.prototype.setn=function(d,_){t(typeof d=="number"&&d>=0);var f=d/26|0,l=d%26;return this._expand(f+1),_?this.words[f]=this.words[f]|1<<l:this.words[f]=this.words[f]&~(1<<l),this.strip()},n.prototype.iadd=function(d){var _;if(this.negative!==0&&d.negative===0)return this.negative=0,_=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,_=this.isub(d),d.negative=1,_._normSign();var f,l;this.length>d.length?(f=this,l=d):(f=d,l=this);for(var b=0,S=0;S<l.length;S++)_=(f.words[S]|0)+(l.words[S]|0)+b,this.words[S]=_&67108863,b=_>>>26;for(;b!==0&&S<f.length;S++)_=(f.words[S]|0)+b,this.words[S]=_&67108863,b=_>>>26;if(this.length=f.length,b!==0)this.words[this.length]=b,this.length++;else if(f!==this)for(;S<f.length;S++)this.words[S]=f.words[S];return this},n.prototype.add=function(d){var _;return d.negative!==0&&this.negative===0?(d.negative=0,_=this.sub(d),d.negative^=1,_):d.negative===0&&this.negative!==0?(this.negative=0,_=d.sub(this),this.negative=1,_):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},n.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var _=this.iadd(d);return d.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var f=this.cmp(d);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var l,b;f>0?(l=this,b=d):(l=d,b=this);for(var S=0,M=0;M<b.length;M++)_=(l.words[M]|0)-(b.words[M]|0)+S,S=_>>26,this.words[M]=_&67108863;for(;S!==0&&M<l.length;M++)_=(l.words[M]|0)+S,S=_>>26,this.words[M]=_&67108863;if(S===0&&M<l.length&&l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this.length=Math.max(this.length,M),l!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(d){return this.clone().isub(d)};function I(P,d,_){_.negative=d.negative^P.negative;var f=P.length+d.length|0;_.length=f,f=f-1|0;var l=P.words[0]|0,b=d.words[0]|0,S=l*b,M=S&67108863,A=S/67108864|0;_.words[0]=M;for(var v=1;v<f;v++){for(var x=A>>>26,y=A&67108863,N=Math.min(v,d.length-1),Z=Math.max(0,v-P.length+1);Z<=N;Z++){var ee=v-Z|0;l=P.words[ee]|0,b=d.words[Z]|0,S=l*b+y,x+=S/67108864|0,y=S&67108863}_.words[v]=y|0,A=x|0}return A!==0?_.words[v]=A|0:_.length--,_.strip()}var O=function(d,_,f){var l=d.words,b=_.words,S=f.words,M=0,A,v,x,y=l[0]|0,N=y&8191,Z=y>>>13,ee=l[1]|0,D=ee&8191,V=ee>>>13,G=l[2]|0,J=G&8191,ie=G>>>13,fe=l[3]|0,se=fe&8191,ce=fe>>>13,pe=l[4]|0,ne=pe&8191,de=pe>>>13,_t=l[5]|0,_e=_t&8191,vt=_t>>>13,Et=l[6]|0,xe=Et&8191,Ve=Et>>>13,nt=l[7]|0,Ae=nt&8191,xt=nt>>>13,st=l[8]|0,Le=st&8191,at=st>>>13,rt=l[9]|0,Me=rt&8191,ct=rt>>>13,ft=b[0]|0,De=ft&8191,ut=ft>>>13,ht=b[1]|0,Re=ht&8191,lt=ht>>>13,dt=b[2]|0,qe=dt&8191,At=dt>>>13,St=b[3]|0,Ne=St&8191,bt=St>>>13,It=b[4]|0,Be=It&8191,Mt=It>>>13,Dt=b[5]|0,Te=Dt&8191,Rt=Dt>>>13,Pt=b[6]|0,Fe=Pt&8191,pt=Pt>>>13,Ct=b[7]|0,Pe=Ct&8191,Ot=Ct>>>13,Nt=b[8]|0,Ue=Nt&8191,Tt=Nt>>>13,Lt=b[9]|0,ze=Lt&8191,qt=Lt>>>13;f.negative=d.negative^_.negative,f.length=19,A=Math.imul(N,De),v=Math.imul(N,ut),v=v+Math.imul(Z,De)|0,x=Math.imul(Z,ut);var mt=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(mt>>>26)|0,mt&=67108863,A=Math.imul(D,De),v=Math.imul(D,ut),v=v+Math.imul(V,De)|0,x=Math.imul(V,ut),A=A+Math.imul(N,Re)|0,v=v+Math.imul(N,lt)|0,v=v+Math.imul(Z,Re)|0,x=x+Math.imul(Z,lt)|0;var gt=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(gt>>>26)|0,gt&=67108863,A=Math.imul(J,De),v=Math.imul(J,ut),v=v+Math.imul(ie,De)|0,x=Math.imul(ie,ut),A=A+Math.imul(D,Re)|0,v=v+Math.imul(D,lt)|0,v=v+Math.imul(V,Re)|0,x=x+Math.imul(V,lt)|0,A=A+Math.imul(N,qe)|0,v=v+Math.imul(N,At)|0,v=v+Math.imul(Z,qe)|0,x=x+Math.imul(Z,At)|0;var ei=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(ei>>>26)|0,ei&=67108863,A=Math.imul(se,De),v=Math.imul(se,ut),v=v+Math.imul(ce,De)|0,x=Math.imul(ce,ut),A=A+Math.imul(J,Re)|0,v=v+Math.imul(J,lt)|0,v=v+Math.imul(ie,Re)|0,x=x+Math.imul(ie,lt)|0,A=A+Math.imul(D,qe)|0,v=v+Math.imul(D,At)|0,v=v+Math.imul(V,qe)|0,x=x+Math.imul(V,At)|0,A=A+Math.imul(N,Ne)|0,v=v+Math.imul(N,bt)|0,v=v+Math.imul(Z,Ne)|0,x=x+Math.imul(Z,bt)|0;var ti=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(ti>>>26)|0,ti&=67108863,A=Math.imul(ne,De),v=Math.imul(ne,ut),v=v+Math.imul(de,De)|0,x=Math.imul(de,ut),A=A+Math.imul(se,Re)|0,v=v+Math.imul(se,lt)|0,v=v+Math.imul(ce,Re)|0,x=x+Math.imul(ce,lt)|0,A=A+Math.imul(J,qe)|0,v=v+Math.imul(J,At)|0,v=v+Math.imul(ie,qe)|0,x=x+Math.imul(ie,At)|0,A=A+Math.imul(D,Ne)|0,v=v+Math.imul(D,bt)|0,v=v+Math.imul(V,Ne)|0,x=x+Math.imul(V,bt)|0,A=A+Math.imul(N,Be)|0,v=v+Math.imul(N,Mt)|0,v=v+Math.imul(Z,Be)|0,x=x+Math.imul(Z,Mt)|0;var ri=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(ri>>>26)|0,ri&=67108863,A=Math.imul(_e,De),v=Math.imul(_e,ut),v=v+Math.imul(vt,De)|0,x=Math.imul(vt,ut),A=A+Math.imul(ne,Re)|0,v=v+Math.imul(ne,lt)|0,v=v+Math.imul(de,Re)|0,x=x+Math.imul(de,lt)|0,A=A+Math.imul(se,qe)|0,v=v+Math.imul(se,At)|0,v=v+Math.imul(ce,qe)|0,x=x+Math.imul(ce,At)|0,A=A+Math.imul(J,Ne)|0,v=v+Math.imul(J,bt)|0,v=v+Math.imul(ie,Ne)|0,x=x+Math.imul(ie,bt)|0,A=A+Math.imul(D,Be)|0,v=v+Math.imul(D,Mt)|0,v=v+Math.imul(V,Be)|0,x=x+Math.imul(V,Mt)|0,A=A+Math.imul(N,Te)|0,v=v+Math.imul(N,Rt)|0,v=v+Math.imul(Z,Te)|0,x=x+Math.imul(Z,Rt)|0;var ii=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(ii>>>26)|0,ii&=67108863,A=Math.imul(xe,De),v=Math.imul(xe,ut),v=v+Math.imul(Ve,De)|0,x=Math.imul(Ve,ut),A=A+Math.imul(_e,Re)|0,v=v+Math.imul(_e,lt)|0,v=v+Math.imul(vt,Re)|0,x=x+Math.imul(vt,lt)|0,A=A+Math.imul(ne,qe)|0,v=v+Math.imul(ne,At)|0,v=v+Math.imul(de,qe)|0,x=x+Math.imul(de,At)|0,A=A+Math.imul(se,Ne)|0,v=v+Math.imul(se,bt)|0,v=v+Math.imul(ce,Ne)|0,x=x+Math.imul(ce,bt)|0,A=A+Math.imul(J,Be)|0,v=v+Math.imul(J,Mt)|0,v=v+Math.imul(ie,Be)|0,x=x+Math.imul(ie,Mt)|0,A=A+Math.imul(D,Te)|0,v=v+Math.imul(D,Rt)|0,v=v+Math.imul(V,Te)|0,x=x+Math.imul(V,Rt)|0,A=A+Math.imul(N,Fe)|0,v=v+Math.imul(N,pt)|0,v=v+Math.imul(Z,Fe)|0,x=x+Math.imul(Z,pt)|0;var ni=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(ni>>>26)|0,ni&=67108863,A=Math.imul(Ae,De),v=Math.imul(Ae,ut),v=v+Math.imul(xt,De)|0,x=Math.imul(xt,ut),A=A+Math.imul(xe,Re)|0,v=v+Math.imul(xe,lt)|0,v=v+Math.imul(Ve,Re)|0,x=x+Math.imul(Ve,lt)|0,A=A+Math.imul(_e,qe)|0,v=v+Math.imul(_e,At)|0,v=v+Math.imul(vt,qe)|0,x=x+Math.imul(vt,At)|0,A=A+Math.imul(ne,Ne)|0,v=v+Math.imul(ne,bt)|0,v=v+Math.imul(de,Ne)|0,x=x+Math.imul(de,bt)|0,A=A+Math.imul(se,Be)|0,v=v+Math.imul(se,Mt)|0,v=v+Math.imul(ce,Be)|0,x=x+Math.imul(ce,Mt)|0,A=A+Math.imul(J,Te)|0,v=v+Math.imul(J,Rt)|0,v=v+Math.imul(ie,Te)|0,x=x+Math.imul(ie,Rt)|0,A=A+Math.imul(D,Fe)|0,v=v+Math.imul(D,pt)|0,v=v+Math.imul(V,Fe)|0,x=x+Math.imul(V,pt)|0,A=A+Math.imul(N,Pe)|0,v=v+Math.imul(N,Ot)|0,v=v+Math.imul(Z,Pe)|0,x=x+Math.imul(Z,Ot)|0;var si=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(si>>>26)|0,si&=67108863,A=Math.imul(Le,De),v=Math.imul(Le,ut),v=v+Math.imul(at,De)|0,x=Math.imul(at,ut),A=A+Math.imul(Ae,Re)|0,v=v+Math.imul(Ae,lt)|0,v=v+Math.imul(xt,Re)|0,x=x+Math.imul(xt,lt)|0,A=A+Math.imul(xe,qe)|0,v=v+Math.imul(xe,At)|0,v=v+Math.imul(Ve,qe)|0,x=x+Math.imul(Ve,At)|0,A=A+Math.imul(_e,Ne)|0,v=v+Math.imul(_e,bt)|0,v=v+Math.imul(vt,Ne)|0,x=x+Math.imul(vt,bt)|0,A=A+Math.imul(ne,Be)|0,v=v+Math.imul(ne,Mt)|0,v=v+Math.imul(de,Be)|0,x=x+Math.imul(de,Mt)|0,A=A+Math.imul(se,Te)|0,v=v+Math.imul(se,Rt)|0,v=v+Math.imul(ce,Te)|0,x=x+Math.imul(ce,Rt)|0,A=A+Math.imul(J,Fe)|0,v=v+Math.imul(J,pt)|0,v=v+Math.imul(ie,Fe)|0,x=x+Math.imul(ie,pt)|0,A=A+Math.imul(D,Pe)|0,v=v+Math.imul(D,Ot)|0,v=v+Math.imul(V,Pe)|0,x=x+Math.imul(V,Ot)|0,A=A+Math.imul(N,Ue)|0,v=v+Math.imul(N,Tt)|0,v=v+Math.imul(Z,Ue)|0,x=x+Math.imul(Z,Tt)|0;var Oi=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,A=Math.imul(Me,De),v=Math.imul(Me,ut),v=v+Math.imul(ct,De)|0,x=Math.imul(ct,ut),A=A+Math.imul(Le,Re)|0,v=v+Math.imul(Le,lt)|0,v=v+Math.imul(at,Re)|0,x=x+Math.imul(at,lt)|0,A=A+Math.imul(Ae,qe)|0,v=v+Math.imul(Ae,At)|0,v=v+Math.imul(xt,qe)|0,x=x+Math.imul(xt,At)|0,A=A+Math.imul(xe,Ne)|0,v=v+Math.imul(xe,bt)|0,v=v+Math.imul(Ve,Ne)|0,x=x+Math.imul(Ve,bt)|0,A=A+Math.imul(_e,Be)|0,v=v+Math.imul(_e,Mt)|0,v=v+Math.imul(vt,Be)|0,x=x+Math.imul(vt,Mt)|0,A=A+Math.imul(ne,Te)|0,v=v+Math.imul(ne,Rt)|0,v=v+Math.imul(de,Te)|0,x=x+Math.imul(de,Rt)|0,A=A+Math.imul(se,Fe)|0,v=v+Math.imul(se,pt)|0,v=v+Math.imul(ce,Fe)|0,x=x+Math.imul(ce,pt)|0,A=A+Math.imul(J,Pe)|0,v=v+Math.imul(J,Ot)|0,v=v+Math.imul(ie,Pe)|0,x=x+Math.imul(ie,Ot)|0,A=A+Math.imul(D,Ue)|0,v=v+Math.imul(D,Tt)|0,v=v+Math.imul(V,Ue)|0,x=x+Math.imul(V,Tt)|0,A=A+Math.imul(N,ze)|0,v=v+Math.imul(N,qt)|0,v=v+Math.imul(Z,ze)|0,x=x+Math.imul(Z,qt)|0;var ss=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(ss>>>26)|0,ss&=67108863,A=Math.imul(Me,Re),v=Math.imul(Me,lt),v=v+Math.imul(ct,Re)|0,x=Math.imul(ct,lt),A=A+Math.imul(Le,qe)|0,v=v+Math.imul(Le,At)|0,v=v+Math.imul(at,qe)|0,x=x+Math.imul(at,At)|0,A=A+Math.imul(Ae,Ne)|0,v=v+Math.imul(Ae,bt)|0,v=v+Math.imul(xt,Ne)|0,x=x+Math.imul(xt,bt)|0,A=A+Math.imul(xe,Be)|0,v=v+Math.imul(xe,Mt)|0,v=v+Math.imul(Ve,Be)|0,x=x+Math.imul(Ve,Mt)|0,A=A+Math.imul(_e,Te)|0,v=v+Math.imul(_e,Rt)|0,v=v+Math.imul(vt,Te)|0,x=x+Math.imul(vt,Rt)|0,A=A+Math.imul(ne,Fe)|0,v=v+Math.imul(ne,pt)|0,v=v+Math.imul(de,Fe)|0,x=x+Math.imul(de,pt)|0,A=A+Math.imul(se,Pe)|0,v=v+Math.imul(se,Ot)|0,v=v+Math.imul(ce,Pe)|0,x=x+Math.imul(ce,Ot)|0,A=A+Math.imul(J,Ue)|0,v=v+Math.imul(J,Tt)|0,v=v+Math.imul(ie,Ue)|0,x=x+Math.imul(ie,Tt)|0,A=A+Math.imul(D,ze)|0,v=v+Math.imul(D,qt)|0,v=v+Math.imul(V,ze)|0,x=x+Math.imul(V,qt)|0;var Ni=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,A=Math.imul(Me,qe),v=Math.imul(Me,At),v=v+Math.imul(ct,qe)|0,x=Math.imul(ct,At),A=A+Math.imul(Le,Ne)|0,v=v+Math.imul(Le,bt)|0,v=v+Math.imul(at,Ne)|0,x=x+Math.imul(at,bt)|0,A=A+Math.imul(Ae,Be)|0,v=v+Math.imul(Ae,Mt)|0,v=v+Math.imul(xt,Be)|0,x=x+Math.imul(xt,Mt)|0,A=A+Math.imul(xe,Te)|0,v=v+Math.imul(xe,Rt)|0,v=v+Math.imul(Ve,Te)|0,x=x+Math.imul(Ve,Rt)|0,A=A+Math.imul(_e,Fe)|0,v=v+Math.imul(_e,pt)|0,v=v+Math.imul(vt,Fe)|0,x=x+Math.imul(vt,pt)|0,A=A+Math.imul(ne,Pe)|0,v=v+Math.imul(ne,Ot)|0,v=v+Math.imul(de,Pe)|0,x=x+Math.imul(de,Ot)|0,A=A+Math.imul(se,Ue)|0,v=v+Math.imul(se,Tt)|0,v=v+Math.imul(ce,Ue)|0,x=x+Math.imul(ce,Tt)|0,A=A+Math.imul(J,ze)|0,v=v+Math.imul(J,qt)|0,v=v+Math.imul(ie,ze)|0,x=x+Math.imul(ie,qt)|0;var as=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(as>>>26)|0,as&=67108863,A=Math.imul(Me,Ne),v=Math.imul(Me,bt),v=v+Math.imul(ct,Ne)|0,x=Math.imul(ct,bt),A=A+Math.imul(Le,Be)|0,v=v+Math.imul(Le,Mt)|0,v=v+Math.imul(at,Be)|0,x=x+Math.imul(at,Mt)|0,A=A+Math.imul(Ae,Te)|0,v=v+Math.imul(Ae,Rt)|0,v=v+Math.imul(xt,Te)|0,x=x+Math.imul(xt,Rt)|0,A=A+Math.imul(xe,Fe)|0,v=v+Math.imul(xe,pt)|0,v=v+Math.imul(Ve,Fe)|0,x=x+Math.imul(Ve,pt)|0,A=A+Math.imul(_e,Pe)|0,v=v+Math.imul(_e,Ot)|0,v=v+Math.imul(vt,Pe)|0,x=x+Math.imul(vt,Ot)|0,A=A+Math.imul(ne,Ue)|0,v=v+Math.imul(ne,Tt)|0,v=v+Math.imul(de,Ue)|0,x=x+Math.imul(de,Tt)|0,A=A+Math.imul(se,ze)|0,v=v+Math.imul(se,qt)|0,v=v+Math.imul(ce,ze)|0,x=x+Math.imul(ce,qt)|0;var os=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(os>>>26)|0,os&=67108863,A=Math.imul(Me,Be),v=Math.imul(Me,Mt),v=v+Math.imul(ct,Be)|0,x=Math.imul(ct,Mt),A=A+Math.imul(Le,Te)|0,v=v+Math.imul(Le,Rt)|0,v=v+Math.imul(at,Te)|0,x=x+Math.imul(at,Rt)|0,A=A+Math.imul(Ae,Fe)|0,v=v+Math.imul(Ae,pt)|0,v=v+Math.imul(xt,Fe)|0,x=x+Math.imul(xt,pt)|0,A=A+Math.imul(xe,Pe)|0,v=v+Math.imul(xe,Ot)|0,v=v+Math.imul(Ve,Pe)|0,x=x+Math.imul(Ve,Ot)|0,A=A+Math.imul(_e,Ue)|0,v=v+Math.imul(_e,Tt)|0,v=v+Math.imul(vt,Ue)|0,x=x+Math.imul(vt,Tt)|0,A=A+Math.imul(ne,ze)|0,v=v+Math.imul(ne,qt)|0,v=v+Math.imul(de,ze)|0,x=x+Math.imul(de,qt)|0;var cs=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(cs>>>26)|0,cs&=67108863,A=Math.imul(Me,Te),v=Math.imul(Me,Rt),v=v+Math.imul(ct,Te)|0,x=Math.imul(ct,Rt),A=A+Math.imul(Le,Fe)|0,v=v+Math.imul(Le,pt)|0,v=v+Math.imul(at,Fe)|0,x=x+Math.imul(at,pt)|0,A=A+Math.imul(Ae,Pe)|0,v=v+Math.imul(Ae,Ot)|0,v=v+Math.imul(xt,Pe)|0,x=x+Math.imul(xt,Ot)|0,A=A+Math.imul(xe,Ue)|0,v=v+Math.imul(xe,Tt)|0,v=v+Math.imul(Ve,Ue)|0,x=x+Math.imul(Ve,Tt)|0,A=A+Math.imul(_e,ze)|0,v=v+Math.imul(_e,qt)|0,v=v+Math.imul(vt,ze)|0,x=x+Math.imul(vt,qt)|0;var En=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(En>>>26)|0,En&=67108863,A=Math.imul(Me,Fe),v=Math.imul(Me,pt),v=v+Math.imul(ct,Fe)|0,x=Math.imul(ct,pt),A=A+Math.imul(Le,Pe)|0,v=v+Math.imul(Le,Ot)|0,v=v+Math.imul(at,Pe)|0,x=x+Math.imul(at,Ot)|0,A=A+Math.imul(Ae,Ue)|0,v=v+Math.imul(Ae,Tt)|0,v=v+Math.imul(xt,Ue)|0,x=x+Math.imul(xt,Tt)|0,A=A+Math.imul(xe,ze)|0,v=v+Math.imul(xe,qt)|0,v=v+Math.imul(Ve,ze)|0,x=x+Math.imul(Ve,qt)|0;var xn=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(xn>>>26)|0,xn&=67108863,A=Math.imul(Me,Pe),v=Math.imul(Me,Ot),v=v+Math.imul(ct,Pe)|0,x=Math.imul(ct,Ot),A=A+Math.imul(Le,Ue)|0,v=v+Math.imul(Le,Tt)|0,v=v+Math.imul(at,Ue)|0,x=x+Math.imul(at,Tt)|0,A=A+Math.imul(Ae,ze)|0,v=v+Math.imul(Ae,qt)|0,v=v+Math.imul(xt,ze)|0,x=x+Math.imul(xt,qt)|0;var An=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(An>>>26)|0,An&=67108863,A=Math.imul(Me,Ue),v=Math.imul(Me,Tt),v=v+Math.imul(ct,Ue)|0,x=Math.imul(ct,Tt),A=A+Math.imul(Le,ze)|0,v=v+Math.imul(Le,qt)|0,v=v+Math.imul(at,ze)|0,x=x+Math.imul(at,qt)|0;var fs=(M+A|0)+((v&8191)<<13)|0;M=(x+(v>>>13)|0)+(fs>>>26)|0,fs&=67108863,A=Math.imul(Me,ze),v=Math.imul(Me,qt),v=v+Math.imul(ct,ze)|0,x=Math.imul(ct,qt);var us=(M+A|0)+((v&8191)<<13)|0;return M=(x+(v>>>13)|0)+(us>>>26)|0,us&=67108863,S[0]=mt,S[1]=gt,S[2]=ei,S[3]=ti,S[4]=ri,S[5]=ii,S[6]=ni,S[7]=si,S[8]=Oi,S[9]=ss,S[10]=Ni,S[11]=as,S[12]=os,S[13]=cs,S[14]=En,S[15]=xn,S[16]=An,S[17]=fs,S[18]=us,M!==0&&(S[19]=M,f.length++),f};Math.imul||(O=I);function B(P,d,_){_.negative=d.negative^P.negative,_.length=P.length+d.length;for(var f=0,l=0,b=0;b<_.length-1;b++){var S=l;l=0;for(var M=f&67108863,A=Math.min(b,d.length-1),v=Math.max(0,b-P.length+1);v<=A;v++){var x=b-v,y=P.words[x]|0,N=d.words[v]|0,Z=y*N,ee=Z&67108863;S=S+(Z/67108864|0)|0,ee=ee+M|0,M=ee&67108863,S=S+(ee>>>26)|0,l+=S>>>26,S&=67108863}_.words[b]=M,f=S,S=l}return f!==0?_.words[b]=f:_.length--,_.strip()}function F(P,d,_){var f=new z;return f.mulp(P,d,_)}n.prototype.mulTo=function(d,_){var f,l=this.length+d.length;return this.length===10&&d.length===10?f=O(this,d,_):l<63?f=I(this,d,_):l<1024?f=B(this,d,_):f=F(this,d,_),f};function z(P,d){this.x=P,this.y=d}z.prototype.makeRBT=function(d){for(var _=new Array(d),f=n.prototype._countBits(d)-1,l=0;l<d;l++)_[l]=this.revBin(l,f,d);return _},z.prototype.revBin=function(d,_,f){if(d===0||d===f-1)return d;for(var l=0,b=0;b<_;b++)l|=(d&1)<<_-b-1,d>>=1;return l},z.prototype.permute=function(d,_,f,l,b,S){for(var M=0;M<S;M++)l[M]=_[d[M]],b[M]=f[d[M]]},z.prototype.transform=function(d,_,f,l,b,S){this.permute(S,d,_,f,l,b);for(var M=1;M<b;M<<=1)for(var A=M<<1,v=Math.cos(2*Math.PI/A),x=Math.sin(2*Math.PI/A),y=0;y<b;y+=A)for(var N=v,Z=x,ee=0;ee<M;ee++){var D=f[y+ee],V=l[y+ee],G=f[y+ee+M],J=l[y+ee+M],ie=N*G-Z*J;J=N*J+Z*G,G=ie,f[y+ee]=D+G,l[y+ee]=V+J,f[y+ee+M]=D-G,l[y+ee+M]=V-J,ee!==A&&(ie=v*N-x*Z,Z=v*Z+x*N,N=ie)}},z.prototype.guessLen13b=function(d,_){var f=Math.max(_,d)|1,l=f&1,b=0;for(f=f/2|0;f;f=f>>>1)b++;return 1<<b+1+l},z.prototype.conjugate=function(d,_,f){if(!(f<=1))for(var l=0;l<f/2;l++){var b=d[l];d[l]=d[f-l-1],d[f-l-1]=b,b=_[l],_[l]=-_[f-l-1],_[f-l-1]=-b}},z.prototype.normalize13b=function(d,_){for(var f=0,l=0;l<_/2;l++){var b=Math.round(d[2*l+1]/_)*8192+Math.round(d[2*l]/_)+f;d[l]=b&67108863,b<67108864?f=0:f=b/67108864|0}return d},z.prototype.convert13b=function(d,_,f,l){for(var b=0,S=0;S<_;S++)b=b+(d[S]|0),f[2*S]=b&8191,b=b>>>13,f[2*S+1]=b&8191,b=b>>>13;for(S=2*_;S<l;++S)f[S]=0;t(b===0),t((b&-8192)===0)},z.prototype.stub=function(d){for(var _=new Array(d),f=0;f<d;f++)_[f]=0;return _},z.prototype.mulp=function(d,_,f){var l=2*this.guessLen13b(d.length,_.length),b=this.makeRBT(l),S=this.stub(l),M=new Array(l),A=new Array(l),v=new Array(l),x=new Array(l),y=new Array(l),N=new Array(l),Z=f.words;Z.length=l,this.convert13b(d.words,d.length,M,l),this.convert13b(_.words,_.length,x,l),this.transform(M,S,A,v,l,b),this.transform(x,S,y,N,l,b);for(var ee=0;ee<l;ee++){var D=A[ee]*y[ee]-v[ee]*N[ee];v[ee]=A[ee]*N[ee]+v[ee]*y[ee],A[ee]=D}return this.conjugate(A,v,l),this.transform(A,v,Z,S,l,b),this.conjugate(Z,S,l),this.normalize13b(Z,l),f.negative=d.negative^_.negative,f.length=d.length+_.length,f.strip()},n.prototype.mul=function(d){var _=new n(null);return _.words=new Array(this.length+d.length),this.mulTo(d,_)},n.prototype.mulf=function(d){var _=new n(null);return _.words=new Array(this.length+d.length),F(this,d,_)},n.prototype.imul=function(d){return this.clone().mulTo(d,this)},n.prototype.imuln=function(d){t(typeof d=="number"),t(d<67108864);for(var _=0,f=0;f<this.length;f++){var l=(this.words[f]|0)*d,b=(l&67108863)+(_&67108863);_>>=26,_+=l/67108864|0,_+=b>>>26,this.words[f]=b&67108863}return _!==0&&(this.words[f]=_,this.length++),this},n.prototype.muln=function(d){return this.clone().imuln(d)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(d){var _=R(d);if(_.length===0)return new n(1);for(var f=this,l=0;l<_.length&&_[l]===0;l++,f=f.sqr());if(++l<_.length)for(var b=f.sqr();l<_.length;l++,b=b.sqr())_[l]!==0&&(f=f.mul(b));return f},n.prototype.iushln=function(d){t(typeof d=="number"&&d>=0);var _=d%26,f=(d-_)/26,l=67108863>>>26-_<<26-_,b;if(_!==0){var S=0;for(b=0;b<this.length;b++){var M=this.words[b]&l,A=(this.words[b]|0)-M<<_;this.words[b]=A|S,S=M>>>26-_}S&&(this.words[b]=S,this.length++)}if(f!==0){for(b=this.length-1;b>=0;b--)this.words[b+f]=this.words[b];for(b=0;b<f;b++)this.words[b]=0;this.length+=f}return this.strip()},n.prototype.ishln=function(d){return t(this.negative===0),this.iushln(d)},n.prototype.iushrn=function(d,_,f){t(typeof d=="number"&&d>=0);var l;_?l=(_-_%26)/26:l=0;var b=d%26,S=Math.min((d-b)/26,this.length),M=67108863^67108863>>>b<<b,A=f;if(l-=S,l=Math.max(0,l),A){for(var v=0;v<S;v++)A.words[v]=this.words[v];A.length=S}if(S!==0)if(this.length>S)for(this.length-=S,v=0;v<this.length;v++)this.words[v]=this.words[v+S];else this.words[0]=0,this.length=1;var x=0;for(v=this.length-1;v>=0&&(x!==0||v>=l);v--){var y=this.words[v]|0;this.words[v]=x<<26-b|y>>>b,x=y&M}return A&&x!==0&&(A.words[A.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(d,_,f){return t(this.negative===0),this.iushrn(d,_,f)},n.prototype.shln=function(d){return this.clone().ishln(d)},n.prototype.ushln=function(d){return this.clone().iushln(d)},n.prototype.shrn=function(d){return this.clone().ishrn(d)},n.prototype.ushrn=function(d){return this.clone().iushrn(d)},n.prototype.testn=function(d){t(typeof d=="number"&&d>=0);var _=d%26,f=(d-_)/26,l=1<<_;if(this.length<=f)return!1;var b=this.words[f];return!!(b&l)},n.prototype.imaskn=function(d){t(typeof d=="number"&&d>=0);var _=d%26,f=(d-_)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(_!==0&&f++,this.length=Math.min(f,this.length),_!==0){var l=67108863^67108863>>>_<<_;this.words[this.length-1]&=l}return this.strip()},n.prototype.maskn=function(d){return this.clone().imaskn(d)},n.prototype.iaddn=function(d){return t(typeof d=="number"),t(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},n.prototype._iaddn=function(d){this.words[0]+=d;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},n.prototype.isubn=function(d){if(t(typeof d=="number"),t(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},n.prototype.addn=function(d){return this.clone().iaddn(d)},n.prototype.subn=function(d){return this.clone().isubn(d)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(d,_,f){var l=d.length+f,b;this._expand(l);var S,M=0;for(b=0;b<d.length;b++){S=(this.words[b+f]|0)+M;var A=(d.words[b]|0)*_;S-=A&67108863,M=(S>>26)-(A/67108864|0),this.words[b+f]=S&67108863}for(;b<this.length-f;b++)S=(this.words[b+f]|0)+M,M=S>>26,this.words[b+f]=S&67108863;if(M===0)return this.strip();for(t(M===-1),M=0,b=0;b<this.length;b++)S=-(this.words[b]|0)+M,M=S>>26,this.words[b]=S&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(d,_){var f=this.length-d.length,l=this.clone(),b=d,S=b.words[b.length-1]|0,M=this._countBits(S);f=26-M,f!==0&&(b=b.ushln(f),l.iushln(f),S=b.words[b.length-1]|0);var A=l.length-b.length,v;if(_!=="mod"){v=new n(null),v.length=A+1,v.words=new Array(v.length);for(var x=0;x<v.length;x++)v.words[x]=0}var y=l.clone()._ishlnsubmul(b,1,A);y.negative===0&&(l=y,v&&(v.words[A]=1));for(var N=A-1;N>=0;N--){var Z=(l.words[b.length+N]|0)*67108864+(l.words[b.length+N-1]|0);for(Z=Math.min(Z/S|0,67108863),l._ishlnsubmul(b,Z,N);l.negative!==0;)Z--,l.negative=0,l._ishlnsubmul(b,1,N),l.isZero()||(l.negative^=1);v&&(v.words[N]=Z)}return v&&v.strip(),l.strip(),_!=="div"&&f!==0&&l.iushrn(f),{div:v||null,mod:l}},n.prototype.divmod=function(d,_,f){if(t(!d.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var l,b,S;return this.negative!==0&&d.negative===0?(S=this.neg().divmod(d,_),_!=="mod"&&(l=S.div.neg()),_!=="div"&&(b=S.mod.neg(),f&&b.negative!==0&&b.iadd(d)),{div:l,mod:b}):this.negative===0&&d.negative!==0?(S=this.divmod(d.neg(),_),_!=="mod"&&(l=S.div.neg()),{div:l,mod:S.mod}):this.negative&d.negative?(S=this.neg().divmod(d.neg(),_),_!=="div"&&(b=S.mod.neg(),f&&b.negative!==0&&b.isub(d)),{div:S.div,mod:b}):d.length>this.length||this.cmp(d)<0?{div:new n(0),mod:this}:d.length===1?_==="div"?{div:this.divn(d.words[0]),mod:null}:_==="mod"?{div:null,mod:new n(this.modn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new n(this.modn(d.words[0]))}:this._wordDiv(d,_)},n.prototype.div=function(d){return this.divmod(d,"div",!1).div},n.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},n.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},n.prototype.divRound=function(d){var _=this.divmod(d);if(_.mod.isZero())return _.div;var f=_.div.negative!==0?_.mod.isub(d):_.mod,l=d.ushrn(1),b=d.andln(1),S=f.cmp(l);return S<0||b===1&&S===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},n.prototype.modn=function(d){t(d<=67108863);for(var _=(1<<26)%d,f=0,l=this.length-1;l>=0;l--)f=(_*f+(this.words[l]|0))%d;return f},n.prototype.idivn=function(d){t(d<=67108863);for(var _=0,f=this.length-1;f>=0;f--){var l=(this.words[f]|0)+_*67108864;this.words[f]=l/d|0,_=l%d}return this.strip()},n.prototype.divn=function(d){return this.clone().idivn(d)},n.prototype.egcd=function(d){t(d.negative===0),t(!d.isZero());var _=this,f=d.clone();_.negative!==0?_=_.umod(d):_=_.clone();for(var l=new n(1),b=new n(0),S=new n(0),M=new n(1),A=0;_.isEven()&&f.isEven();)_.iushrn(1),f.iushrn(1),++A;for(var v=f.clone(),x=_.clone();!_.isZero();){for(var y=0,N=1;!(_.words[0]&N)&&y<26;++y,N<<=1);if(y>0)for(_.iushrn(y);y-- >0;)(l.isOdd()||b.isOdd())&&(l.iadd(v),b.isub(x)),l.iushrn(1),b.iushrn(1);for(var Z=0,ee=1;!(f.words[0]&ee)&&Z<26;++Z,ee<<=1);if(Z>0)for(f.iushrn(Z);Z-- >0;)(S.isOdd()||M.isOdd())&&(S.iadd(v),M.isub(x)),S.iushrn(1),M.iushrn(1);_.cmp(f)>=0?(_.isub(f),l.isub(S),b.isub(M)):(f.isub(_),S.isub(l),M.isub(b))}return{a:S,b:M,gcd:f.iushln(A)}},n.prototype._invmp=function(d){t(d.negative===0),t(!d.isZero());var _=this,f=d.clone();_.negative!==0?_=_.umod(d):_=_.clone();for(var l=new n(1),b=new n(0),S=f.clone();_.cmpn(1)>0&&f.cmpn(1)>0;){for(var M=0,A=1;!(_.words[0]&A)&&M<26;++M,A<<=1);if(M>0)for(_.iushrn(M);M-- >0;)l.isOdd()&&l.iadd(S),l.iushrn(1);for(var v=0,x=1;!(f.words[0]&x)&&v<26;++v,x<<=1);if(v>0)for(f.iushrn(v);v-- >0;)b.isOdd()&&b.iadd(S),b.iushrn(1);_.cmp(f)>=0?(_.isub(f),l.isub(b)):(f.isub(_),b.isub(l))}var y;return _.cmpn(1)===0?y=l:y=b,y.cmpn(0)<0&&y.iadd(d),y},n.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var _=this.clone(),f=d.clone();_.negative=0,f.negative=0;for(var l=0;_.isEven()&&f.isEven();l++)_.iushrn(1),f.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;f.isEven();)f.iushrn(1);var b=_.cmp(f);if(b<0){var S=_;_=f,f=S}else if(b===0||f.cmpn(1)===0)break;_.isub(f)}while(!0);return f.iushln(l)},n.prototype.invm=function(d){return this.egcd(d).a.umod(d)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(d){return this.words[0]&d},n.prototype.bincn=function(d){t(typeof d=="number");var _=d%26,f=(d-_)/26,l=1<<_;if(this.length<=f)return this._expand(f+1),this.words[f]|=l,this;for(var b=l,S=f;b!==0&&S<this.length;S++){var M=this.words[S]|0;M+=b,b=M>>>26,M&=67108863,this.words[S]=M}return b!==0&&(this.words[S]=b,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(d){var _=d<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var f;if(this.length>1)f=1;else{_&&(d=-d),t(d<=67108863,"Number is too big");var l=this.words[0]|0;f=l===d?0:l<d?-1:1}return this.negative!==0?-f|0:f},n.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var _=this.ucmp(d);return this.negative!==0?-_|0:_},n.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var _=0,f=this.length-1;f>=0;f--){var l=this.words[f]|0,b=d.words[f]|0;if(l!==b){l<b?_=-1:l>b&&(_=1);break}}return _},n.prototype.gtn=function(d){return this.cmpn(d)===1},n.prototype.gt=function(d){return this.cmp(d)===1},n.prototype.gten=function(d){return this.cmpn(d)>=0},n.prototype.gte=function(d){return this.cmp(d)>=0},n.prototype.ltn=function(d){return this.cmpn(d)===-1},n.prototype.lt=function(d){return this.cmp(d)===-1},n.prototype.lten=function(d){return this.cmpn(d)<=0},n.prototype.lte=function(d){return this.cmp(d)<=0},n.prototype.eqn=function(d){return this.cmpn(d)===0},n.prototype.eq=function(d){return this.cmp(d)===0},n.red=function(d){return new U(d)},n.prototype.toRed=function(d){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},n.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(d){return this.red=d,this},n.prototype.forceRed=function(d){return t(!this.red,"Already a number in reduction context"),this._forceRed(d)},n.prototype.redAdd=function(d){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},n.prototype.redIAdd=function(d){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},n.prototype.redSub=function(d){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},n.prototype.redISub=function(d){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},n.prototype.redShl=function(d){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},n.prototype.redMul=function(d){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},n.prototype.redIMul=function(d){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},n.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(d){return t(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var Y={k256:null,p224:null,p192:null,p25519:null};function $(P,d){this.name=P,this.p=new n(d,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var d=new n(null);return d.words=new Array(Math.ceil(this.n/13)),d},$.prototype.ireduce=function(d){var _=d,f;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),f=_.bitLength();while(f>this.n);var l=f<this.n?-1:_.ucmp(this.p);return l===0?(_.words[0]=0,_.length=1):l>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},$.prototype.split=function(d,_){d.iushrn(this.n,0,_)},$.prototype.imulK=function(d){return d.imul(this.k)};function K(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(K,$),K.prototype.split=function(d,_){for(var f=4194303,l=Math.min(d.length,9),b=0;b<l;b++)_.words[b]=d.words[b];if(_.length=l,d.length<=9){d.words[0]=0,d.length=1;return}var S=d.words[9];for(_.words[_.length++]=S&f,b=10;b<d.length;b++){var M=d.words[b]|0;d.words[b-10]=(M&f)<<4|S>>>22,S=M}S>>>=22,d.words[b-10]=S,S===0&&d.length>10?d.length-=10:d.length-=9},K.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var _=0,f=0;f<d.length;f++){var l=d.words[f]|0;_+=l*977,d.words[f]=_&67108863,_=l*64+(_/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function X(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(X,$);function te(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,$);function k(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(k,$),k.prototype.imulK=function(d){for(var _=0,f=0;f<d.length;f++){var l=(d.words[f]|0)*19+_,b=l&67108863;l>>>=26,d.words[f]=b,_=l}return _!==0&&(d.words[d.length++]=_),d},n._prime=function(d){if(Y[d])return Y[d];var _;if(d==="k256")_=new K;else if(d==="p224")_=new X;else if(d==="p192")_=new te;else if(d==="p25519")_=new k;else throw new Error("Unknown prime "+d);return Y[d]=_,_};function U(P){if(typeof P=="string"){var d=n._prime(P);this.m=d.p,this.prime=d}else t(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}U.prototype._verify1=function(d){t(d.negative===0,"red works only with positives"),t(d.red,"red works only with red numbers")},U.prototype._verify2=function(d,_){t((d.negative|_.negative)===0,"red works only with positives"),t(d.red&&d.red===_.red,"red works only with red numbers")},U.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):d.umod(this.m)._forceRed(this)},U.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},U.prototype.add=function(d,_){this._verify2(d,_);var f=d.add(_);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},U.prototype.iadd=function(d,_){this._verify2(d,_);var f=d.iadd(_);return f.cmp(this.m)>=0&&f.isub(this.m),f},U.prototype.sub=function(d,_){this._verify2(d,_);var f=d.sub(_);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},U.prototype.isub=function(d,_){this._verify2(d,_);var f=d.isub(_);return f.cmpn(0)<0&&f.iadd(this.m),f},U.prototype.shl=function(d,_){return this._verify1(d),this.imod(d.ushln(_))},U.prototype.imul=function(d,_){return this._verify2(d,_),this.imod(d.imul(_))},U.prototype.mul=function(d,_){return this._verify2(d,_),this.imod(d.mul(_))},U.prototype.isqr=function(d){return this.imul(d,d.clone())},U.prototype.sqr=function(d){return this.mul(d,d)},U.prototype.sqrt=function(d){if(d.isZero())return d.clone();var _=this.m.andln(3);if(t(_%2===1),_===3){var f=this.m.add(new n(1)).iushrn(2);return this.pow(d,f)}for(var l=this.m.subn(1),b=0;!l.isZero()&&l.andln(1)===0;)b++,l.iushrn(1);t(!l.isZero());var S=new n(1).toRed(this),M=S.redNeg(),A=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new n(2*v*v).toRed(this);this.pow(v,A).cmp(M)!==0;)v.redIAdd(M);for(var x=this.pow(v,l),y=this.pow(d,l.addn(1).iushrn(1)),N=this.pow(d,l),Z=b;N.cmp(S)!==0;){for(var ee=N,D=0;ee.cmp(S)!==0;D++)ee=ee.redSqr();t(D<Z);var V=this.pow(x,new n(1).iushln(Z-D-1));y=y.redMul(V),x=V.redSqr(),N=N.redMul(x),Z=D}return y},U.prototype.invm=function(d){var _=d._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},U.prototype.pow=function(d,_){if(_.isZero())return new n(1).toRed(this);if(_.cmpn(1)===0)return d.clone();var f=4,l=new Array(1<<f);l[0]=new n(1).toRed(this),l[1]=d;for(var b=2;b<l.length;b++)l[b]=this.mul(l[b-1],d);var S=l[0],M=0,A=0,v=_.bitLength()%26;for(v===0&&(v=26),b=_.length-1;b>=0;b--){for(var x=_.words[b],y=v-1;y>=0;y--){var N=x>>y&1;if(S!==l[0]&&(S=this.sqr(S)),N===0&&M===0){A=0;continue}M<<=1,M|=N,A++,!(A!==f&&(b!==0||y!==0))&&(S=this.mul(S,l[M]),A=0,M=0)}v=26}return S},U.prototype.convertTo=function(d){var _=d.umod(this.m);return _===d?_.clone():_},U.prototype.convertFrom=function(d){var _=d.clone();return _.red=null,_},n.mont=function(d){return new ae(d)};function ae(P){U.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ae,U),ae.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},ae.prototype.convertFrom=function(d){var _=this.imod(d.mul(this.rinv));return _.red=null,_},ae.prototype.imul=function(d,_){if(d.isZero()||_.isZero())return d.words[0]=0,d.length=1,d;var f=d.imul(_),l=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=f.isub(l).iushrn(this.shift),S=b;return b.cmp(this.m)>=0?S=b.isub(this.m):b.cmpn(0)<0&&(S=b.iadd(this.m)),S._forceRed(this)},ae.prototype.mul=function(d,_){if(d.isZero()||_.isZero())return new n(0)._forceRed(this);var f=d.mul(_),l=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=f.isub(l).iushrn(this.shift),S=b;return b.cmp(this.m)>=0?S=b.isub(this.m):b.cmpn(0)<0&&(S=b.iadd(this.m)),S._forceRed(this)},ae.prototype.invm=function(d){var _=this.imod(d._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(typeof up>"u"||up,Uy)});var ta=ve((PK,ky)=>{"use strict";ky.exports=zy;function zy(r,e){if(!r)throw new Error(e||"Assertion failed")}zy.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)}});var hp=ve(Ky=>{"use strict";var wh=Ky;function oP(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r!="string"){for(var i=0;i<r.length;i++)t[i]=r[i]|0;return t}if(e==="hex"){r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r);for(var i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var i=0;i<r.length;i++){var n=r.charCodeAt(i),a=n>>8,c=n&255;a?t.push(a,c):t.push(c)}return t}wh.toArray=oP;function jy(r){return r.length===1?"0"+r:r}wh.zero2=jy;function Hy(r){for(var e="",t=0;t<r.length;t++)e+=jy(r[t].toString(16));return e}wh.toHex=Hy;wh.encode=function(e,t){return t==="hex"?Hy(e):e}});var Si=ve(Vy=>{"use strict";var nn=Vy,cP=Cn(),fP=ta(),_h=hp();nn.assert=fP;nn.toArray=_h.toArray;nn.zero2=_h.zero2;nn.toHex=_h.toHex;nn.encode=_h.encode;function uP(r,e,t){var i=new Array(Math.max(r.bitLength(),t)+1),n;for(n=0;n<i.length;n+=1)i[n]=0;var a=1<<e+1,c=r.clone();for(n=0;n<i.length;n++){var u,p=c.andln(a-1);c.isOdd()?(p>(a>>1)-1?u=(a>>1)-p:u=p,c.isubn(u)):u=0,i[n]=u,c.iushrn(1)}return i}nn.getNAF=uP;function hP(r,e){var t=[[],[]];r=r.clone(),e=e.clone();for(var i=0,n=0,a;r.cmpn(-i)>0||e.cmpn(-n)>0;){var c=r.andln(3)+i&3,u=e.andln(3)+n&3;c===3&&(c=-1),u===3&&(u=-1);var p;c&1?(a=r.andln(7)+i&7,(a===3||a===5)&&u===2?p=-c:p=c):p=0,t[0].push(p);var g;u&1?(a=e.andln(7)+n&7,(a===3||a===5)&&c===2?g=-u:g=u):g=0,t[1].push(g),2*i===p+1&&(i=1-i),2*n===g+1&&(n=1-n),r.iushrn(1),e.iushrn(1)}return t}nn.getJSF=hP;function lP(r,e,t){var i="_"+e;r.prototype[e]=function(){return this[i]!==void 0?this[i]:this[i]=t.call(this)}}nn.cachedProperty=lP;function dP(r){return typeof r=="string"?nn.toArray(r,"hex"):r}nn.parseBytes=dP;function pP(r){return new cP(r,"hex","le")}nn.intFromLE=pP});var gp=ve((NK,pp)=>{"use strict";var lp;pp.exports=function(e){return lp||(lp=new ra(null)),lp.generate(e)};function ra(r){this.rand=r}pp.exports.Rand=ra;ra.prototype.generate=function(e){return this._rand(e)};ra.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ra.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?ra.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(ra.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(dp=q0(),typeof dp.randomBytes!="function")throw new Error("Not supported");ra.prototype._rand=function(e){return dp.randomBytes(e)}}catch{}var dp});var uf=ve((TK,Gy)=>{"use strict";var qa=Cn(),ff=Si(),Eh=ff.getNAF,gP=ff.getJSF,xh=ff.assert;function ia(r,e){this.type=r,this.p=new qa(e.p,16),this.red=e.prime?qa.red(e.prime):qa.mont(this.p),this.zero=new qa(0).toRed(this.red),this.one=new qa(1).toRed(this.red),this.two=new qa(2).toRed(this.red),this.n=e.n&&new qa(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Gy.exports=ia;ia.prototype.point=function(){throw new Error("Not implemented")};ia.prototype.validate=function(){throw new Error("Not implemented")};ia.prototype._fixedNafMul=function(e,t){xh(e.precomputed);var i=e._getDoubles(),n=Eh(t,1,this._bitLength),a=(1<<i.step+1)-(i.step%2===0?2:1);a/=3;var c=[],u,p;for(u=0;u<n.length;u+=i.step){p=0;for(var g=u+i.step-1;g>=u;g--)p=(p<<1)+n[g];c.push(p)}for(var m=this.jpoint(null,null,null),w=this.jpoint(null,null,null),R=a;R>0;R--){for(u=0;u<c.length;u++)p=c[u],p===R?w=w.mixedAdd(i.points[u]):p===-R&&(w=w.mixedAdd(i.points[u].neg()));m=m.add(w)}return m.toP()};ia.prototype._wnafMul=function(e,t){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var a=n.points,c=Eh(t,i,this._bitLength),u=this.jpoint(null,null,null),p=c.length-1;p>=0;p--){for(var g=0;p>=0&&c[p]===0;p--)g++;if(p>=0&&g++,u=u.dblp(g),p<0)break;var m=c[p];xh(m!==0),e.type==="affine"?m>0?u=u.mixedAdd(a[m-1>>1]):u=u.mixedAdd(a[-m-1>>1].neg()):m>0?u=u.add(a[m-1>>1]):u=u.add(a[-m-1>>1].neg())}return e.type==="affine"?u.toP():u};ia.prototype._wnafMulAdd=function(e,t,i,n,a){var c=this._wnafT1,u=this._wnafT2,p=this._wnafT3,g=0,m,w,R;for(m=0;m<n;m++){R=t[m];var I=R._getNAFPoints(e);c[m]=I.wnd,u[m]=I.points}for(m=n-1;m>=1;m-=2){var O=m-1,B=m;if(c[O]!==1||c[B]!==1){p[O]=Eh(i[O],c[O],this._bitLength),p[B]=Eh(i[B],c[B],this._bitLength),g=Math.max(p[O].length,g),g=Math.max(p[B].length,g);continue}var F=[t[O],null,null,t[B]];t[O].y.cmp(t[B].y)===0?(F[1]=t[O].add(t[B]),F[2]=t[O].toJ().mixedAdd(t[B].neg())):t[O].y.cmp(t[B].y.redNeg())===0?(F[1]=t[O].toJ().mixedAdd(t[B]),F[2]=t[O].add(t[B].neg())):(F[1]=t[O].toJ().mixedAdd(t[B]),F[2]=t[O].toJ().mixedAdd(t[B].neg()));var z=[-3,-1,-5,-7,0,7,5,1,3],Y=gP(i[O],i[B]);for(g=Math.max(Y[0].length,g),p[O]=new Array(g),p[B]=new Array(g),w=0;w<g;w++){var $=Y[0][w]|0,K=Y[1][w]|0;p[O][w]=z[($+1)*3+(K+1)],p[B][w]=0,u[O]=F}}var X=this.jpoint(null,null,null),te=this._wnafT4;for(m=g;m>=0;m--){for(var k=0;m>=0;){var U=!0;for(w=0;w<n;w++)te[w]=p[w][m]|0,te[w]!==0&&(U=!1);if(!U)break;k++,m--}if(m>=0&&k++,X=X.dblp(k),m<0)break;for(w=0;w<n;w++){var ae=te[w];ae!==0&&(ae>0?R=u[w][ae-1>>1]:ae<0&&(R=u[w][-ae-1>>1].neg()),R.type==="affine"?X=X.mixedAdd(R):X=X.add(R))}}for(m=0;m<n;m++)u[m]=null;return a?X:X.toP()};function Hi(r,e){this.curve=r,this.type=e,this.precomputed=null}ia.BasePoint=Hi;Hi.prototype.eq=function(){throw new Error("Not implemented")};Hi.prototype.validate=function(){return this.curve.validate(this)};ia.prototype.decodePoint=function(e,t){e=ff.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?xh(e[e.length-1]%2===0):e[0]===7&&xh(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};Hi.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Hi.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};Hi.prototype.encode=function(e,t){return ff.encode(this._encode(t),e)};Hi.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Hi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Hi.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,a=0;a<t;a+=e){for(var c=0;c<e;c++)n=n.dbl();i.push(n)}return{step:e,points:i}};Hi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),a=1;a<i;a++)t[a]=t[a-1].add(n);return{wnd:e,points:t}};Hi.prototype._getBeta=function(){return null};Hi.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}});var Jy=ve((LK,$y)=>{"use strict";var vP=Si(),sr=Cn(),vp=Ju(),qo=uf(),bP=vP.assert;function Ki(r){qo.call(this,"short",r),this.a=new sr(r.a,16).toRed(this.red),this.b=new sr(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}vp(Ki,qo);$y.exports=Ki;Ki.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new sr(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=n[0].cmp(n[1])<0?n[0]:n[1],t=t.toRed(this.red)}if(e.lambda)i=new sr(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))===0?i=a[0]:(i=a[1],bP(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var c;return e.basis?c=e.basis.map(function(u){return{a:new sr(u.a,16),b:new sr(u.b,16)}}):c=this._getEndoBasis(i),{beta:t,lambda:i,basis:c}}};Ki.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:sr.mont(e),i=new sr(2).toRed(t).redInvm(),n=i.redNeg(),a=new sr(3).toRed(t).redNeg().redSqrt().redMul(i),c=n.redAdd(a).fromRed(),u=n.redSub(a).fromRed();return[c,u]};Ki.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),a=new sr(1),c=new sr(0),u=new sr(0),p=new sr(1),g,m,w,R,I,O,B,F=0,z,Y;i.cmpn(0)!==0;){var $=n.div(i);z=n.sub($.mul(i)),Y=u.sub($.mul(a));var K=p.sub($.mul(c));if(!w&&z.cmp(t)<0)g=B.neg(),m=a,w=z.neg(),R=Y;else if(w&&++F===2)break;B=z,n=i,i=z,u=a,a=Y,p=c,c=K}I=z.neg(),O=Y;var X=w.sqr().add(R.sqr()),te=I.sqr().add(O.sqr());return te.cmp(X)>=0&&(I=g,O=m),w.negative&&(w=w.neg(),R=R.neg()),I.negative&&(I=I.neg(),O=O.neg()),[{a:w,b:R},{a:I,b:O}]};Ki.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],n=t[1],a=n.b.mul(e).divRound(this.n),c=i.b.neg().mul(e).divRound(this.n),u=a.mul(i.a),p=c.mul(n.a),g=a.mul(i.b),m=c.mul(n.b),w=e.sub(u).sub(p),R=g.add(m).neg();return{k1:w,k2:R}};Ki.prototype.pointFromX=function(e,t){e=new sr(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var a=n.fromRed().isOdd();return(t&&!a||!t&&a)&&(n=n.redNeg()),this.point(e,n)};Ki.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,n=this.a.redMul(t),a=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(a).cmpn(0)===0};Ki.prototype._endoWnafMulAdd=function(e,t,i){for(var n=this._endoWnafT1,a=this._endoWnafT2,c=0;c<e.length;c++){var u=this._endoSplit(t[c]),p=e[c],g=p._getBeta();u.k1.negative&&(u.k1.ineg(),p=p.neg(!0)),u.k2.negative&&(u.k2.ineg(),g=g.neg(!0)),n[c*2]=p,n[c*2+1]=g,a[c*2]=u.k1,a[c*2+1]=u.k2}for(var m=this._wnafMulAdd(1,n,a,c*2,i),w=0;w<c*2;w++)n[w]=null,a[w]=null;return m};function mr(r,e,t,i){qo.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new sr(e,16),this.y=new sr(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}vp(mr,qo.BasePoint);Ki.prototype.point=function(e,t,i){return new mr(this,e,t,i)};Ki.prototype.pointFromJSON=function(e,t){return mr.fromJSON(this,e,t)};mr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(a){return i.point(a.x.redMul(i.endo.beta),a.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}};mr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};mr.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var n=e.point(t[0],t[1],i);if(!t[2])return n;function a(u){return e.point(u[0],u[1],i)}var c=t[2];return n.precomputed={beta:null,doubles:c.doubles&&{step:c.doubles.step,points:[n].concat(c.doubles.points.map(a))},naf:c.naf&&{wnd:c.naf.wnd,points:[n].concat(c.naf.points.map(a))}},n};mr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};mr.prototype.isInfinity=function(){return this.inf};mr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};mr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),a=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(n),c=a.redSqr().redISub(this.x.redAdd(this.x)),u=a.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,u)};mr.prototype.getX=function(){return this.x.fromRed()};mr.prototype.getY=function(){return this.y.fromRed()};mr.prototype.mul=function(e){return e=new sr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};mr.prototype.mulAdd=function(e,t,i){var n=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,a):this.curve._wnafMulAdd(1,n,a,2)};mr.prototype.jmulAdd=function(e,t,i){var n=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,a,!0):this.curve._wnafMulAdd(1,n,a,2,!0)};mr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};mr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(a){return a.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return t};mr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ir(r,e,t,i){qo.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new sr(0)):(this.x=new sr(e,16),this.y=new sr(t,16),this.z=new sr(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}vp(Ir,qo.BasePoint);Ki.prototype.jpoint=function(e,t,i){return new Ir(this,e,t,i)};Ir.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(i,n)};Ir.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ir.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(t),a=e.x.redMul(i),c=this.y.redMul(t.redMul(e.z)),u=e.y.redMul(i.redMul(this.z)),p=n.redSub(a),g=c.redSub(u);if(p.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var m=p.redSqr(),w=m.redMul(p),R=n.redMul(m),I=g.redSqr().redIAdd(w).redISub(R).redISub(R),O=g.redMul(R.redISub(I)).redISub(c.redMul(w)),B=this.z.redMul(e.z).redMul(p);return this.curve.jpoint(I,O,B)};Ir.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,n=e.x.redMul(t),a=this.y,c=e.y.redMul(t).redMul(this.z),u=i.redSub(n),p=a.redSub(c);if(u.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=u.redSqr(),m=g.redMul(u),w=i.redMul(g),R=p.redSqr().redIAdd(m).redISub(w).redISub(w),I=p.redMul(w.redISub(R)).redISub(a.redMul(m)),O=this.z.redMul(u);return this.curve.jpoint(R,I,O)};Ir.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var n=this.curve.a,a=this.curve.tinv,c=this.x,u=this.y,p=this.z,g=p.redSqr().redSqr(),m=u.redAdd(u);for(t=0;t<e;t++){var w=c.redSqr(),R=m.redSqr(),I=R.redSqr(),O=w.redAdd(w).redIAdd(w).redIAdd(n.redMul(g)),B=c.redMul(R),F=O.redSqr().redISub(B.redAdd(B)),z=B.redISub(F),Y=O.redMul(z);Y=Y.redIAdd(Y).redISub(I);var $=m.redMul(p);t+1<e&&(g=g.redMul(I)),c=F,p=$,m=Y}return this.curve.jpoint(c,m.redMul(a),p)};Ir.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ir.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),c=a.redSqr(),u=this.x.redAdd(a).redSqr().redISub(n).redISub(c);u=u.redIAdd(u);var p=n.redAdd(n).redIAdd(n),g=p.redSqr().redISub(u).redISub(u),m=c.redIAdd(c);m=m.redIAdd(m),m=m.redIAdd(m),e=g,t=p.redMul(u.redISub(g)).redISub(m),i=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),R=this.y.redSqr(),I=R.redSqr(),O=this.x.redAdd(R).redSqr().redISub(w).redISub(I);O=O.redIAdd(O);var B=w.redAdd(w).redIAdd(w),F=B.redSqr(),z=I.redIAdd(I);z=z.redIAdd(z),z=z.redIAdd(z),e=F.redISub(O).redISub(O),t=B.redMul(O.redISub(e)).redISub(z),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)};Ir.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),a=this.y.redSqr(),c=a.redSqr(),u=this.x.redAdd(a).redSqr().redISub(n).redISub(c);u=u.redIAdd(u);var p=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),g=p.redSqr().redISub(u).redISub(u);e=g;var m=c.redIAdd(c);m=m.redIAdd(m),m=m.redIAdd(m),t=p.redMul(u.redISub(g)).redISub(m),i=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),R=this.y.redSqr(),I=this.x.redMul(R),O=this.x.redSub(w).redMul(this.x.redAdd(w));O=O.redAdd(O).redIAdd(O);var B=I.redIAdd(I);B=B.redIAdd(B);var F=B.redAdd(B);e=O.redSqr().redISub(F),i=this.y.redAdd(this.z).redSqr().redISub(R).redISub(w);var z=R.redSqr();z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z),t=O.redMul(B.redISub(e)).redISub(z)}return this.curve.jpoint(e,t,i)};Ir.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,n=this.z,a=n.redSqr().redSqr(),c=t.redSqr(),u=i.redSqr(),p=c.redAdd(c).redIAdd(c).redIAdd(e.redMul(a)),g=t.redAdd(t);g=g.redIAdd(g);var m=g.redMul(u),w=p.redSqr().redISub(m.redAdd(m)),R=m.redISub(w),I=u.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var O=p.redMul(R).redISub(I),B=i.redAdd(i).redMul(n);return this.curve.jpoint(w,O,B)};Ir.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),n=t.redSqr(),a=e.redAdd(e).redIAdd(e),c=a.redSqr(),u=this.x.redAdd(t).redSqr().redISub(e).redISub(n);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(c);var p=u.redSqr(),g=n.redIAdd(n);g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var m=a.redIAdd(u).redSqr().redISub(c).redISub(p).redISub(g),w=t.redMul(m);w=w.redIAdd(w),w=w.redIAdd(w);var R=this.x.redMul(p).redISub(w);R=R.redIAdd(R),R=R.redIAdd(R);var I=this.y.redMul(m.redMul(g.redISub(m)).redISub(u.redMul(p)));I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var O=this.z.redAdd(u).redSqr().redISub(i).redISub(p);return this.curve.jpoint(R,I,O)};Ir.prototype.mul=function(e,t){return e=new sr(e,t),this.curve._wnafMul(this,e)};Ir.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var n=t.redMul(this.z),a=i.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(n)).cmpn(0)===0};Ir.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),a=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(a),this.x.cmp(i)===0)return!0}};Ir.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var Qy=ve((qK,Yy)=>{"use strict";var Bo=Cn(),Wy=Ju(),Ah=uf(),mP=Si();function Fo(r){Ah.call(this,"mont",r),this.a=new Bo(r.a,16).toRed(this.red),this.b=new Bo(r.b,16).toRed(this.red),this.i4=new Bo(4).toRed(this.red).redInvm(),this.two=new Bo(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Wy(Fo,Ah);Yy.exports=Fo;Fo.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),n=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t),a=n.redSqrt();return a.redSqr().cmp(n)===0};function yr(r,e,t){Ah.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Bo(e,16),this.z=new Bo(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Wy(yr,Ah.BasePoint);Fo.prototype.decodePoint=function(e,t){return this.point(mP.toArray(e,t),1)};Fo.prototype.point=function(e,t){return new yr(this,e,t)};Fo.prototype.pointFromJSON=function(e){return yr.fromJSON(this,e)};yr.prototype.precompute=function(){};yr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};yr.fromJSON=function(e,t){return new yr(e,t[0],t[1]||e.one)};yr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};yr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};yr.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),a=t.redSub(n),c=t.redMul(n),u=a.redMul(n.redAdd(this.curve.a24.redMul(a)));return this.curve.point(c,u)};yr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};yr.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),a=e.x.redAdd(e.z),c=e.x.redSub(e.z),u=c.redMul(i),p=a.redMul(n),g=t.z.redMul(u.redAdd(p).redSqr()),m=t.x.redMul(u.redISub(p).redSqr());return this.curve.point(g,m)};yr.prototype.mul=function(e){for(var t=e.clone(),i=this,n=this.curve.point(null,null),a=this,c=[];t.cmpn(0)!==0;t.iushrn(1))c.push(t.andln(1));for(var u=c.length-1;u>=0;u--)c[u]===0?(i=i.diffAdd(n,a),n=n.dbl()):(n=i.diffAdd(n,a),i=i.dbl());return n};yr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};yr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};yr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};yr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};yr.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var e3=ve((BK,Zy)=>{"use strict";var yP=Si(),Is=Cn(),Xy=Ju(),Sh=uf(),wP=yP.assert;function On(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Sh.call(this,"edwards",r),this.a=new Is(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Is(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Is(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),wP(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}Xy(On,Sh);Zy.exports=On;On.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};On.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};On.prototype.jpoint=function(e,t,i,n){return this.point(e,t,i,n)};On.prototype.pointFromX=function(e,t){e=new Is(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),a=this.one.redSub(this.c2.redMul(this.d).redMul(i)),c=n.redMul(a.redInvm()),u=c.redSqrt();if(u.redSqr().redSub(c).cmp(this.zero)!==0)throw new Error("invalid point");var p=u.fromRed().isOdd();return(t&&!p||!t&&p)&&(u=u.redNeg()),this.point(e,u)};On.prototype.pointFromY=function(e,t){e=new Is(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),a=i.redMul(this.d).redMul(this.c2).redSub(this.a),c=n.redMul(a.redInvm());if(c.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var u=c.redSqrt();if(u.redSqr().redSub(c).cmp(this.zero)!==0)throw new Error("invalid point");return u.fromRed().isOdd()!==t&&(u=u.redNeg()),this.point(u,e)};On.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),n=t.redMul(this.a).redAdd(i),a=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return n.cmp(a)===0};function $t(r,e,t,i,n){Sh.BasePoint.call(this,r,"projective"),e===null&&t===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Is(e,16),this.y=new Is(t,16),this.z=i?new Is(i,16):this.curve.one,this.t=n&&new Is(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Xy($t,Sh.BasePoint);On.prototype.pointFromJSON=function(e){return $t.fromJSON(this,e)};On.prototype.point=function(e,t,i,n){return new $t(this,e,t,i,n)};$t.fromJSON=function(e,t){return new $t(e,t[0],t[1],t[2])};$t.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};$t.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};$t.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),c=n.redAdd(t),u=c.redSub(i),p=n.redSub(t),g=a.redMul(u),m=c.redMul(p),w=a.redMul(p),R=u.redMul(c);return this.curve.point(g,m,R,w)};$t.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),i=this.y.redSqr(),n,a,c,u,p,g;if(this.curve.twisted){u=this.curve._mulA(t);var m=u.redAdd(i);this.zOne?(n=e.redSub(t).redSub(i).redMul(m.redSub(this.curve.two)),a=m.redMul(u.redSub(i)),c=m.redSqr().redSub(m).redSub(m)):(p=this.z.redSqr(),g=m.redSub(p).redISub(p),n=e.redSub(t).redISub(i).redMul(g),a=m.redMul(u.redSub(i)),c=m.redMul(g))}else u=t.redAdd(i),p=this.curve._mulC(this.z).redSqr(),g=u.redSub(p).redSub(p),n=this.curve._mulC(e.redISub(u)).redMul(g),a=this.curve._mulC(u).redMul(t.redISub(i)),c=u.redMul(g);return this.curve.point(n,a,c)};$t.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};$t.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),c=i.redSub(t),u=a.redSub(n),p=a.redAdd(n),g=i.redAdd(t),m=c.redMul(u),w=p.redMul(g),R=c.redMul(g),I=u.redMul(p);return this.curve.point(m,w,I,R)};$t.prototype._projAdd=function(e){var t=this.z.redMul(e.z),i=t.redSqr(),n=this.x.redMul(e.x),a=this.y.redMul(e.y),c=this.curve.d.redMul(n).redMul(a),u=i.redSub(c),p=i.redAdd(c),g=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(a),m=t.redMul(u).redMul(g),w,R;return this.curve.twisted?(w=t.redMul(p).redMul(a.redSub(this.curve._mulA(n))),R=u.redMul(p)):(w=t.redMul(p).redMul(a.redSub(n)),R=this.curve._mulC(u).redMul(p)),this.curve.point(m,w,R)};$t.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};$t.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};$t.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)};$t.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)};$t.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};$t.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};$t.prototype.getX=function(){return this.normalize(),this.x.fromRed()};$t.prototype.getY=function(){return this.normalize(),this.y.fromRed()};$t.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};$t.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),this.x.cmp(t)===0)return!0}};$t.prototype.toP=$t.prototype.normalize;$t.prototype.mixedAdd=$t.prototype.add});var bp=ve(t3=>{"use strict";var Ih=t3;Ih.base=uf();Ih.short=Jy();Ih.mont=Qy();Ih.edwards=e3()});var sn=ve(Kt=>{"use strict";var _P=ta(),EP=Ju();Kt.inherits=EP;function xP(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function AP(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var i=0,n=0;n<r.length;n++){var a=r.charCodeAt(n);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):xP(r,n)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++n)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(n=0;n<r.length;n++)t[n]=r[n]|0;return t}Kt.toArray=AP;function SP(r){for(var e="",t=0;t<r.length;t++)e+=i3(r[t].toString(16));return e}Kt.toHex=SP;function r3(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Kt.htonl=r3;function IP(r,e){for(var t="",i=0;i<r.length;i++){var n=r[i];e==="little"&&(n=r3(n)),t+=n3(n.toString(16))}return t}Kt.toHex32=IP;function i3(r){return r.length===1?"0"+r:r}Kt.zero2=i3;function n3(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Kt.zero8=n3;function MP(r,e,t,i){var n=t-e;_P(n%4===0);for(var a=new Array(n/4),c=0,u=e;c<a.length;c++,u+=4){var p;i==="big"?p=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:p=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],a[c]=p>>>0}return a}Kt.join32=MP;function DP(r,e){for(var t=new Array(r.length*4),i=0,n=0;i<r.length;i++,n+=4){var a=r[i];e==="big"?(t[n]=a>>>24,t[n+1]=a>>>16&255,t[n+2]=a>>>8&255,t[n+3]=a&255):(t[n+3]=a>>>24,t[n+2]=a>>>16&255,t[n+1]=a>>>8&255,t[n]=a&255)}return t}Kt.split32=DP;function RP(r,e){return r>>>e|r<<32-e}Kt.rotr32=RP;function PP(r,e){return r<<e|r>>>32-e}Kt.rotl32=PP;function CP(r,e){return r+e>>>0}Kt.sum32=CP;function OP(r,e,t){return r+e+t>>>0}Kt.sum32_3=OP;function NP(r,e,t,i){return r+e+t+i>>>0}Kt.sum32_4=NP;function TP(r,e,t,i,n){return r+e+t+i+n>>>0}Kt.sum32_5=TP;function LP(r,e,t,i){var n=r[e],a=r[e+1],c=i+a>>>0,u=(c<i?1:0)+t+n;r[e]=u>>>0,r[e+1]=c}Kt.sum64=LP;function qP(r,e,t,i){var n=e+i>>>0,a=(n<e?1:0)+r+t;return a>>>0}Kt.sum64_hi=qP;function BP(r,e,t,i){var n=e+i;return n>>>0}Kt.sum64_lo=BP;function FP(r,e,t,i,n,a,c,u){var p=0,g=e;g=g+i>>>0,p+=g<e?1:0,g=g+a>>>0,p+=g<a?1:0,g=g+u>>>0,p+=g<u?1:0;var m=r+t+n+c+p;return m>>>0}Kt.sum64_4_hi=FP;function UP(r,e,t,i,n,a,c,u){var p=e+i+a+u;return p>>>0}Kt.sum64_4_lo=UP;function zP(r,e,t,i,n,a,c,u,p,g){var m=0,w=e;w=w+i>>>0,m+=w<e?1:0,w=w+a>>>0,m+=w<a?1:0,w=w+u>>>0,m+=w<u?1:0,w=w+g>>>0,m+=w<g?1:0;var R=r+t+n+c+p+m;return R>>>0}Kt.sum64_5_hi=zP;function kP(r,e,t,i,n,a,c,u,p,g){var m=e+i+a+u+g;return m>>>0}Kt.sum64_5_lo=kP;function jP(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Kt.rotr64_hi=jP;function HP(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Kt.rotr64_lo=HP;function KP(r,e,t){return r>>>t}Kt.shr64_hi=KP;function VP(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Kt.shr64_lo=VP});var Uo=ve(a3=>{"use strict";var s3=sn(),GP=ta();function Mh(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}a3.BlockHash=Mh;Mh.prototype.update=function(e,t){if(e=s3.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=s3.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this};Mh.prototype.digest=function(e){return this.update(this._pad()),GP(this.pending===null),this._digest(e)};Mh.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,n=new Array(i+this.padLength);n[0]=128;for(var a=1;a<i;a++)n[a]=0;if(e<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)n[a++]=0;n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=e>>>24&255,n[a++]=e>>>16&255,n[a++]=e>>>8&255,n[a++]=e&255}else for(n[a++]=e&255,n[a++]=e>>>8&255,n[a++]=e>>>16&255,n[a++]=e>>>24&255,n[a++]=0,n[a++]=0,n[a++]=0,n[a++]=0,c=8;c<this.padLength;c++)n[a++]=0;return n}});var mp=ve(Ms=>{"use strict";var $P=sn(),Nn=$P.rotr32;function JP(r,e,t,i){if(r===0)return o3(e,t,i);if(r===1||r===3)return f3(e,t,i);if(r===2)return c3(e,t,i)}Ms.ft_1=JP;function o3(r,e,t){return r&e^~r&t}Ms.ch32=o3;function c3(r,e,t){return r&e^r&t^e&t}Ms.maj32=c3;function f3(r,e,t){return r^e^t}Ms.p32=f3;function WP(r){return Nn(r,2)^Nn(r,13)^Nn(r,22)}Ms.s0_256=WP;function YP(r){return Nn(r,6)^Nn(r,11)^Nn(r,25)}Ms.s1_256=YP;function QP(r){return Nn(r,7)^Nn(r,18)^r>>>3}Ms.g0_256=QP;function XP(r){return Nn(r,17)^Nn(r,19)^r>>>10}Ms.g1_256=XP});var l3=ve((jK,h3)=>{"use strict";var zo=sn(),ZP=Uo(),eC=mp(),yp=zo.rotl32,hf=zo.sum32,tC=zo.sum32_5,rC=eC.ft_1,u3=ZP.BlockHash,iC=[1518500249,1859775393,2400959708,3395469782];function Tn(){if(!(this instanceof Tn))return new Tn;u3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}zo.inherits(Tn,u3);h3.exports=Tn;Tn.blockSize=512;Tn.outSize=160;Tn.hmacStrength=80;Tn.padLength=64;Tn.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=yp(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var a=this.h[0],c=this.h[1],u=this.h[2],p=this.h[3],g=this.h[4];for(n=0;n<i.length;n++){var m=~~(n/20),w=tC(yp(a,5),rC(m,c,u,p),g,i[n],iC[m]);g=p,p=u,u=yp(c,30),c=a,a=w}this.h[0]=hf(this.h[0],a),this.h[1]=hf(this.h[1],c),this.h[2]=hf(this.h[2],u),this.h[3]=hf(this.h[3],p),this.h[4]=hf(this.h[4],g)};Tn.prototype._digest=function(e){return e==="hex"?zo.toHex32(this.h,"big"):zo.split32(this.h,"big")}});var wp=ve((HK,p3)=>{"use strict";var ko=sn(),nC=Uo(),jo=mp(),sC=ta(),an=ko.sum32,aC=ko.sum32_4,oC=ko.sum32_5,cC=jo.ch32,fC=jo.maj32,uC=jo.s0_256,hC=jo.s1_256,lC=jo.g0_256,dC=jo.g1_256,d3=nC.BlockHash,pC=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ln(){if(!(this instanceof Ln))return new Ln;d3.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=pC,this.W=new Array(64)}ko.inherits(Ln,d3);p3.exports=Ln;Ln.blockSize=512;Ln.outSize=256;Ln.hmacStrength=192;Ln.padLength=64;Ln.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=aC(dC(i[n-2]),i[n-7],lC(i[n-15]),i[n-16]);var a=this.h[0],c=this.h[1],u=this.h[2],p=this.h[3],g=this.h[4],m=this.h[5],w=this.h[6],R=this.h[7];for(sC(this.k.length===i.length),n=0;n<i.length;n++){var I=oC(R,hC(g),cC(g,m,w),this.k[n],i[n]),O=an(uC(a),fC(a,c,u));R=w,w=m,m=g,g=an(p,I),p=u,u=c,c=a,a=an(I,O)}this.h[0]=an(this.h[0],a),this.h[1]=an(this.h[1],c),this.h[2]=an(this.h[2],u),this.h[3]=an(this.h[3],p),this.h[4]=an(this.h[4],g),this.h[5]=an(this.h[5],m),this.h[6]=an(this.h[6],w),this.h[7]=an(this.h[7],R)};Ln.prototype._digest=function(e){return e==="hex"?ko.toHex32(this.h,"big"):ko.split32(this.h,"big")}});var b3=ve((KK,v3)=>{"use strict";var _p=sn(),g3=wp();function Ds(){if(!(this instanceof Ds))return new Ds;g3.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}_p.inherits(Ds,g3);v3.exports=Ds;Ds.blockSize=512;Ds.outSize=224;Ds.hmacStrength=192;Ds.padLength=64;Ds.prototype._digest=function(e){return e==="hex"?_p.toHex32(this.h.slice(0,7),"big"):_p.split32(this.h.slice(0,7),"big")}});var Ap=ve((VK,_3)=>{"use strict";var hi=sn(),gC=Uo(),vC=ta(),qn=hi.rotr64_hi,Bn=hi.rotr64_lo,m3=hi.shr64_hi,y3=hi.shr64_lo,na=hi.sum64,Ep=hi.sum64_hi,xp=hi.sum64_lo,bC=hi.sum64_4_hi,mC=hi.sum64_4_lo,yC=hi.sum64_5_hi,wC=hi.sum64_5_lo,w3=gC.BlockHash,_C=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function on(){if(!(this instanceof on))return new on;w3.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_C,this.W=new Array(160)}hi.inherits(on,w3);_3.exports=on;on.blockSize=1024;on.outSize=512;on.hmacStrength=192;on.padLength=128;on.prototype._prepareBlock=function(e,t){for(var i=this.W,n=0;n<32;n++)i[n]=e[t+n];for(;n<i.length;n+=2){var a=OC(i[n-4],i[n-3]),c=NC(i[n-4],i[n-3]),u=i[n-14],p=i[n-13],g=PC(i[n-30],i[n-29]),m=CC(i[n-30],i[n-29]),w=i[n-32],R=i[n-31];i[n]=bC(a,c,u,p,g,m,w,R),i[n+1]=mC(a,c,u,p,g,m,w,R)}};on.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,n=this.h[0],a=this.h[1],c=this.h[2],u=this.h[3],p=this.h[4],g=this.h[5],m=this.h[6],w=this.h[7],R=this.h[8],I=this.h[9],O=this.h[10],B=this.h[11],F=this.h[12],z=this.h[13],Y=this.h[14],$=this.h[15];vC(this.k.length===i.length);for(var K=0;K<i.length;K+=2){var X=Y,te=$,k=DC(R,I),U=RC(R,I),ae=EC(R,I,O,B,F,z),P=xC(R,I,O,B,F,z),d=this.k[K],_=this.k[K+1],f=i[K],l=i[K+1],b=yC(X,te,k,U,ae,P,d,_,f,l),S=wC(X,te,k,U,ae,P,d,_,f,l);X=IC(n,a),te=MC(n,a),k=AC(n,a,c,u,p,g),U=SC(n,a,c,u,p,g);var M=Ep(X,te,k,U),A=xp(X,te,k,U);Y=F,$=z,F=O,z=B,O=R,B=I,R=Ep(m,w,b,S),I=xp(w,w,b,S),m=p,w=g,p=c,g=u,c=n,u=a,n=Ep(b,S,M,A),a=xp(b,S,M,A)}na(this.h,0,n,a),na(this.h,2,c,u),na(this.h,4,p,g),na(this.h,6,m,w),na(this.h,8,R,I),na(this.h,10,O,B),na(this.h,12,F,z),na(this.h,14,Y,$)};on.prototype._digest=function(e){return e==="hex"?hi.toHex32(this.h,"big"):hi.split32(this.h,"big")};function EC(r,e,t,i,n){var a=r&t^~r&n;return a<0&&(a+=4294967296),a}function xC(r,e,t,i,n,a){var c=e&i^~e&a;return c<0&&(c+=4294967296),c}function AC(r,e,t,i,n){var a=r&t^r&n^t&n;return a<0&&(a+=4294967296),a}function SC(r,e,t,i,n,a){var c=e&i^e&a^i&a;return c<0&&(c+=4294967296),c}function IC(r,e){var t=qn(r,e,28),i=qn(e,r,2),n=qn(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function MC(r,e){var t=Bn(r,e,28),i=Bn(e,r,2),n=Bn(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function DC(r,e){var t=qn(r,e,14),i=qn(r,e,18),n=qn(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function RC(r,e){var t=Bn(r,e,14),i=Bn(r,e,18),n=Bn(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function PC(r,e){var t=qn(r,e,1),i=qn(r,e,8),n=m3(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function CC(r,e){var t=Bn(r,e,1),i=Bn(r,e,8),n=y3(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function OC(r,e){var t=qn(r,e,19),i=qn(e,r,29),n=m3(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}function NC(r,e){var t=Bn(r,e,19),i=Bn(e,r,29),n=y3(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}});var A3=ve((GK,x3)=>{"use strict";var Sp=sn(),E3=Ap();function Rs(){if(!(this instanceof Rs))return new Rs;E3.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Sp.inherits(Rs,E3);x3.exports=Rs;Rs.blockSize=1024;Rs.outSize=384;Rs.hmacStrength=192;Rs.padLength=128;Rs.prototype._digest=function(e){return e==="hex"?Sp.toHex32(this.h.slice(0,12),"big"):Sp.split32(this.h.slice(0,12),"big")}});var S3=ve(Ho=>{"use strict";Ho.sha1=l3();Ho.sha224=b3();Ho.sha256=wp();Ho.sha384=A3();Ho.sha512=Ap()});var C3=ve(P3=>{"use strict";var Ba=sn(),TC=Uo(),Dh=Ba.rotl32,I3=Ba.sum32,lf=Ba.sum32_3,M3=Ba.sum32_4,R3=TC.BlockHash;function Fn(){if(!(this instanceof Fn))return new Fn;R3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ba.inherits(Fn,R3);P3.ripemd160=Fn;Fn.blockSize=512;Fn.outSize=160;Fn.hmacStrength=192;Fn.padLength=64;Fn.prototype._update=function(e,t){for(var i=this.h[0],n=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4],p=i,g=n,m=a,w=c,R=u,I=0;I<80;I++){var O=I3(Dh(M3(i,D3(I,n,a,c),e[BC[I]+t],LC(I)),UC[I]),u);i=u,u=c,c=Dh(a,10),a=n,n=O,O=I3(Dh(M3(p,D3(79-I,g,m,w),e[FC[I]+t],qC(I)),zC[I]),R),p=R,R=w,w=Dh(m,10),m=g,g=O}O=lf(this.h[1],a,w),this.h[1]=lf(this.h[2],c,R),this.h[2]=lf(this.h[3],u,p),this.h[3]=lf(this.h[4],i,g),this.h[4]=lf(this.h[0],n,m),this.h[0]=O};Fn.prototype._digest=function(e){return e==="hex"?Ba.toHex32(this.h,"little"):Ba.split32(this.h,"little")};function D3(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function LC(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function qC(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var BC=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],FC=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],UC=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],zC=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var N3=ve((WK,O3)=>{"use strict";var kC=sn(),jC=ta();function Ko(r,e,t){if(!(this instanceof Ko))return new Ko(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(kC.toArray(e,t))}O3.exports=Ko;Ko.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),jC(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Ko.prototype.update=function(e,t){return this.inner.update(e,t),this};Ko.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var Rh=ve(T3=>{"use strict";var Mr=T3;Mr.utils=sn();Mr.common=Uo();Mr.sha=S3();Mr.ripemd=C3();Mr.hmac=N3();Mr.sha1=Mr.sha.sha1;Mr.sha256=Mr.sha.sha256;Mr.sha224=Mr.sha.sha224;Mr.sha384=Mr.sha.sha384;Mr.sha512=Mr.sha.sha512;Mr.ripemd160=Mr.ripemd.ripemd160});var q3=ve((QK,L3)=>{"use strict";L3.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var Ph=ve(U3=>{"use strict";var Mp=U3,sa=Rh(),Ip=bp(),HC=Si(),B3=HC.assert;function F3(r){r.type==="short"?this.curve=new Ip.short(r):r.type==="edwards"?this.curve=new Ip.edwards(r):this.curve=new Ip.mont(r),this.g=this.curve.g,this.n=this.curve.n,this.hash=r.hash,B3(this.g.validate(),"Invalid curve"),B3(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Mp.PresetCurve=F3;function aa(r,e){Object.defineProperty(Mp,r,{configurable:!0,enumerable:!0,get:function(){var t=new F3(e);return Object.defineProperty(Mp,r,{configurable:!0,enumerable:!0,value:t}),t}})}aa("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:sa.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});aa("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:sa.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});aa("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:sa.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});aa("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:sa.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});aa("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:sa.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});aa("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:sa.sha256,gRed:!1,g:["9"]});aa("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:sa.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Dp;try{Dp=q3()}catch{Dp=void 0}aa("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:sa.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Dp]})});var j3=ve((ZK,k3)=>{"use strict";var KC=Rh(),Fa=hp(),z3=ta();function oa(r){if(!(this instanceof oa))return new oa(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Fa.toArray(r.entropy,r.entropyEnc||"hex"),t=Fa.toArray(r.nonce,r.nonceEnc||"hex"),i=Fa.toArray(r.pers,r.persEnc||"hex");z3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}k3.exports=oa;oa.prototype._init=function(e,t,i){var n=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};oa.prototype._hmac=function(){return new KC.hmac(this.hash,this.K)};oa.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};oa.prototype.reseed=function(e,t,i,n){typeof t!="string"&&(n=i,i=t,t=null),e=Fa.toArray(e,t),i=Fa.toArray(i,n),z3(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};oa.prototype.generate=function(e,t,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(n=i,i=t,t=null),i&&(i=Fa.toArray(i,n||"hex"),this._update(i));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var c=a.slice(0,e);return this._update(i),this._reseed++,Fa.encode(c,t)}});var K3=ve((eV,H3)=>{"use strict";var VC=Cn(),GC=Si(),Rp=GC.assert;function Fr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}H3.exports=Fr;Fr.fromPublic=function(e,t,i){return t instanceof Fr?t:new Fr(e,{pub:t,pubEnc:i})};Fr.fromPrivate=function(e,t,i){return t instanceof Fr?t:new Fr(e,{priv:t,privEnc:i})};Fr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Fr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Fr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Fr.prototype._importPrivate=function(e,t){this.priv=new VC(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Fr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Rp(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Rp(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Fr.prototype.derive=function(e){return e.validate()||Rp(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Fr.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)};Fr.prototype.verify=function(e,t,i){return this.ec.verify(e,t,this,void 0,i)};Fr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var $3=ve((tV,G3)=>{"use strict";var Ch=Cn(),Op=Si(),$C=Op.assert;function Oh(r,e){if(r instanceof Oh)return r;this._importDER(r,e)||($C(r.r&&r.s,"Signature without r or s"),this.r=new Ch(r.r,16),this.s=new Ch(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}G3.exports=Oh;function JC(){this.place=0}function Pp(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4||r[e.place]===0)return!1;for(var n=0,a=0,c=e.place;a<i;a++,c++)n<<=8,n|=r[c],n>>>=0;return n<=127?!1:(e.place=c,n)}function V3(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Oh.prototype._importDER=function(e,t){e=Op.toArray(e,t);var i=new JC;if(e[i.place++]!==48)return!1;var n=Pp(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var a=Pp(e,i);if(a===!1||e[i.place]&128)return!1;var c=e.slice(i.place,a+i.place);if(i.place+=a,e[i.place++]!==2)return!1;var u=Pp(e,i);if(u===!1||e.length!==u+i.place||e[i.place]&128)return!1;var p=e.slice(i.place,u+i.place);if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;if(p[0]===0)if(p[1]&128)p=p.slice(1);else return!1;return this.r=new Ch(c),this.s=new Ch(p),this.recoveryParam=null,!0};function Cp(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Oh.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=V3(t),i=V3(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];Cp(n,t.length),n=n.concat(t),n.push(2),Cp(n,i.length);var a=n.concat(i),c=[48];return Cp(c,a.length),c=c.concat(a),Op.encode(c,e)}});var Y3=ve((rV,W3)=>{"use strict";var cn=Cn(),J3=j3(),WC=Si(),Np=Ph(),YC=gp(),Ua=WC.assert,Tp=K3(),Nh=$3();function Vi(r){if(!(this instanceof Vi))return new Vi(r);typeof r=="string"&&(Ua(Object.prototype.hasOwnProperty.call(Np,r),"Unknown curve "+r),r=Np[r]),r instanceof Np.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}W3.exports=Vi;Vi.prototype.keyPair=function(e){return new Tp(this,e)};Vi.prototype.keyFromPrivate=function(e,t){return Tp.fromPrivate(this,e,t)};Vi.prototype.keyFromPublic=function(e,t){return Tp.fromPublic(this,e,t)};Vi.prototype.genKeyPair=function(e){e||(e={});for(var t=new J3({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||YC(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new cn(2));;){var a=new cn(t.generate(i));if(!(a.cmp(n)>0))return a.iaddn(1),this.keyFromPrivate(a)}};Vi.prototype._truncateToN=function(e,t,i){var n;if(cn.isBN(e)||typeof e=="number")e=new cn(e,16),n=e.byteLength();else if(typeof e=="object")n=e.length,e=new cn(e,16);else{var a=e.toString();n=a.length+1>>>1,e=new cn(a,16)}typeof i!="number"&&(i=n*8);var c=i-this.n.bitLength();return c>0&&(e=e.ushrn(c)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Vi.prototype.sign=function(e,t,i,n){if(typeof i=="object"&&(n=i,i=null),n||(n={}),typeof e!="string"&&typeof e!="number"&&!cn.isBN(e)){Ua(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Ua(e.length>>>0===e.length);for(var a=0;a<e.length;a++)Ua((e[a]&255)===e[a])}t=this.keyFromPrivate(t,i),e=this._truncateToN(e,!1,n.msgBitLength),Ua(!e.isNeg(),"Can not sign a negative message");var c=this.n.byteLength(),u=t.getPrivate().toArray("be",c),p=e.toArray("be",c);Ua(new cn(p).eq(e),"Can not sign message");for(var g=new J3({hash:this.hash,entropy:u,nonce:p,pers:n.pers,persEnc:n.persEnc||"utf8"}),m=this.n.sub(new cn(1)),w=0;;w++){var R=n.k?n.k(w):new cn(g.generate(this.n.byteLength()));if(R=this._truncateToN(R,!0),!(R.cmpn(1)<=0||R.cmp(m)>=0)){var I=this.g.mul(R);if(!I.isInfinity()){var O=I.getX(),B=O.umod(this.n);if(B.cmpn(0)!==0){var F=R.invm(this.n).mul(B.mul(t.getPrivate()).iadd(e));if(F=F.umod(this.n),F.cmpn(0)!==0){var z=(I.getY().isOdd()?1:0)|(O.cmp(B)!==0?2:0);return n.canonical&&F.cmp(this.nh)>0&&(F=this.n.sub(F),z^=1),new Nh({r:B,s:F,recoveryParam:z})}}}}}};Vi.prototype.verify=function(e,t,i,n,a){a||(a={}),e=this._truncateToN(e,!1,a.msgBitLength),i=this.keyFromPublic(i,n),t=new Nh(t,"hex");var c=t.r,u=t.s;if(c.cmpn(1)<0||c.cmp(this.n)>=0||u.cmpn(1)<0||u.cmp(this.n)>=0)return!1;var p=u.invm(this.n),g=p.mul(e).umod(this.n),m=p.mul(c).umod(this.n),w;return this.curve._maxwellTrick?(w=this.g.jmulAdd(g,i.getPublic(),m),w.isInfinity()?!1:w.eqXToP(c)):(w=this.g.mulAdd(g,i.getPublic(),m),w.isInfinity()?!1:w.getX().umod(this.n).cmp(c)===0)};Vi.prototype.recoverPubKey=function(r,e,t,i){Ua((3&t)===t,"The recovery param is more than two bits"),e=new Nh(e,i);var n=this.n,a=new cn(r),c=e.r,u=e.s,p=t&1,g=t>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?c=this.curve.pointFromX(c.add(this.curve.n),p):c=this.curve.pointFromX(c,p);var m=e.r.invm(n),w=n.sub(a).mul(m).umod(n),R=u.mul(m).umod(n);return this.g.mulAdd(w,c,R)};Vi.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Nh(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var a;try{a=this.recoverPubKey(r,e,n)}catch{continue}if(a.eq(t))return n}throw new Error("Unable to find valid recovery factor")}});var e6=ve((iV,Z3)=>{"use strict";var df=Si(),X3=df.assert,Q3=df.parseBytes,Vo=df.cachedProperty;function wr(r,e){this.eddsa=r,this._secret=Q3(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Q3(e.pub)}wr.fromPublic=function(e,t){return t instanceof wr?t:new wr(e,{pub:t})};wr.fromSecret=function(e,t){return t instanceof wr?t:new wr(e,{secret:t})};wr.prototype.secret=function(){return this._secret};Vo(wr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Vo(wr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Vo(wr,"privBytes",function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n});Vo(wr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Vo(wr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Vo(wr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});wr.prototype.sign=function(e){return X3(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};wr.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};wr.prototype.getSecret=function(e){return X3(this._secret,"KeyPair is public only"),df.encode(this.secret(),e)};wr.prototype.getPublic=function(e){return df.encode(this.pubBytes(),e)};Z3.exports=wr});var i6=ve((nV,r6)=>{"use strict";var QC=Cn(),Th=Si(),t6=Th.assert,Lh=Th.cachedProperty,XC=Th.parseBytes;function za(r,e){this.eddsa=r,typeof e!="object"&&(e=XC(e)),Array.isArray(e)&&(t6(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),t6(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof QC&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Lh(za,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Lh(za,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Lh(za,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Lh(za,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});za.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};za.prototype.toHex=function(){return Th.encode(this.toBytes(),"hex").toUpperCase()};r6.exports=za});var c6=ve((sV,o6)=>{"use strict";var ZC=Rh(),eO=Ph(),Go=Si(),tO=Go.assert,s6=Go.parseBytes,a6=e6(),n6=i6();function li(r){if(tO(r==="ed25519","only tested with ed25519 so far"),!(this instanceof li))return new li(r);r=eO[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=ZC.sha512}o6.exports=li;li.prototype.sign=function(e,t){e=s6(e);var i=this.keyFromSecret(t),n=this.hashInt(i.messagePrefix(),e),a=this.g.mul(n),c=this.encodePoint(a),u=this.hashInt(c,i.pubBytes(),e).mul(i.priv()),p=n.add(u).umod(this.curve.n);return this.makeSignature({R:a,S:p,Rencoded:c})};li.prototype.verify=function(e,t,i){if(e=s6(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var n=this.keyFromPublic(i),a=this.hashInt(t.Rencoded(),n.pubBytes(),e),c=this.g.mul(t.S()),u=t.R().add(n.pub().mul(a));return u.eq(c)};li.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Go.intFromLE(e.digest()).umod(this.curve.n)};li.prototype.keyFromPublic=function(e){return a6.fromPublic(this,e)};li.prototype.keyFromSecret=function(e){return a6.fromSecret(this,e)};li.prototype.makeSignature=function(e){return e instanceof n6?e:new n6(this,e)};li.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};li.prototype.decodePoint=function(e){e=Go.parseBytes(e);var t=e.length-1,i=e.slice(0,t).concat(e[t]&-129),n=(e[t]&128)!==0,a=Go.intFromLE(i);return this.curve.pointFromY(a,n)};li.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};li.prototype.decodeInt=function(e){return Go.intFromLE(e)};li.prototype.isPoint=function(e){return e instanceof this.pointClass}});var u6=ve(f6=>{"use strict";var ka=f6;ka.version=Fy().version;ka.utils=Si();ka.rand=gp();ka.curve=bp();ka.curves=Ph();ka.ec=Y3();ka.eddsa=c6()});var d6=ve(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var Jo=Ro(),$o=ji();Ps.DIGEST_LENGTH=64;Ps.BLOCK_SIZE=128;var l6=function(){function r(){this.digestLength=Ps.DIGEST_LENGTH,this.blockSize=Ps.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){$o.wipe(this._buffer),$o.wipe(this._tempHi),$o.wipe(this._tempLo),this.reset()},r.prototype.update=function(e,t){if(t===void 0&&(t=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var i=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<Ps.BLOCK_SIZE&&t>0;)this._buffer[this._bufferLength++]=e[i++],t--;this._bufferLength===this.blockSize&&(Lp(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(i=Lp(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,i,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[i++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,i=this._bufferLength,n=t/536870912|0,a=t<<3,c=t%128<112?128:256;this._buffer[i]=128;for(var u=i+1;u<c-8;u++)this._buffer[u]=0;Jo.writeUint32BE(n,this._buffer,c-8),Jo.writeUint32BE(a,this._buffer,c-4),Lp(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,c),this._finished=!0}for(var u=0;u<this.digestLength/8;u++)Jo.writeUint32BE(this._stateHi[u],e,u*8),Jo.writeUint32BE(this._stateLo[u],e,u*8+4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){$o.wipe(e.stateHi),$o.wipe(e.stateLo),e.buffer&&$o.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();Ps.SHA512=l6;var h6=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function Lp(r,e,t,i,n,a,c){for(var u=t[0],p=t[1],g=t[2],m=t[3],w=t[4],R=t[5],I=t[6],O=t[7],B=i[0],F=i[1],z=i[2],Y=i[3],$=i[4],K=i[5],X=i[6],te=i[7],k,U,ae,P,d,_,f,l;c>=128;){for(var b=0;b<16;b++){var S=8*b+a;r[b]=Jo.readUint32BE(n,S),e[b]=Jo.readUint32BE(n,S+4)}for(var b=0;b<80;b++){var M=u,A=p,v=g,x=m,y=w,N=R,Z=I,ee=O,D=B,V=F,G=z,J=Y,ie=$,fe=K,se=X,ce=te;if(k=O,U=te,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=(w>>>14|$<<18)^(w>>>18|$<<14)^($>>>9|w<<23),U=($>>>14|w<<18)^($>>>18|w<<14)^(w>>>9|$<<23),d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,k=w&R^~w&I,U=$&K^~$&X,d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,k=h6[b*2],U=h6[b*2+1],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,k=r[b%16],U=e[b%16],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,ae=f&65535|l<<16,P=d&65535|_<<16,k=ae,U=P,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=(u>>>28|B<<4)^(B>>>2|u<<30)^(B>>>7|u<<25),U=(B>>>28|u<<4)^(u>>>2|B<<30)^(u>>>7|B<<25),d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,k=u&p^u&g^p&g,U=B&F^B&z^F&z,d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,ee=f&65535|l<<16,ce=d&65535|_<<16,k=x,U=J,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=ae,U=P,d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,x=f&65535|l<<16,J=d&65535|_<<16,p=M,g=A,m=v,w=x,R=y,I=N,O=Z,u=ee,F=D,z=V,Y=G,$=J,K=ie,X=fe,te=se,B=ce,b%16===15)for(var S=0;S<16;S++)k=r[S],U=e[S],d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=r[(S+9)%16],U=e[(S+9)%16],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,ae=r[(S+1)%16],P=e[(S+1)%16],k=(ae>>>1|P<<31)^(ae>>>8|P<<24)^ae>>>7,U=(P>>>1|ae<<31)^(P>>>8|ae<<24)^(P>>>7|ae<<25),d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,ae=r[(S+14)%16],P=e[(S+14)%16],k=(ae>>>19|P<<13)^(P>>>29|ae<<3)^ae>>>6,U=(P>>>19|ae<<13)^(ae>>>29|P<<3)^(P>>>6|ae<<26),d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,r[S]=f&65535|l<<16,e[S]=d&65535|_<<16}k=u,U=B,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[0],U=i[0],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[0]=u=f&65535|l<<16,i[0]=B=d&65535|_<<16,k=p,U=F,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[1],U=i[1],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[1]=p=f&65535|l<<16,i[1]=F=d&65535|_<<16,k=g,U=z,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[2],U=i[2],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[2]=g=f&65535|l<<16,i[2]=z=d&65535|_<<16,k=m,U=Y,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[3],U=i[3],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[3]=m=f&65535|l<<16,i[3]=Y=d&65535|_<<16,k=w,U=$,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[4],U=i[4],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[4]=w=f&65535|l<<16,i[4]=$=d&65535|_<<16,k=R,U=K,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[5],U=i[5],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[5]=R=f&65535|l<<16,i[5]=K=d&65535|_<<16,k=I,U=X,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[6],U=i[6],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[6]=I=f&65535|l<<16,i[6]=X=d&65535|_<<16,k=O,U=te,d=U&65535,_=U>>>16,f=k&65535,l=k>>>16,k=t[7],U=i[7],d+=U&65535,_+=U>>>16,f+=k&65535,l+=k>>>16,_+=d>>>16,f+=_>>>16,l+=f>>>16,t[7]=O=f&65535|l<<16,i[7]=te=d&65535|_<<16,a+=128,c-=128}return a}function rO(r){var e=new l6;e.update(r);var t=e.digest();return e.clean(),t}Ps.hash=rO});var M6=ve(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.convertSecretKeyToX25519=Ft.convertPublicKeyToX25519=Ft.verify=Ft.sign=Ft.extractPublicKeyFromSecretKey=Ft.generateKeyPair=Ft.generateKeyPairFromSeed=Ft.SEED_LENGTH=Ft.SECRET_KEY_LENGTH=Ft.PUBLIC_KEY_LENGTH=Ft.SIGNATURE_LENGTH=void 0;var iO=ef(),pf=d6(),m6=ji();Ft.SIGNATURE_LENGTH=64;Ft.PUBLIC_KEY_LENGTH=32;Ft.SECRET_KEY_LENGTH=64;Ft.SEED_LENGTH=32;function Ee(r){let e=new Float64Array(16);if(r)for(let t=0;t<r.length;t++)e[t]=r[t];return e}var nO=new Uint8Array(32);nO[0]=9;var Fp=Ee(),Wo=Ee([1]),sO=Ee([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),aO=Ee([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p6=Ee([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g6=Ee([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),oO=Ee([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ca(r,e){for(let t=0;t<16;t++)r[t]=e[t]|0}function qp(r){let e=1;for(let t=0;t<16;t++){let i=r[t]+e+65535;e=Math.floor(i/65536),r[t]=i-e*65536}r[0]+=e-1+37*(e-1)}function y6(r,e,t){let i=~(t-1);for(let n=0;n<16;n++){let a=i&(r[n]^e[n]);r[n]^=a,e[n]^=a}}function gf(r,e){let t=Ee(),i=Ee();for(let n=0;n<16;n++)i[n]=e[n];qp(i),qp(i),qp(i);for(let n=0;n<2;n++){t[0]=i[0]-65517;for(let c=1;c<15;c++)t[c]=i[c]-65535-(t[c-1]>>16&1),t[c-1]&=65535;t[15]=i[15]-32767-(t[14]>>16&1);let a=t[15]>>16&1;t[14]&=65535,y6(i,t,1-a)}for(let n=0;n<16;n++)r[2*n]=i[n]&255,r[2*n+1]=i[n]>>8}function w6(r,e){let t=0;for(let i=0;i<32;i++)t|=r[i]^e[i];return(1&t-1>>>8)-1}function v6(r,e){let t=new Uint8Array(32),i=new Uint8Array(32);return gf(t,r),gf(i,e),w6(t,i)}function _6(r){let e=new Uint8Array(32);return gf(e,r),e[0]&1}function cO(r,e){for(let t=0;t<16;t++)r[t]=e[2*t]+(e[2*t+1]<<8);r[15]&=32767}function ja(r,e,t){for(let i=0;i<16;i++)r[i]=e[i]+t[i]}function Ka(r,e,t){for(let i=0;i<16;i++)r[i]=e[i]-t[i]}function kt(r,e,t){let i,n,a=0,c=0,u=0,p=0,g=0,m=0,w=0,R=0,I=0,O=0,B=0,F=0,z=0,Y=0,$=0,K=0,X=0,te=0,k=0,U=0,ae=0,P=0,d=0,_=0,f=0,l=0,b=0,S=0,M=0,A=0,v=0,x=t[0],y=t[1],N=t[2],Z=t[3],ee=t[4],D=t[5],V=t[6],G=t[7],J=t[8],ie=t[9],fe=t[10],se=t[11],ce=t[12],pe=t[13],ne=t[14],de=t[15];i=e[0],a+=i*x,c+=i*y,u+=i*N,p+=i*Z,g+=i*ee,m+=i*D,w+=i*V,R+=i*G,I+=i*J,O+=i*ie,B+=i*fe,F+=i*se,z+=i*ce,Y+=i*pe,$+=i*ne,K+=i*de,i=e[1],c+=i*x,u+=i*y,p+=i*N,g+=i*Z,m+=i*ee,w+=i*D,R+=i*V,I+=i*G,O+=i*J,B+=i*ie,F+=i*fe,z+=i*se,Y+=i*ce,$+=i*pe,K+=i*ne,X+=i*de,i=e[2],u+=i*x,p+=i*y,g+=i*N,m+=i*Z,w+=i*ee,R+=i*D,I+=i*V,O+=i*G,B+=i*J,F+=i*ie,z+=i*fe,Y+=i*se,$+=i*ce,K+=i*pe,X+=i*ne,te+=i*de,i=e[3],p+=i*x,g+=i*y,m+=i*N,w+=i*Z,R+=i*ee,I+=i*D,O+=i*V,B+=i*G,F+=i*J,z+=i*ie,Y+=i*fe,$+=i*se,K+=i*ce,X+=i*pe,te+=i*ne,k+=i*de,i=e[4],g+=i*x,m+=i*y,w+=i*N,R+=i*Z,I+=i*ee,O+=i*D,B+=i*V,F+=i*G,z+=i*J,Y+=i*ie,$+=i*fe,K+=i*se,X+=i*ce,te+=i*pe,k+=i*ne,U+=i*de,i=e[5],m+=i*x,w+=i*y,R+=i*N,I+=i*Z,O+=i*ee,B+=i*D,F+=i*V,z+=i*G,Y+=i*J,$+=i*ie,K+=i*fe,X+=i*se,te+=i*ce,k+=i*pe,U+=i*ne,ae+=i*de,i=e[6],w+=i*x,R+=i*y,I+=i*N,O+=i*Z,B+=i*ee,F+=i*D,z+=i*V,Y+=i*G,$+=i*J,K+=i*ie,X+=i*fe,te+=i*se,k+=i*ce,U+=i*pe,ae+=i*ne,P+=i*de,i=e[7],R+=i*x,I+=i*y,O+=i*N,B+=i*Z,F+=i*ee,z+=i*D,Y+=i*V,$+=i*G,K+=i*J,X+=i*ie,te+=i*fe,k+=i*se,U+=i*ce,ae+=i*pe,P+=i*ne,d+=i*de,i=e[8],I+=i*x,O+=i*y,B+=i*N,F+=i*Z,z+=i*ee,Y+=i*D,$+=i*V,K+=i*G,X+=i*J,te+=i*ie,k+=i*fe,U+=i*se,ae+=i*ce,P+=i*pe,d+=i*ne,_+=i*de,i=e[9],O+=i*x,B+=i*y,F+=i*N,z+=i*Z,Y+=i*ee,$+=i*D,K+=i*V,X+=i*G,te+=i*J,k+=i*ie,U+=i*fe,ae+=i*se,P+=i*ce,d+=i*pe,_+=i*ne,f+=i*de,i=e[10],B+=i*x,F+=i*y,z+=i*N,Y+=i*Z,$+=i*ee,K+=i*D,X+=i*V,te+=i*G,k+=i*J,U+=i*ie,ae+=i*fe,P+=i*se,d+=i*ce,_+=i*pe,f+=i*ne,l+=i*de,i=e[11],F+=i*x,z+=i*y,Y+=i*N,$+=i*Z,K+=i*ee,X+=i*D,te+=i*V,k+=i*G,U+=i*J,ae+=i*ie,P+=i*fe,d+=i*se,_+=i*ce,f+=i*pe,l+=i*ne,b+=i*de,i=e[12],z+=i*x,Y+=i*y,$+=i*N,K+=i*Z,X+=i*ee,te+=i*D,k+=i*V,U+=i*G,ae+=i*J,P+=i*ie,d+=i*fe,_+=i*se,f+=i*ce,l+=i*pe,b+=i*ne,S+=i*de,i=e[13],Y+=i*x,$+=i*y,K+=i*N,X+=i*Z,te+=i*ee,k+=i*D,U+=i*V,ae+=i*G,P+=i*J,d+=i*ie,_+=i*fe,f+=i*se,l+=i*ce,b+=i*pe,S+=i*ne,M+=i*de,i=e[14],$+=i*x,K+=i*y,X+=i*N,te+=i*Z,k+=i*ee,U+=i*D,ae+=i*V,P+=i*G,d+=i*J,_+=i*ie,f+=i*fe,l+=i*se,b+=i*ce,S+=i*pe,M+=i*ne,A+=i*de,i=e[15],K+=i*x,X+=i*y,te+=i*N,k+=i*Z,U+=i*ee,ae+=i*D,P+=i*V,d+=i*G,_+=i*J,f+=i*ie,l+=i*fe,b+=i*se,S+=i*ce,M+=i*pe,A+=i*ne,v+=i*de,a+=38*X,c+=38*te,u+=38*k,p+=38*U,g+=38*ae,m+=38*P,w+=38*d,R+=38*_,I+=38*f,O+=38*l,B+=38*b,F+=38*S,z+=38*M,Y+=38*A,$+=38*v,n=1,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,i=z+n+65535,n=Math.floor(i/65536),z=i-n*65536,i=Y+n+65535,n=Math.floor(i/65536),Y=i-n*65536,i=$+n+65535,n=Math.floor(i/65536),$=i-n*65536,i=K+n+65535,n=Math.floor(i/65536),K=i-n*65536,a+=n-1+37*(n-1),n=1,i=a+n+65535,n=Math.floor(i/65536),a=i-n*65536,i=c+n+65535,n=Math.floor(i/65536),c=i-n*65536,i=u+n+65535,n=Math.floor(i/65536),u=i-n*65536,i=p+n+65535,n=Math.floor(i/65536),p=i-n*65536,i=g+n+65535,n=Math.floor(i/65536),g=i-n*65536,i=m+n+65535,n=Math.floor(i/65536),m=i-n*65536,i=w+n+65535,n=Math.floor(i/65536),w=i-n*65536,i=R+n+65535,n=Math.floor(i/65536),R=i-n*65536,i=I+n+65535,n=Math.floor(i/65536),I=i-n*65536,i=O+n+65535,n=Math.floor(i/65536),O=i-n*65536,i=B+n+65535,n=Math.floor(i/65536),B=i-n*65536,i=F+n+65535,n=Math.floor(i/65536),F=i-n*65536,i=z+n+65535,n=Math.floor(i/65536),z=i-n*65536,i=Y+n+65535,n=Math.floor(i/65536),Y=i-n*65536,i=$+n+65535,n=Math.floor(i/65536),$=i-n*65536,i=K+n+65535,n=Math.floor(i/65536),K=i-n*65536,a+=n-1+37*(n-1),r[0]=a,r[1]=c,r[2]=u,r[3]=p,r[4]=g,r[5]=m,r[6]=w,r[7]=R,r[8]=I,r[9]=O,r[10]=B,r[11]=F,r[12]=z,r[13]=Y,r[14]=$,r[15]=K}function Ha(r,e){kt(r,e,e)}function E6(r,e){let t=Ee(),i;for(i=0;i<16;i++)t[i]=e[i];for(i=253;i>=0;i--)Ha(t,t),i!==2&&i!==4&&kt(t,t,e);for(i=0;i<16;i++)r[i]=t[i]}function fO(r,e){let t=Ee(),i;for(i=0;i<16;i++)t[i]=e[i];for(i=250;i>=0;i--)Ha(t,t),i!==1&&kt(t,t,e);for(i=0;i<16;i++)r[i]=t[i]}function Up(r,e){let t=Ee(),i=Ee(),n=Ee(),a=Ee(),c=Ee(),u=Ee(),p=Ee(),g=Ee(),m=Ee();Ka(t,r[1],r[0]),Ka(m,e[1],e[0]),kt(t,t,m),ja(i,r[0],r[1]),ja(m,e[0],e[1]),kt(i,i,m),kt(n,r[3],e[3]),kt(n,n,aO),kt(a,r[2],e[2]),ja(a,a,a),Ka(c,i,t),Ka(u,a,n),ja(p,a,n),ja(g,i,t),kt(r[0],c,u),kt(r[1],g,p),kt(r[2],p,u),kt(r[3],c,g)}function b6(r,e,t){for(let i=0;i<4;i++)y6(r[i],e[i],t)}function kp(r,e){let t=Ee(),i=Ee(),n=Ee();E6(n,e[2]),kt(t,e[0],n),kt(i,e[1],n),gf(r,i),r[31]^=_6(t)<<7}function x6(r,e,t){ca(r[0],Fp),ca(r[1],Wo),ca(r[2],Wo),ca(r[3],Fp);for(let i=255;i>=0;--i){let n=t[i/8|0]>>(i&7)&1;b6(r,e,n),Up(e,r),Up(r,r),b6(r,e,n)}}function jp(r,e){let t=[Ee(),Ee(),Ee(),Ee()];ca(t[0],p6),ca(t[1],g6),ca(t[2],Wo),kt(t[3],p6,g6),x6(r,t,e)}function A6(r){if(r.length!==Ft.SEED_LENGTH)throw new Error(`ed25519: seed must be ${Ft.SEED_LENGTH} bytes`);let e=(0,pf.hash)(r);e[0]&=248,e[31]&=127,e[31]|=64;let t=new Uint8Array(32),i=[Ee(),Ee(),Ee(),Ee()];jp(i,e),kp(t,i);let n=new Uint8Array(64);return n.set(r),n.set(t,32),{publicKey:t,secretKey:n}}Ft.generateKeyPairFromSeed=A6;function uO(r){let e=(0,iO.randomBytes)(32,r),t=A6(e);return(0,m6.wipe)(e),t}Ft.generateKeyPair=uO;function hO(r){if(r.length!==Ft.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${Ft.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(r.subarray(32))}Ft.extractPublicKeyFromSecretKey=hO;var Bp=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function S6(r,e){let t,i,n,a;for(i=63;i>=32;--i){for(t=0,n=i-32,a=i-12;n<a;++n)e[n]+=t-16*e[i]*Bp[n-(i-32)],t=Math.floor((e[n]+128)/256),e[n]-=t*256;e[n]+=t,e[i]=0}for(t=0,n=0;n<32;n++)e[n]+=t-(e[31]>>4)*Bp[n],t=e[n]>>8,e[n]&=255;for(n=0;n<32;n++)e[n]-=t*Bp[n];for(i=0;i<32;i++)e[i+1]+=e[i]>>8,r[i]=e[i]&255}function zp(r){let e=new Float64Array(64);for(let t=0;t<64;t++)e[t]=r[t];for(let t=0;t<64;t++)r[t]=0;S6(r,e)}function lO(r,e){let t=new Float64Array(64),i=[Ee(),Ee(),Ee(),Ee()],n=(0,pf.hash)(r.subarray(0,32));n[0]&=248,n[31]&=127,n[31]|=64;let a=new Uint8Array(64);a.set(n.subarray(32),32);let c=new pf.SHA512;c.update(a.subarray(32)),c.update(e);let u=c.digest();c.clean(),zp(u),jp(i,u),kp(a,i),c.reset(),c.update(a.subarray(0,32)),c.update(r.subarray(32)),c.update(e);let p=c.digest();zp(p);for(let g=0;g<32;g++)t[g]=u[g];for(let g=0;g<32;g++)for(let m=0;m<32;m++)t[g+m]+=p[g]*n[m];return S6(a.subarray(32),t),a}Ft.sign=lO;function I6(r,e){let t=Ee(),i=Ee(),n=Ee(),a=Ee(),c=Ee(),u=Ee(),p=Ee();return ca(r[2],Wo),cO(r[1],e),Ha(n,r[1]),kt(a,n,sO),Ka(n,n,r[2]),ja(a,r[2],a),Ha(c,a),Ha(u,c),kt(p,u,c),kt(t,p,n),kt(t,t,a),fO(t,t),kt(t,t,n),kt(t,t,a),kt(t,t,a),kt(r[0],t,a),Ha(i,r[0]),kt(i,i,a),v6(i,n)&&kt(r[0],r[0],oO),Ha(i,r[0]),kt(i,i,a),v6(i,n)?-1:(_6(r[0])===e[31]>>7&&Ka(r[0],Fp,r[0]),kt(r[3],r[0],r[1]),0)}function dO(r,e,t){let i=new Uint8Array(32),n=[Ee(),Ee(),Ee(),Ee()],a=[Ee(),Ee(),Ee(),Ee()];if(t.length!==Ft.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${Ft.SIGNATURE_LENGTH} bytes`);if(I6(a,r))return!1;let c=new pf.SHA512;c.update(t.subarray(0,32)),c.update(r),c.update(e);let u=c.digest();return zp(u),x6(n,a,u),jp(a,t.subarray(32)),Up(n,a),kp(i,n),!w6(t,i)}Ft.verify=dO;function pO(r){let e=[Ee(),Ee(),Ee(),Ee()];if(I6(e,r))throw new Error("Ed25519: invalid public key");let t=Ee(),i=Ee(),n=e[1];ja(t,Wo,n),Ka(i,Wo,n),E6(i,i),kt(t,t,i);let a=new Uint8Array(32);return gf(a,t),a}Ft.convertPublicKeyToX25519=pO;function gO(r){let e=(0,pf.hash)(r.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;let t=new Uint8Array(e.subarray(0,32));return(0,m6.wipe)(e),t}Ft.convertSecretKeyToX25519=gO});var o8=ve((tG,a8)=>{"use strict";function Oq(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}a8.exports=Nq;function Nq(r,e,t){var i=t&&t.stringify||Oq,n=1;if(typeof r=="object"&&r!==null){var a=e.length+n;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(e[u]);return c.join(" ")}if(typeof r!="string")return r;var p=e.length;if(p===0)return r;for(var g="",m=1-n,w=-1,R=r&&r.length||0,I=0;I<R;){if(r.charCodeAt(I)===37&&I+1<R){switch(w=w>-1?w:0,r.charCodeAt(I+1)){case 100:case 102:if(m>=p||e[m]==null)break;w<I&&(g+=r.slice(w,I)),g+=Number(e[m]),w=I+2,I++;break;case 105:if(m>=p||e[m]==null)break;w<I&&(g+=r.slice(w,I)),g+=Math.floor(Number(e[m])),w=I+2,I++;break;case 79:case 111:case 106:if(m>=p||e[m]===void 0)break;w<I&&(g+=r.slice(w,I));var O=typeof e[m];if(O==="string"){g+="'"+e[m]+"'",w=I+2,I++;break}if(O==="function"){g+=e[m].name||"<anonymous>",w=I+2,I++;break}g+=i(e[m]),w=I+2,I++;break;case 115:if(m>=p)break;w<I&&(g+=r.slice(w,I)),g+=String(e[m]),w=I+2,I++;break;case 37:w<I&&(g+=r.slice(w,I)),g+="%",w=I+2,I++,m--;break}++m}++I}return w===-1?r:(w<R&&(g+=r.slice(w)),g)}});var eg=ve((rG,h8)=>{"use strict";var c8=o8();h8.exports=Qn;var Hf=Hq().console||{},Tq={mapHttpRequest:ul,mapHttpResponse:ul,wrapRequestSerializer:X1,wrapResponseSerializer:X1,wrapErrorSerializer:X1,req:ul,res:ul,err:Uq};function Lq(r,e){return Array.isArray(r)?r.filter(function(i){return i!=="!stdSerializers.err"}):r===!0?Object.keys(e):!1}function Qn(r){r=r||{},r.browser=r.browser||{};let e=r.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");let t=r.browser.write||Hf;r.browser.write&&(r.browser.asObject=!0);let i=r.serializers||{},n=Lq(r.browser.serialize,i),a=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let c=["error","fatal","warn","info","debug","trace"];typeof t=="function"&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),r.enabled===!1&&(r.level="silent");let u=r.level||"info",p=Object.create(t);p.log||(p.log=Kf),Object.defineProperty(p,"levelVal",{get:m}),Object.defineProperty(p,"level",{get:w,set:R});let g={transmit:e,serialize:n,asObject:r.browser.asObject,levels:c,timestamp:zq(r)};p.levels=Qn.levels,p.level=u,p.setMaxListeners=p.getMaxListeners=p.emit=p.addListener=p.on=p.prependListener=p.once=p.prependOnceListener=p.removeListener=p.removeAllListeners=p.listeners=p.listenerCount=p.eventNames=p.write=p.flush=Kf,p.serializers=i,p._serialize=n,p._stdErrSerialize=a,p.child=I,e&&(p._logEvent=Z1());function m(){return this.level==="silent"?1/0:this.levels.values[this.level]}function w(){return this._level}function R(O){if(O!=="silent"&&!this.levels.values[O])throw Error("unknown level "+O);this._level=O,bc(g,p,"error","log"),bc(g,p,"fatal","error"),bc(g,p,"warn","error"),bc(g,p,"info","log"),bc(g,p,"debug","log"),bc(g,p,"trace","log")}function I(O,B){if(!O)throw new Error("missing bindings for child Pino");B=B||{},n&&O.serializers&&(B.serializers=O.serializers);let F=B.serializers;if(n&&F){var z=Object.assign({},i,F),Y=r.browser.serialize===!0?Object.keys(z):n;delete O.serializers,hl([O],Y,z,this._stdErrSerialize)}function $(K){this._childLevel=(K._childLevel|0)+1,this.error=mc(K,O,"error"),this.fatal=mc(K,O,"fatal"),this.warn=mc(K,O,"warn"),this.info=mc(K,O,"info"),this.debug=mc(K,O,"debug"),this.trace=mc(K,O,"trace"),z&&(this.serializers=z,this._serialize=Y),e&&(this._logEvent=Z1([].concat(K._logEvent.bindings,O)))}return $.prototype=this,new $(this)}return p}Qn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Qn.stdSerializers=Tq;Qn.stdTimeFunctions=Object.assign({},{nullTime:f8,epochTime:u8,unixTime:kq,isoTime:jq});function bc(r,e,t,i){let n=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?Kf:n[t]?n[t]:Hf[t]||Hf[i]||Kf,qq(r,e,t)}function qq(r,e,t){!r.transmit&&e[t]===Kf||(e[t]=function(i){return function(){let a=r.timestamp(),c=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Hf?Hf:this;for(var p=0;p<c.length;p++)c[p]=arguments[p];if(r.serialize&&!r.asObject&&hl(c,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?i.call(u,Bq(this,t,c,a)):i.apply(u,c),r.transmit){let g=r.transmit.level||e.level,m=Qn.levels.values[g],w=Qn.levels.values[t];if(w<m)return;Fq(this,{ts:a,methodLevel:t,methodValue:w,transmitLevel:g,transmitValue:Qn.levels.values[r.transmit.level||e.level],send:r.transmit.send,val:e.levelVal},c)}}}(e[t]))}function Bq(r,e,t,i){r._serialize&&hl(t,r._serialize,r.serializers,r._stdErrSerialize);let n=t.slice(),a=n[0],c={};i&&(c.time=i),c.level=Qn.levels.values[e];let u=(r._childLevel|0)+1;if(u<1&&(u=1),a!==null&&typeof a=="object"){for(;u--&&typeof n[0]=="object";)Object.assign(c,n.shift());a=n.length?c8(n.shift(),n):void 0}else typeof a=="string"&&(a=c8(n.shift(),n));return a!==void 0&&(c.msg=a),c}function hl(r,e,t,i){for(let n in r)if(i&&r[n]instanceof Error)r[n]=Qn.stdSerializers.err(r[n]);else if(typeof r[n]=="object"&&!Array.isArray(r[n]))for(let a in r[n])e&&e.indexOf(a)>-1&&a in t&&(r[n][a]=t[a](r[n][a]))}function mc(r,e,t){return function(){let i=new Array(1+arguments.length);i[0]=e;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return r[t].apply(this,i)}}function Fq(r,e,t){let i=e.send,n=e.ts,a=e.methodLevel,c=e.methodValue,u=e.val,p=r._logEvent.bindings;hl(t,r._serialize||Object.keys(r.serializers),r.serializers,r._stdErrSerialize===void 0?!0:r._stdErrSerialize),r._logEvent.ts=n,r._logEvent.messages=t.filter(function(g){return p.indexOf(g)===-1}),r._logEvent.level.label=a,r._logEvent.level.value=c,i(a,r._logEvent,u),r._logEvent=Z1(p)}function Z1(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function Uq(r){let e={type:r.constructor.name,msg:r.message,stack:r.stack};for(let t in r)e[t]===void 0&&(e[t]=r[t]);return e}function zq(r){return typeof r.timestamp=="function"?r.timestamp:r.timestamp===!1?f8:u8}function ul(){return{}}function X1(r){return r}function Kf(){}function f8(){return!1}function u8(){return Date.now()}function kq(){return Math.round(Date.now()/1e3)}function jq(){return new Date(Date.now()).toISOString()}function Hq(){function r(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return r(self)||r(window)||r(this)||{}}}});var E8={};Lr(E8,{__assign:()=>og,__asyncDelegator:()=>gB,__asyncGenerator:()=>pB,__asyncValues:()=>vB,__await:()=>Wf,__awaiter:()=>cB,__classPrivateFieldGet:()=>wB,__classPrivateFieldSet:()=>_B,__createBinding:()=>uB,__decorate:()=>sB,__exportStar:()=>hB,__extends:()=>iB,__generator:()=>fB,__importDefault:()=>yB,__importStar:()=>mB,__makeTemplateObject:()=>bB,__metadata:()=>oB,__param:()=>aB,__read:()=>_8,__rest:()=>nB,__spread:()=>lB,__spreadArrays:()=>dB,__values:()=>cg});function iB(r,e){ag(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function nB(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function sB(r,e,t,i){var n=arguments.length,a=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var u=r.length-1;u>=0;u--)(c=r[u])&&(a=(n<3?c(a):n>3?c(e,t,a):c(e,t))||a);return n>3&&a&&Object.defineProperty(e,t,a),a}function aB(r,e){return function(t,i){e(t,i,r)}}function oB(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function cB(r,e,t,i){function n(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(m){try{g(i.next(m))}catch(w){c(w)}}function p(m){try{g(i.throw(m))}catch(w){c(w)}}function g(m){m.done?a(m.value):n(m.value).then(u,p)}g((i=i.apply(r,e||[])).next())})}function fB(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,n,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(g){return function(m){return p([g,m])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(a=g[0]&2?n.return:g[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,g[1])).done)return a;switch(n=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,n=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(m){g=[6,m],n=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function uB(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function hB(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function cg(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _8(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,a=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){c={error:u}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return a}function lB(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(_8(arguments[e]));return r}function dB(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),n=0,e=0;e<t;e++)for(var a=arguments[e],c=0,u=a.length;c<u;c++,n++)i[n]=a[c];return i}function Wf(r){return this instanceof Wf?(this.v=r,this):new Wf(r)}function pB(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,a=[];return n={},c("next"),c("throw"),c("return"),n[Symbol.asyncIterator]=function(){return this},n;function c(R){i[R]&&(n[R]=function(I){return new Promise(function(O,B){a.push([R,I,O,B])>1||u(R,I)})})}function u(R,I){try{p(i[R](I))}catch(O){w(a[0][3],O)}}function p(R){R.value instanceof Wf?Promise.resolve(R.value.v).then(g,m):w(a[0][2],R)}function g(R){u("next",R)}function m(R){u("throw",R)}function w(R,I){R(I),a.shift(),a.length&&u(a[0][0],a[0][1])}}function gB(r){var e,t;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,a){e[n]=r[n]?function(c){return(t=!t)?{value:Wf(r[n](c)),done:n==="return"}:a?a(c):c}:a}}function vB(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof cg=="function"?cg(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(c){return new Promise(function(u,p){c=r[a](c),n(u,p,c.done,c.value)})}}function n(a,c,u,p){Promise.resolve(p).then(function(g){a({value:g,done:u})},c)}}function bB(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function mB(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function yB(r){return r&&r.__esModule?r:{default:r}}function wB(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function _B(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var ag,og,x8=e2(()=>{"use strict";ag=function(r,e){return ag=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},ag(r,e)};og=function(){return og=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},og.apply(this,arguments)}});var S8=ve(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.isBrowserCryptoAvailable=ga.getSubtleCrypto=ga.getBrowerCrypto=void 0;function fg(){return(global==null?void 0:global.crypto)||(global==null?void 0:global.msCrypto)||{}}ga.getBrowerCrypto=fg;function A8(){let r=fg();return r.subtle||r.webkitSubtle}ga.getSubtleCrypto=A8;function EB(){return!!fg()&&!!A8()}ga.isBrowserCryptoAvailable=EB});var D8=ve(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.isBrowser=va.isNode=va.isReactNative=void 0;function I8(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}va.isReactNative=I8;function M8(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}va.isNode=M8;function xB(){return!I8()&&!M8()}va.isBrowser=xB});var ug=ve(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});var R8=(x8(),$c(E8));R8.__exportStar(S8(),Tl);R8.__exportStar(D8(),Tl)});var q8=ve((TG,L8)=>{"use strict";L8.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}});var w4=ve((Xf,_c)=>{"use strict";var TB=200,Ag="__lodash_hash_undefined__",Jl=1,Q8=2,X8=9007199254740991,kl="[object Arguments]",bg="[object Array]",LB="[object AsyncFunction]",Z8="[object Boolean]",e4="[object Date]",t4="[object Error]",r4="[object Function]",qB="[object GeneratorFunction]",jl="[object Map]",i4="[object Number]",BB="[object Null]",wc="[object Object]",z8="[object Promise]",FB="[object Proxy]",n4="[object RegExp]",Hl="[object Set]",s4="[object String]",UB="[object Symbol]",zB="[object Undefined]",mg="[object WeakMap]",a4="[object ArrayBuffer]",Kl="[object DataView]",kB="[object Float32Array]",jB="[object Float64Array]",HB="[object Int8Array]",KB="[object Int16Array]",VB="[object Int32Array]",GB="[object Uint8Array]",$B="[object Uint8ClampedArray]",JB="[object Uint16Array]",WB="[object Uint32Array]",YB=/[\\^$.*+?()[\]{}|]/g,QB=/^\[object .+?Constructor\]$/,XB=/^(?:0|[1-9]\d*)$/,Wt={};Wt[kB]=Wt[jB]=Wt[HB]=Wt[KB]=Wt[VB]=Wt[GB]=Wt[$B]=Wt[JB]=Wt[WB]=!0;Wt[kl]=Wt[bg]=Wt[a4]=Wt[Z8]=Wt[Kl]=Wt[e4]=Wt[t4]=Wt[r4]=Wt[jl]=Wt[i4]=Wt[wc]=Wt[n4]=Wt[Hl]=Wt[s4]=Wt[mg]=!1;var o4=typeof global=="object"&&global&&global.Object===Object&&global,ZB=typeof self=="object"&&self&&self.Object===Object&&self,zs=o4||ZB||Function("return this")(),c4=typeof Xf=="object"&&Xf&&!Xf.nodeType&&Xf,k8=c4&&typeof _c=="object"&&_c&&!_c.nodeType&&_c,f4=k8&&k8.exports===c4,pg=f4&&o4.process,j8=function(){try{return pg&&pg.binding&&pg.binding("util")}catch{}}(),H8=j8&&j8.isTypedArray;function eF(r,e){for(var t=-1,i=r==null?0:r.length,n=0,a=[];++t<i;){var c=r[t];e(c,t,r)&&(a[n++]=c)}return a}function tF(r,e){for(var t=-1,i=e.length,n=r.length;++t<i;)r[n+t]=e[t];return r}function rF(r,e){for(var t=-1,i=r==null?0:r.length;++t<i;)if(e(r[t],t,r))return!0;return!1}function iF(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}function nF(r){return function(e){return r(e)}}function sF(r,e){return r.has(e)}function aF(r,e){return r?.[e]}function oF(r){var e=-1,t=Array(r.size);return r.forEach(function(i,n){t[++e]=[n,i]}),t}function cF(r,e){return function(t){return r(e(t))}}function fF(r){var e=-1,t=Array(r.size);return r.forEach(function(i){t[++e]=i}),t}var uF=Array.prototype,hF=Function.prototype,Wl=Object.prototype,gg=zs["__core-js_shared__"],u4=hF.toString,Zn=Wl.hasOwnProperty,K8=function(){var r=/[^.]+$/.exec(gg&&gg.keys&&gg.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),h4=Wl.toString,lF=RegExp("^"+u4.call(Zn).replace(YB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V8=f4?zs.Buffer:void 0,Vl=zs.Symbol,G8=zs.Uint8Array,l4=Wl.propertyIsEnumerable,dF=uF.splice,io=Vl?Vl.toStringTag:void 0,$8=Object.getOwnPropertySymbols,pF=V8?V8.isBuffer:void 0,gF=cF(Object.keys,Object),yg=Ec(zs,"DataView"),Zf=Ec(zs,"Map"),wg=Ec(zs,"Promise"),_g=Ec(zs,"Set"),Eg=Ec(zs,"WeakMap"),eu=Ec(Object,"create"),vF=ao(yg),bF=ao(Zf),mF=ao(wg),yF=ao(_g),wF=ao(Eg),J8=Vl?Vl.prototype:void 0,vg=J8?J8.valueOf:void 0;function no(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function _F(){this.__data__=eu?eu(null):{},this.size=0}function EF(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}function xF(r){var e=this.__data__;if(eu){var t=e[r];return t===Ag?void 0:t}return Zn.call(e,r)?e[r]:void 0}function AF(r){var e=this.__data__;return eu?e[r]!==void 0:Zn.call(e,r)}function SF(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=eu&&e===void 0?Ag:e,this}no.prototype.clear=_F;no.prototype.delete=EF;no.prototype.get=xF;no.prototype.has=AF;no.prototype.set=SF;function ks(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function IF(){this.__data__=[],this.size=0}function MF(r){var e=this.__data__,t=Yl(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():dF.call(e,t,1),--this.size,!0}function DF(r){var e=this.__data__,t=Yl(e,r);return t<0?void 0:e[t][1]}function RF(r){return Yl(this.__data__,r)>-1}function PF(r,e){var t=this.__data__,i=Yl(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}ks.prototype.clear=IF;ks.prototype.delete=MF;ks.prototype.get=DF;ks.prototype.has=RF;ks.prototype.set=PF;function so(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function CF(){this.size=0,this.__data__={hash:new no,map:new(Zf||ks),string:new no}}function OF(r){var e=Ql(this,r).delete(r);return this.size-=e?1:0,e}function NF(r){return Ql(this,r).get(r)}function TF(r){return Ql(this,r).has(r)}function LF(r,e){var t=Ql(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}so.prototype.clear=CF;so.prototype.delete=OF;so.prototype.get=NF;so.prototype.has=TF;so.prototype.set=LF;function Gl(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new so;++e<t;)this.add(r[e])}function qF(r){return this.__data__.set(r,Ag),this}function BF(r){return this.__data__.has(r)}Gl.prototype.add=Gl.prototype.push=qF;Gl.prototype.has=BF;function wa(r){var e=this.__data__=new ks(r);this.size=e.size}function FF(){this.__data__=new ks,this.size=0}function UF(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function zF(r){return this.__data__.get(r)}function kF(r){return this.__data__.has(r)}function jF(r,e){var t=this.__data__;if(t instanceof ks){var i=t.__data__;if(!Zf||i.length<TB-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new so(i)}return t.set(r,e),this.size=t.size,this}wa.prototype.clear=FF;wa.prototype.delete=UF;wa.prototype.get=zF;wa.prototype.has=kF;wa.prototype.set=jF;function HF(r,e){var t=$l(r),i=!t&&nU(r),n=!t&&!i&&xg(r),a=!t&&!i&&!n&&y4(r),c=t||i||n||a,u=c?iF(r.length,String):[],p=u.length;for(var g in r)(e||Zn.call(r,g))&&!(c&&(g=="length"||n&&(g=="offset"||g=="parent")||a&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||ZF(g,p)))&&u.push(g);return u}function Yl(r,e){for(var t=r.length;t--;)if(g4(r[t][0],e))return t;return-1}function KF(r,e,t){var i=e(r);return $l(r)?i:tF(i,t(r))}function ru(r){return r==null?r===void 0?zB:BB:io&&io in Object(r)?QF(r):iU(r)}function W8(r){return tu(r)&&ru(r)==kl}function d4(r,e,t,i,n){return r===e?!0:r==null||e==null||!tu(r)&&!tu(e)?r!==r&&e!==e:VF(r,e,t,i,d4,n)}function VF(r,e,t,i,n,a){var c=$l(r),u=$l(e),p=c?bg:ya(r),g=u?bg:ya(e);p=p==kl?wc:p,g=g==kl?wc:g;var m=p==wc,w=g==wc,R=p==g;if(R&&xg(r)){if(!xg(e))return!1;c=!0,m=!1}if(R&&!m)return a||(a=new wa),c||y4(r)?p4(r,e,t,i,n,a):WF(r,e,p,t,i,n,a);if(!(t&Jl)){var I=m&&Zn.call(r,"__wrapped__"),O=w&&Zn.call(e,"__wrapped__");if(I||O){var B=I?r.value():r,F=O?e.value():e;return a||(a=new wa),n(B,F,t,i,a)}}return R?(a||(a=new wa),YF(r,e,t,i,n,a)):!1}function GF(r){if(!m4(r)||tU(r))return!1;var e=v4(r)?lF:QB;return e.test(ao(r))}function $F(r){return tu(r)&&b4(r.length)&&!!Wt[ru(r)]}function JF(r){if(!rU(r))return gF(r);var e=[];for(var t in Object(r))Zn.call(r,t)&&t!="constructor"&&e.push(t);return e}function p4(r,e,t,i,n,a){var c=t&Jl,u=r.length,p=e.length;if(u!=p&&!(c&&p>u))return!1;var g=a.get(r);if(g&&a.get(e))return g==e;var m=-1,w=!0,R=t&Q8?new Gl:void 0;for(a.set(r,e),a.set(e,r);++m<u;){var I=r[m],O=e[m];if(i)var B=c?i(O,I,m,e,r,a):i(I,O,m,r,e,a);if(B!==void 0){if(B)continue;w=!1;break}if(R){if(!rF(e,function(F,z){if(!sF(R,z)&&(I===F||n(I,F,t,i,a)))return R.push(z)})){w=!1;break}}else if(!(I===O||n(I,O,t,i,a))){w=!1;break}}return a.delete(r),a.delete(e),w}function WF(r,e,t,i,n,a,c){switch(t){case Kl:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case a4:return!(r.byteLength!=e.byteLength||!a(new G8(r),new G8(e)));case Z8:case e4:case i4:return g4(+r,+e);case t4:return r.name==e.name&&r.message==e.message;case n4:case s4:return r==e+"";case jl:var u=oF;case Hl:var p=i&Jl;if(u||(u=fF),r.size!=e.size&&!p)return!1;var g=c.get(r);if(g)return g==e;i|=Q8,c.set(r,e);var m=p4(u(r),u(e),i,n,a,c);return c.delete(r),m;case UB:if(vg)return vg.call(r)==vg.call(e)}return!1}function YF(r,e,t,i,n,a){var c=t&Jl,u=Y8(r),p=u.length,g=Y8(e),m=g.length;if(p!=m&&!c)return!1;for(var w=p;w--;){var R=u[w];if(!(c?R in e:Zn.call(e,R)))return!1}var I=a.get(r);if(I&&a.get(e))return I==e;var O=!0;a.set(r,e),a.set(e,r);for(var B=c;++w<p;){R=u[w];var F=r[R],z=e[R];if(i)var Y=c?i(z,F,R,e,r,a):i(F,z,R,r,e,a);if(!(Y===void 0?F===z||n(F,z,t,i,a):Y)){O=!1;break}B||(B=R=="constructor")}if(O&&!B){var $=r.constructor,K=e.constructor;$!=K&&"constructor"in r&&"constructor"in e&&!(typeof $=="function"&&$ instanceof $&&typeof K=="function"&&K instanceof K)&&(O=!1)}return a.delete(r),a.delete(e),O}function Y8(r){return KF(r,oU,XF)}function Ql(r,e){var t=r.__data__;return eU(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Ec(r,e){var t=aF(r,e);return GF(t)?t:void 0}function QF(r){var e=Zn.call(r,io),t=r[io];try{r[io]=void 0;var i=!0}catch{}var n=h4.call(r);return i&&(e?r[io]=t:delete r[io]),n}var XF=$8?function(r){return r==null?[]:(r=Object(r),eF($8(r),function(e){return l4.call(r,e)}))}:cU,ya=ru;(yg&&ya(new yg(new ArrayBuffer(1)))!=Kl||Zf&&ya(new Zf)!=jl||wg&&ya(wg.resolve())!=z8||_g&&ya(new _g)!=Hl||Eg&&ya(new Eg)!=mg)&&(ya=function(r){var e=ru(r),t=e==wc?r.constructor:void 0,i=t?ao(t):"";if(i)switch(i){case vF:return Kl;case bF:return jl;case mF:return z8;case yF:return Hl;case wF:return mg}return e});function ZF(r,e){return e=e??X8,!!e&&(typeof r=="number"||XB.test(r))&&r>-1&&r%1==0&&r<e}function eU(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function tU(r){return!!K8&&K8 in r}function rU(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Wl;return r===t}function iU(r){return h4.call(r)}function ao(r){if(r!=null){try{return u4.call(r)}catch{}try{return r+""}catch{}}return""}function g4(r,e){return r===e||r!==r&&e!==e}var nU=W8(function(){return arguments}())?W8:function(r){return tu(r)&&Zn.call(r,"callee")&&!l4.call(r,"callee")},$l=Array.isArray;function sU(r){return r!=null&&b4(r.length)&&!v4(r)}var xg=pF||fU;function aU(r,e){return d4(r,e)}function v4(r){if(!m4(r))return!1;var e=ru(r);return e==r4||e==qB||e==LB||e==FB}function b4(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=X8}function m4(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function tu(r){return r!=null&&typeof r=="object"}var y4=H8?nF(H8):$F;function oU(r){return sU(r)?HF(r):JF(r)}function cU(){return[]}function fU(){return!1}_c.exports=aU});var l_=ve((Hs,h_)=>{"use strict";var u_=typeof self<"u"?self:Hs,id=function(){function r(){this.fetch=!1,this.DOMException=u_.DOMException}return r.prototype=u_,new r}();(function(r){var e=function(t){var i={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function n(P){return P&&DataView.prototype.isPrototypeOf(P)}if(i.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(P){return P&&a.indexOf(Object.prototype.toString.call(P))>-1};function u(P){if(typeof P!="string"&&(P=String(P)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(P))throw new TypeError("Invalid character in header field name");return P.toLowerCase()}function p(P){return typeof P!="string"&&(P=String(P)),P}function g(P){var d={next:function(){var _=P.shift();return{done:_===void 0,value:_}}};return i.iterable&&(d[Symbol.iterator]=function(){return d}),d}function m(P){this.map={},P instanceof m?P.forEach(function(d,_){this.append(_,d)},this):Array.isArray(P)?P.forEach(function(d){this.append(d[0],d[1])},this):P&&Object.getOwnPropertyNames(P).forEach(function(d){this.append(d,P[d])},this)}m.prototype.append=function(P,d){P=u(P),d=p(d);var _=this.map[P];this.map[P]=_?_+", "+d:d},m.prototype.delete=function(P){delete this.map[u(P)]},m.prototype.get=function(P){return P=u(P),this.has(P)?this.map[P]:null},m.prototype.has=function(P){return this.map.hasOwnProperty(u(P))},m.prototype.set=function(P,d){this.map[u(P)]=p(d)},m.prototype.forEach=function(P,d){for(var _ in this.map)this.map.hasOwnProperty(_)&&P.call(d,this.map[_],_,this)},m.prototype.keys=function(){var P=[];return this.forEach(function(d,_){P.push(_)}),g(P)},m.prototype.values=function(){var P=[];return this.forEach(function(d){P.push(d)}),g(P)},m.prototype.entries=function(){var P=[];return this.forEach(function(d,_){P.push([_,d])}),g(P)},i.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function w(P){if(P.bodyUsed)return Promise.reject(new TypeError("Already read"));P.bodyUsed=!0}function R(P){return new Promise(function(d,_){P.onload=function(){d(P.result)},P.onerror=function(){_(P.error)}})}function I(P){var d=new FileReader,_=R(d);return d.readAsArrayBuffer(P),_}function O(P){var d=new FileReader,_=R(d);return d.readAsText(P),_}function B(P){for(var d=new Uint8Array(P),_=new Array(d.length),f=0;f<d.length;f++)_[f]=String.fromCharCode(d[f]);return _.join("")}function F(P){if(P.slice)return P.slice(0);var d=new Uint8Array(P.byteLength);return d.set(new Uint8Array(P)),d.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(P){this._bodyInit=P,P?typeof P=="string"?this._bodyText=P:i.blob&&Blob.prototype.isPrototypeOf(P)?this._bodyBlob=P:i.formData&&FormData.prototype.isPrototypeOf(P)?this._bodyFormData=P:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(P)?this._bodyText=P.toString():i.arrayBuffer&&i.blob&&n(P)?(this._bodyArrayBuffer=F(P.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(P)||c(P))?this._bodyArrayBuffer=F(P):this._bodyText=P=Object.prototype.toString.call(P):this._bodyText="",this.headers.get("content-type")||(typeof P=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(P)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var P=w(this);if(P)return P;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(I)}),this.text=function(){var P=w(this);if(P)return P;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(B(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(X)}),this.json=function(){return this.text().then(JSON.parse)},this}var Y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $(P){var d=P.toUpperCase();return Y.indexOf(d)>-1?d:P}function K(P,d){d=d||{};var _=d.body;if(P instanceof K){if(P.bodyUsed)throw new TypeError("Already read");this.url=P.url,this.credentials=P.credentials,d.headers||(this.headers=new m(P.headers)),this.method=P.method,this.mode=P.mode,this.signal=P.signal,!_&&P._bodyInit!=null&&(_=P._bodyInit,P.bodyUsed=!0)}else this.url=String(P);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new m(d.headers)),this.method=$(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(_)}K.prototype.clone=function(){return new K(this,{body:this._bodyInit})};function X(P){var d=new FormData;return P.trim().split("&").forEach(function(_){if(_){var f=_.split("="),l=f.shift().replace(/\+/g," "),b=f.join("=").replace(/\+/g," ");d.append(decodeURIComponent(l),decodeURIComponent(b))}}),d}function te(P){var d=new m,_=P.replace(/\r?\n[\t ]+/g," ");return _.split(/\r?\n/).forEach(function(f){var l=f.split(":"),b=l.shift().trim();if(b){var S=l.join(":").trim();d.append(b,S)}}),d}z.call(K.prototype);function k(P,d){d||(d={}),this.type="default",this.status=d.status===void 0?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new m(d.headers),this.url=d.url||"",this._initBody(P)}z.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},k.error=function(){var P=new k(null,{status:0,statusText:""});return P.type="error",P};var U=[301,302,303,307,308];k.redirect=function(P,d){if(U.indexOf(d)===-1)throw new RangeError("Invalid status code");return new k(null,{status:d,headers:{location:P}})},t.DOMException=r.DOMException;try{new t.DOMException}catch{t.DOMException=function(d,_){this.message=d,this.name=_;var f=Error(d);this.stack=f.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function ae(P,d){return new Promise(function(_,f){var l=new K(P,d);if(l.signal&&l.signal.aborted)return f(new t.DOMException("Aborted","AbortError"));var b=new XMLHttpRequest;function S(){b.abort()}b.onload=function(){var M={status:b.status,statusText:b.statusText,headers:te(b.getAllResponseHeaders()||"")};M.url="responseURL"in b?b.responseURL:M.headers.get("X-Request-URL");var A="response"in b?b.response:b.responseText;_(new k(A,M))},b.onerror=function(){f(new TypeError("Network request failed"))},b.ontimeout=function(){f(new TypeError("Network request failed"))},b.onabort=function(){f(new t.DOMException("Aborted","AbortError"))},b.open(l.method,l.url,!0),l.credentials==="include"?b.withCredentials=!0:l.credentials==="omit"&&(b.withCredentials=!1),"responseType"in b&&i.blob&&(b.responseType="blob"),l.headers.forEach(function(M,A){b.setRequestHeader(A,M)}),l.signal&&(l.signal.addEventListener("abort",S),b.onreadystatechange=function(){b.readyState===4&&l.signal.removeEventListener("abort",S)}),b.send(typeof l._bodyInit>"u"?null:l._bodyInit)})}return ae.polyfill=!0,r.fetch||(r.fetch=ae,r.Headers=m,r.Request=K,r.Response=k),t.Headers=m,t.Request=K,t.Response=k,t.fetch=ae,Object.defineProperty(t,"__esModule",{value:!0}),t}({})})(id);id.fetch.ponyfill=!0;delete id.fetch.polyfill;var Mc=id;Hs=Mc.fetch;Hs.default=Mc.fetch;Hs.fetch=Mc.fetch;Hs.Headers=Mc.Headers;Hs.Request=Mc.Request;Hs.Response=Mc.Response;h_.exports=Hs});var U_=wt(ws());var t2=function(r,e,t){if(t||arguments.length===2)for(var i=0,n=e.length,a;i<n;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return r.concat(a||Array.prototype.slice.call(e))},kI=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}();var jI=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}();var HI=function(){function r(e,t,i,n){this.name=e,this.version=t,this.os=i,this.bot=n,this.type="bot-device"}return r}();var KI=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}();var VI=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}();var GI=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,$I=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,r2=3,JI=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",GI]],i2=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function s2(r){return r?n2(r):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new VI:typeof navigator<"u"?n2(navigator.userAgent):QI()}function WI(r){return r!==""&&JI.reduce(function(e,t){var i=t[0],n=t[1];if(e)return e;var a=n.exec(r);return!!a&&[i,a]},!1)}function n2(r){var e=WI(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new KI;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<r2&&(n=t2(t2([],n,!0),XI(r2-n.length),!0)):n=[];var a=n.join("."),c=YI(r),u=$I.exec(r);return u&&u[1]?new HI(t,a,c,u[1]):new kI(t,a,c)}function YI(r){for(var e=0,t=i2.length;e<t;e++){var i=i2[e],n=i[0],a=i[1],c=a.exec(r);if(c)return n}return null}function QI(){var r=typeof process<"u"&&process.version;return r?new jI(process.version.slice(1)):null}function XI(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var Ls=wt(Mo()),qs=wt(A0()),ww=wt(y2()),ic=wt(F2()),p1=wt(X2()),_w=wt(ny()),Rf=wt(ef()),nc=wt(dy()),Xh=wt(by());function nf(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Ta(r,e){e||(e=r.reduce((n,a)=>n+a.length,0));let t=nf(e),i=0;for(let n of r)t.set(n,i),i+=n.length;return t}var $0={};Lr($0,{identity:()=>tR});function YD(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var n=0;n<r.length;n++){var a=r.charAt(n),c=a.charCodeAt(0);if(t[c]!==255)throw new TypeError(a+" is ambiguous");t[c]=n}var u=r.length,p=r.charAt(0),g=Math.log(u)/Math.log(256),m=Math.log(256)/Math.log(u);function w(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var B=0,F=0,z=0,Y=O.length;z!==Y&&O[z]===0;)z++,B++;for(var $=(Y-z)*m+1>>>0,K=new Uint8Array($);z!==Y;){for(var X=O[z],te=0,k=$-1;(X!==0||te<F)&&k!==-1;k--,te++)X+=256*K[k]>>>0,K[k]=X%u>>>0,X=X/u>>>0;if(X!==0)throw new Error("Non-zero carry");F=te,z++}for(var U=$-F;U!==$&&K[U]===0;)U++;for(var ae=p.repeat(B);U<$;++U)ae+=r.charAt(K[U]);return ae}function R(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var B=0;if(O[B]!==" "){for(var F=0,z=0;O[B]===p;)F++,B++;for(var Y=(O.length-B)*g+1>>>0,$=new Uint8Array(Y);O[B];){var K=t[O.charCodeAt(B)];if(K===255)return;for(var X=0,te=Y-1;(K!==0||X<z)&&te!==-1;te--,X++)K+=u*$[te]>>>0,$[te]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");z=X,B++}if(O[B]!==" "){for(var k=Y-z;k!==Y&&$[k]===0;)k++;for(var U=new Uint8Array(F+(Y-k)),ae=F;k!==Y;)U[ae++]=$[k++];return U}}}function I(O){var B=R(O);if(B)return B;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:R,decode:I}}var QD=YD,XD=QD,my=XD;var DH=new Uint8Array(0);var yy=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Ss=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var wy=r=>new TextEncoder().encode(r),_y=r=>new TextDecoder().decode(r);var H0=class{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},K0=class{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xy(this,e)}},V0=class{constructor(e){this.decoders=e}or(e){return xy(this,e)}decode(e){let t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},xy=(r,e)=>new V0(Je(Je({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e})),G0=class{constructor(e,t,i,n){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=n,this.encoder=new H0(e,t,i),this.decoder=new K0(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Co=({name:r,prefix:e,encode:t,decode:i})=>new G0(r,e,t,i),ea=({prefix:r,name:e,alphabet:t})=>{let{encode:i,decode:n}=my(t,e);return Co({prefix:r,name:e,encode:i,decode:a=>Ss(n(a))})},ZD=(r,e,t,i)=>{let n={};for(let m=0;m<e.length;++m)n[e[m]]=m;let a=r.length;for(;r[a-1]==="=";)--a;let c=new Uint8Array(a*t/8|0),u=0,p=0,g=0;for(let m=0;m<a;++m){let w=n[r[m]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);p=p<<t|w,u+=t,u>=8&&(u-=8,c[g++]=255&p>>u)}if(u>=t||255&p<<8-u)throw new SyntaxError("Unexpected end of data");return c},eR=(r,e,t)=>{let i=e[e.length-1]==="=",n=(1<<t)-1,a="",c=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],c+=8;c>t;)c-=t,a+=e[n&u>>c];if(c&&(a+=e[n&u<<t-c]),i)for(;a.length*t&7;)a+="=";return a},ir=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>Co({prefix:e,name:r,encode(n){return eR(n,i,t)},decode(n){return ZD(n,i,t,r)}});var tR=Co({prefix:"\0",name:"identity",encode:r=>_y(r),decode:r=>wy(r)});var J0={};Lr(J0,{base2:()=>rR});var rR=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var W0={};Lr(W0,{base8:()=>iR});var iR=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Y0={};Lr(Y0,{base10:()=>nR});var nR=ea({prefix:"9",name:"base10",alphabet:"0123456789"});var Q0={};Lr(Q0,{base16:()=>sR,base16upper:()=>aR});var sR=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),aR=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var X0={};Lr(X0,{base32:()=>Oo,base32hex:()=>uR,base32hexpad:()=>lR,base32hexpadupper:()=>dR,base32hexupper:()=>hR,base32pad:()=>cR,base32padupper:()=>fR,base32upper:()=>oR,base32z:()=>pR});var Oo=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),oR=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cR=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fR=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uR=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hR=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lR=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dR=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pR=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Z0={};Lr(Z0,{base36:()=>gR,base36upper:()=>vR});var gR=ea({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vR=ea({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ep={};Lr(ep,{base58btc:()=>Pn,base58flickr:()=>bR});var Pn=ea({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bR=ea({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tp={};Lr(tp,{base64:()=>mR,base64pad:()=>yR,base64url:()=>wR,base64urlpad:()=>_R});var mR=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yR=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wR=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_R=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rp={};Lr(rp,{base256emoji:()=>IR});var Ay=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ER=Ay.reduce((r,e,t)=>(r[t]=e,r),[]),xR=Ay.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function AR(r){return r.reduce((e,t)=>(e+=ER[t],e),"")}function SR(r){let e=[];for(let t of r){let i=xR[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}var IR=Co({prefix:"\u{1F680}",name:"base256emoji",encode:AR,decode:SR});var ap={};Lr(ap,{sha256:()=>VR,sha512:()=>GR});var MR=My,Sy=128,DR=127,RR=~DR,PR=Math.pow(2,31);function My(r,e,t){e=e||[],t=t||0;for(var i=t;r>=PR;)e[t++]=r&255|Sy,r/=128;for(;r&RR;)e[t++]=r&255|Sy,r>>>=7;return e[t]=r|0,My.bytes=t-i+1,e}var CR=ip,OR=128,Iy=127;function ip(r,i){var t=0,i=i||0,n=0,a=i,c,u=r.length;do{if(a>=u)throw ip.bytes=0,new RangeError("Could not decode varint");c=r[a++],t+=n<28?(c&Iy)<<n:(c&Iy)*Math.pow(2,n),n+=7}while(c>=OR);return ip.bytes=a-i,t}var NR=Math.pow(2,7),TR=Math.pow(2,14),LR=Math.pow(2,21),qR=Math.pow(2,28),BR=Math.pow(2,35),FR=Math.pow(2,42),UR=Math.pow(2,49),zR=Math.pow(2,56),kR=Math.pow(2,63),jR=function(r){return r<NR?1:r<TR?2:r<LR?3:r<qR?4:r<BR?5:r<FR?6:r<UR?7:r<zR?8:r<kR?9:10},HR={encode:MR,decode:CR,encodingLength:jR},KR=HR,sf=KR;var af=(r,e=0)=>[sf.decode(r,e),sf.decode.bytes],No=(r,e,t=0)=>(sf.encode(r,e,t),e),To=r=>sf.encodingLength(r);var La=(r,e)=>{let t=e.byteLength,i=To(r),n=i+To(t),a=new Uint8Array(n+t);return No(r,a,0),No(t,a,i),a.set(e,n),new Lo(r,t,e,a)},Dy=r=>{let e=Ss(r),[t,i]=af(e),[n,a]=af(e.subarray(i)),c=e.subarray(i+a);if(c.byteLength!==n)throw new Error("Incorrect length");return new Lo(t,n,c,e)},Ry=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&yy(r.bytes,e.bytes),Lo=class{constructor(e,t,i,n){this.code=e,this.size=t,this.digest=i,this.bytes=n}};var sp=({name:r,code:e,encode:t})=>new np(r,e,t),np=class{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?La(this.code,t):t.then(i=>La(this.code,i))}else throw Error("Unknown type, must be binary type")}};var Cy=r=>e=>L(void 0,null,function*(){return new Uint8Array(yield crypto.subtle.digest(r,e))}),VR=sp({name:"sha2-256",code:18,encode:Cy("SHA-256")}),GR=sp({name:"sha2-512",code:19,encode:Cy("SHA-512")});var op={};Lr(op,{identity:()=>WR});var Oy=0,$R="identity",Ny=Ss,JR=r=>La(Oy,Ny(r)),WR={code:Oy,name:$R,encode:Ny,digest:JR};var QH=new TextEncoder,XH=new TextDecoder;var mh=class r{constructor(e,t,i,n){this.code=t,this.version=e,this.multihash=i,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:bh,byteLength:bh,code:vh,version:vh,multihash:vh,bytes:vh,_baseCache:bh,asCID:bh})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==cf)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==tP)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,i=La(e,t);return r.createV1(this.code,i)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Ry(this.multihash,e.multihash)}toString(e){let{bytes:t,version:i,_baseCache:n}=this;switch(i){case 0:return ZR(t,n,e||Pn.encoder);default:return eP(t,n,e||Oo.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return iP(/^0\.0/,nP),!!(e&&(e[Ly]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r)return e;if(e!=null&&e.asCID===e){let{version:t,code:i,multihash:n,bytes:a}=e;return new r(t,i,n,a||Ty(t,i,n.bytes))}else if(e!=null&&e[Ly]===!0){let{version:t,multihash:i,code:n}=e,a=Dy(i);return r.create(t,n,a)}else return null}static create(e,t,i){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==cf)throw new Error(`Version 0 CID must use dag-pb (code: ${cf}) block encoding`);return new r(e,t,i,i.bytes)}case 1:{let n=Ty(e,t,i.bytes);return new r(e,t,i,n)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,cf,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,i]=r.decodeFirst(e);if(i.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),i=t.size-t.multihashSize,n=Ss(e.subarray(i,i+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");let a=n.subarray(t.multihashSize-t.digestSize),c=new Lo(t.multihashCode,t.digestSize,a,n);return[t.version===0?r.createV0(c):r.createV1(t.codec,c),e.subarray(t.size)]}static inspectBytes(e){let t=0,i=()=>{let[w,R]=af(e.subarray(t));return t+=R,w},n=i(),a=cf;if(n===18?(n=0,t=0):n===1&&(a=i()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let c=t,u=i(),p=i(),g=t+p,m=g-c;return{version:n,codec:a,multihashCode:u,digestSize:p,multihashSize:m,size:g}}static parse(e,t){let[i,n]=XR(e,t),a=r.decode(n);return a._baseCache.set(i,e),a}},XR=(r,e)=>{switch(r[0]){case"Q":{let t=e||Pn;return[Pn.prefix,t.decode(`${Pn.prefix}${r}`)]}case Pn.prefix:{let t=e||Pn;return[Pn.prefix,t.decode(r)]}case Oo.prefix:{let t=e||Oo;return[Oo.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},ZR=(r,e,t)=>{let{prefix:i}=t;if(i!==Pn.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let n=e.get(i);if(n==null){let a=t.encode(r).slice(1);return e.set(i,a),a}else return n},eP=(r,e,t)=>{let{prefix:i}=t,n=e.get(i);if(n==null){let a=t.encode(r);return e.set(i,a),a}else return n},cf=112,tP=18,Ty=(r,e,t)=>{let i=To(r),n=i+To(e),a=new Uint8Array(n+t.byteLength);return No(r,a,0),No(e,a,i),a.set(t,n),a},Ly=Symbol.for("@ipld/js-cid/CID"),vh={writable:!1,configurable:!1,enumerable:!0},bh={writable:!1,enumerable:!1,configurable:!1},rP="0.0.0-dev",iP=(r,e)=>{if(r.test(rP))console.warn(e);else throw new Error(e)},nP=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var cp=Je(Je(Je(Je(Je(Je(Je(Je(Je(Je({},$0),J0),W0),Y0),Q0),X0),Z0),ep),tp),rp),aK=Je(Je({},ap),op);function By(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}var qy=By("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),fp=By("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=nf(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),sP=Je({utf8:qy,"utf-8":qy,hex:cp.base16,latin1:fp,ascii:fp,binary:fp},cp),yh=sP;function hr(r,e="utf8"){let t=yh[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function nr(r,e="utf8"){let t=yh[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Ew=wt(u6());var mf=wt(M6()),F6=wt(ef()),U6=wt(Mo());var D6="EdDSA",R6="JWT",vf=".",bf="base64url",Hp="utf8",Kp="utf8",P6=":",C6="did",O6="key",Vp="base58btc",N6="z",T6="K36";var vO=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),bO=r=>{let e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function Gi(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return bO(r)}catch{return r}}function Jr(r){return typeof r=="string"?r:vO(r)||""}function L6(r){return Gi(nr(hr(r,bf),Hp))}function qh(r){return nr(hr(Jr(r),Hp),bf)}function Bh(r){let e=hr(T6,Vp),t=N6+nr(Ta([e,r]),Vp);return[C6,O6,t].join(P6)}function mO(r){return nr(r,bf)}function yO(r){return hr(r,bf)}function q6(r){return hr([qh(r.header),qh(r.payload)].join(vf),Kp)}function B6(r){return[qh(r.header),qh(r.payload),mO(r.signature)].join(vf)}function Yo(r){let e=r.split(vf),t=L6(e[0]),i=L6(e[1]),n=yO(e[2]),a=hr(e.slice(0,2).join(vf),Kp);return{header:t,payload:i,signature:n,data:a}}function Gp(r=(0,F6.randomBytes)(32)){return mf.generateKeyPairFromSeed(r)}function z6(a,c,u,p){return L(this,arguments,function*(r,e,t,i,n=(0,U6.fromMiliseconds)(Date.now())){let g={alg:D6,typ:R6},m=Bh(i.publicKey),w=n+t,R={iss:m,sub:r,aud:e,iat:n,exp:w},I=q6({header:g,payload:R}),O=mf.sign(i.secretKey,I);return B6({header:g,payload:R,signature:O})})}var k6={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var EO=":";function Ja(r){let[e,t]=r.split(EO);return{namespace:e,reference:t}}function g1(r,e=[]){let t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;let n=r[i];t.push(...n.accounts)}),t}function xw(r,e){return r.includes(":")?[r]:e.chains||[]}var xO=Object.defineProperty,j6=Object.getOwnPropertySymbols,AO=Object.prototype.hasOwnProperty,SO=Object.prototype.propertyIsEnumerable,H6=(r,e,t)=>e in r?xO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,K6=(r,e)=>{for(var t in e||(e={}))AO.call(e,t)&&H6(r,t,e[t]);if(j6)for(var t of j6(e))SO.call(e,t)&&H6(r,t,e[t]);return r},IO="ReactNative",pi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};var MO="js";function Pf(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Wa(){return!(0,qs.getDocument)()&&!!(0,qs.getNavigator)()&&navigator.product===IO}function sc(){return!Pf()&&!!(0,qs.getNavigator)()&&!!(0,qs.getDocument)()}function Cf(){return Wa()?pi.reactNative:Pf()?pi.node:sc()?pi.browser:pi.unknown}function Aw(){var r;try{return Wa()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function DO(r,e){let t=ic.parse(r);return t=K6(K6({},t),e),r=ic.stringify(t),r}function Zh(){return(0,ww.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function RO(){if(Cf()===pi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){let{OS:t,Version:i}=global.Platform;return[t,i].join("-")}let r=s2();if(r===null)return"unknown";let e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function PO(){var r;let e=Cf();return e===pi.browser?[e,((r=(0,qs.getLocation)())==null?void 0:r.host)||"unknown"].join(":"):e}function v1(r,e,t){let i=RO(),n=PO();return[[r,e].join("-"),[MO,t].join("-"),i,n].join("/")}function Sw({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:n,projectId:a,useOnCloseEvent:c,bundleId:u}){let p=t.split("?"),g=v1(r,e,i),m={auth:n,ua:g,projectId:a,useOnCloseEvent:c||void 0,origin:u||void 0},w=DO(p[1]||"",m);return p[0]+"?"+w}function Va(r,e){return r.filter(t=>e.includes(t)).length===r.length}function b1(r){return Object.fromEntries(r.entries())}function m1(r){return new Map(Object.entries(r))}function Bs(r=Ls.FIVE_MINUTES,e){let t=(0,Ls.toMiliseconds)(r||Ls.FIVE_MINUTES),i,n,a;return{resolve:c=>{a&&i&&(clearTimeout(a),i(c))},reject:c=>{a&&n&&(clearTimeout(a),n(c))},done:()=>new Promise((c,u)=>{a=setTimeout(()=>{u(new Error(e))},t),i=c,n=u})}}function Ya(r,e,t){return new Promise((i,n)=>L(this,null,function*(){let a=setTimeout(()=>n(new Error(t)),e);try{let c=yield r;i(c)}catch(c){n(c)}clearTimeout(a)}))}function Iw(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function Mw(r){return Iw("topic",r)}function Dw(r){return Iw("id",r)}function el(r){let[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function dr(r,e){return(0,Ls.fromMiliseconds)((e||Date.now())+(0,Ls.toMiliseconds)(r))}function Jn(r){return Date.now()>=(0,Ls.toMiliseconds)(r)}function We(r,e){return`${r}${e?`:${e}`:""}`}function Of(r=[],e=[]){return[...new Set([...r,...e])]}function Rw(i){return L(this,arguments,function*({id:r,topic:e,wcDeepLink:t}){var n;try{if(!t)return;let a=typeof t=="string"?JSON.parse(t):t,c=a?.href;if(typeof c!="string")return;let u=CO(c,r,e),p=Cf();if(p===pi.browser){if(!((n=(0,qs.getDocument)())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}u.startsWith("https://")||u.startsWith("http://")?window.open(u,"_blank","noreferrer noopener"):window.open(u,OO()?"_blank":"_self","noreferrer noopener")}else p===pi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&(yield global.Linking.openURL(u))}catch(a){console.error(a)}})}function CO(r,e,t){let i=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let n=`${r}`;if(r.startsWith("https://t.me")){let a=r.includes("?")?"&startapp=":"?startapp=";n=`${n}${a}${NO(i,!0)}`}else n=`${n}/wc?${i}`;return n}function Pw(r,e){return L(this,null,function*(){let t="";try{if(sc()&&(t=localStorage.getItem(e),t))return t;t=yield r.getItem(e)}catch(i){console.error(i)}return t})}function y1(r,e){if(!r.includes(e))return null;let t=r.split(/([&,?,=])/),i=t.indexOf(e);return t[i+2]}function w1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{let e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function Nf(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function OO(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function NO(r,e=!1){let t=Buffer.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function Cw(r){return Buffer.from(r,"base64").toString("utf-8")}var Ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TO(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var Nw={exports:{}};(function(r){(function(){var e="input is invalid type",t="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",c=!n.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;c?n=Ow:a&&(n=self);var u=!n.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,p=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),m=[31,7936,2031616,520093696],w=[4,1024,262144,67108864],R=[1,256,65536,16777216],I=[6,1536,393216,100663296],O=[0,8,16,24],B=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],F=[224,256,384,512],z=[128,256],Y=["hex","buffer","arrayBuffer","array","digest"],$={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(D){return Object.prototype.toString.call(D)==="[object Array]"}),p&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(D){return typeof D=="object"&&D.buffer&&D.buffer.constructor===ArrayBuffer});for(var K=function(D,V,G){return function(J){return new N(D,V,D).update(J)[G]()}},X=function(D,V,G){return function(J,ie){return new N(D,V,ie).update(J)[G]()}},te=function(D,V,G){return function(J,ie,fe,se){return l["cshake"+D].update(J,ie,fe,se)[G]()}},k=function(D,V,G){return function(J,ie,fe,se){return l["kmac"+D].update(J,ie,fe,se)[G]()}},U=function(D,V,G,J){for(var ie=0;ie<Y.length;++ie){var fe=Y[ie];D[fe]=V(G,J,fe)}return D},ae=function(D,V){var G=K(D,V,"hex");return G.create=function(){return new N(D,V,D)},G.update=function(J){return G.create().update(J)},U(G,K,D,V)},P=function(D,V){var G=X(D,V,"hex");return G.create=function(J){return new N(D,V,J)},G.update=function(J,ie){return G.create(ie).update(J)},U(G,X,D,V)},d=function(D,V){var G=$[D],J=te(D,V,"hex");return J.create=function(ie,fe,se){return!fe&&!se?l["shake"+D].create(ie):new N(D,V,ie).bytepad([fe,se],G)},J.update=function(ie,fe,se,ce){return J.create(fe,se,ce).update(ie)},U(J,te,D,V)},_=function(D,V){var G=$[D],J=k(D,V,"hex");return J.create=function(ie,fe,se){return new Z(D,V,fe).bytepad(["KMAC",se],G).bytepad([ie],G)},J.update=function(ie,fe,se,ce){return J.create(ie,se,ce).update(fe)},U(J,k,D,V)},f=[{name:"keccak",padding:R,bits:F,createMethod:ae},{name:"sha3",padding:I,bits:F,createMethod:ae},{name:"shake",padding:m,bits:z,createMethod:P},{name:"cshake",padding:w,bits:z,createMethod:d},{name:"kmac",padding:w,bits:z,createMethod:_}],l={},b=[],S=0;S<f.length;++S)for(var M=f[S],A=M.bits,v=0;v<A.length;++v){var x=M.name+"_"+A[v];if(b.push(x),l[x]=M.createMethod(A[v],M.padding),M.name!=="sha3"){var y=M.name+A[v];b.push(y),l[y]=l[x]}}function N(D,V,G){this.blocks=[],this.s=[],this.padding=V,this.outputBits=G,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(D<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=G>>5,this.extraBytes=(G&31)>>3;for(var J=0;J<50;++J)this.s[J]=0}N.prototype.update=function(D){if(this.finalized)throw new Error(t);var V,G=typeof D;if(G!=="string"){if(G==="object"){if(D===null)throw new Error(e);if(p&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!p||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);V=!0}for(var J=this.blocks,ie=this.byteCount,fe=D.length,se=this.blockCount,ce=0,pe=this.s,ne,de;ce<fe;){if(this.reset)for(this.reset=!1,J[0]=this.block,ne=1;ne<se+1;++ne)J[ne]=0;if(V)for(ne=this.start;ce<fe&&ne<ie;++ce)J[ne>>2]|=D[ce]<<O[ne++&3];else for(ne=this.start;ce<fe&&ne<ie;++ce)de=D.charCodeAt(ce),de<128?J[ne>>2]|=de<<O[ne++&3]:de<2048?(J[ne>>2]|=(192|de>>6)<<O[ne++&3],J[ne>>2]|=(128|de&63)<<O[ne++&3]):de<55296||de>=57344?(J[ne>>2]|=(224|de>>12)<<O[ne++&3],J[ne>>2]|=(128|de>>6&63)<<O[ne++&3],J[ne>>2]|=(128|de&63)<<O[ne++&3]):(de=65536+((de&1023)<<10|D.charCodeAt(++ce)&1023),J[ne>>2]|=(240|de>>18)<<O[ne++&3],J[ne>>2]|=(128|de>>12&63)<<O[ne++&3],J[ne>>2]|=(128|de>>6&63)<<O[ne++&3],J[ne>>2]|=(128|de&63)<<O[ne++&3]);if(this.lastByteIndex=ne,ne>=ie){for(this.start=ne-ie,this.block=J[se],ne=0;ne<se;++ne)pe[ne]^=J[ne];ee(pe),this.reset=!0}else this.start=ne}return this},N.prototype.encode=function(D,V){var G=D&255,J=1,ie=[G];for(D=D>>8,G=D&255;G>0;)ie.unshift(G),D=D>>8,G=D&255,++J;return V?ie.push(J):ie.unshift(J),this.update(ie),ie.length},N.prototype.encodeString=function(D){var V,G=typeof D;if(G!=="string"){if(G==="object"){if(D===null)throw new Error(e);if(p&&D.constructor===ArrayBuffer)D=new Uint8Array(D);else if(!Array.isArray(D)&&(!p||!ArrayBuffer.isView(D)))throw new Error(e)}else throw new Error(e);V=!0}var J=0,ie=D.length;if(V)J=ie;else for(var fe=0;fe<D.length;++fe){var se=D.charCodeAt(fe);se<128?J+=1:se<2048?J+=2:se<55296||se>=57344?J+=3:(se=65536+((se&1023)<<10|D.charCodeAt(++fe)&1023),J+=4)}return J+=this.encode(J*8),this.update(D),J},N.prototype.bytepad=function(D,V){for(var G=this.encode(V),J=0;J<D.length;++J)G+=this.encodeString(D[J]);var ie=V-G%V,fe=[];return fe.length=ie,this.update(fe),this},N.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var D=this.blocks,V=this.lastByteIndex,G=this.blockCount,J=this.s;if(D[V>>2]|=this.padding[V&3],this.lastByteIndex===this.byteCount)for(D[0]=D[G],V=1;V<G+1;++V)D[V]=0;for(D[G-1]|=2147483648,V=0;V<G;++V)J[V]^=D[V];ee(J)}},N.prototype.toString=N.prototype.hex=function(){this.finalize();for(var D=this.blockCount,V=this.s,G=this.outputBlocks,J=this.extraBytes,ie=0,fe=0,se="",ce;fe<G;){for(ie=0;ie<D&&fe<G;++ie,++fe)ce=V[ie],se+=g[ce>>4&15]+g[ce&15]+g[ce>>12&15]+g[ce>>8&15]+g[ce>>20&15]+g[ce>>16&15]+g[ce>>28&15]+g[ce>>24&15];fe%D===0&&(ee(V),ie=0)}return J&&(ce=V[ie],se+=g[ce>>4&15]+g[ce&15],J>1&&(se+=g[ce>>12&15]+g[ce>>8&15]),J>2&&(se+=g[ce>>20&15]+g[ce>>16&15])),se},N.prototype.arrayBuffer=function(){this.finalize();var D=this.blockCount,V=this.s,G=this.outputBlocks,J=this.extraBytes,ie=0,fe=0,se=this.outputBits>>3,ce;J?ce=new ArrayBuffer(G+1<<2):ce=new ArrayBuffer(se);for(var pe=new Uint32Array(ce);fe<G;){for(ie=0;ie<D&&fe<G;++ie,++fe)pe[fe]=V[ie];fe%D===0&&ee(V)}return J&&(pe[ie]=V[ie],ce=ce.slice(0,se)),ce},N.prototype.buffer=N.prototype.arrayBuffer,N.prototype.digest=N.prototype.array=function(){this.finalize();for(var D=this.blockCount,V=this.s,G=this.outputBlocks,J=this.extraBytes,ie=0,fe=0,se=[],ce,pe;fe<G;){for(ie=0;ie<D&&fe<G;++ie,++fe)ce=fe<<2,pe=V[ie],se[ce]=pe&255,se[ce+1]=pe>>8&255,se[ce+2]=pe>>16&255,se[ce+3]=pe>>24&255;fe%D===0&&ee(V)}return J&&(ce=fe<<2,pe=V[ie],se[ce]=pe&255,J>1&&(se[ce+1]=pe>>8&255),J>2&&(se[ce+2]=pe>>16&255)),se};function Z(D,V,G){N.call(this,D,V,G)}Z.prototype=new N,Z.prototype.finalize=function(){return this.encode(this.outputBits,!0),N.prototype.finalize.call(this)};var ee=function(D){var V,G,J,ie,fe,se,ce,pe,ne,de,_t,_e,vt,Et,xe,Ve,nt,Ae,xt,st,Le,at,rt,Me,ct,ft,De,ut,ht,Re,lt,dt,qe,At,St,Ne,bt,It,Be,Mt,Dt,Te,Rt,Pt,Fe,pt,Ct,Pe,Ot,Nt,Ue,Tt,Lt,ze,qt,mt,gt,ei,ti,ri,ii,ni,si;for(J=0;J<48;J+=2)ie=D[0]^D[10]^D[20]^D[30]^D[40],fe=D[1]^D[11]^D[21]^D[31]^D[41],se=D[2]^D[12]^D[22]^D[32]^D[42],ce=D[3]^D[13]^D[23]^D[33]^D[43],pe=D[4]^D[14]^D[24]^D[34]^D[44],ne=D[5]^D[15]^D[25]^D[35]^D[45],de=D[6]^D[16]^D[26]^D[36]^D[46],_t=D[7]^D[17]^D[27]^D[37]^D[47],_e=D[8]^D[18]^D[28]^D[38]^D[48],vt=D[9]^D[19]^D[29]^D[39]^D[49],V=_e^(se<<1|ce>>>31),G=vt^(ce<<1|se>>>31),D[0]^=V,D[1]^=G,D[10]^=V,D[11]^=G,D[20]^=V,D[21]^=G,D[30]^=V,D[31]^=G,D[40]^=V,D[41]^=G,V=ie^(pe<<1|ne>>>31),G=fe^(ne<<1|pe>>>31),D[2]^=V,D[3]^=G,D[12]^=V,D[13]^=G,D[22]^=V,D[23]^=G,D[32]^=V,D[33]^=G,D[42]^=V,D[43]^=G,V=se^(de<<1|_t>>>31),G=ce^(_t<<1|de>>>31),D[4]^=V,D[5]^=G,D[14]^=V,D[15]^=G,D[24]^=V,D[25]^=G,D[34]^=V,D[35]^=G,D[44]^=V,D[45]^=G,V=pe^(_e<<1|vt>>>31),G=ne^(vt<<1|_e>>>31),D[6]^=V,D[7]^=G,D[16]^=V,D[17]^=G,D[26]^=V,D[27]^=G,D[36]^=V,D[37]^=G,D[46]^=V,D[47]^=G,V=de^(ie<<1|fe>>>31),G=_t^(fe<<1|ie>>>31),D[8]^=V,D[9]^=G,D[18]^=V,D[19]^=G,D[28]^=V,D[29]^=G,D[38]^=V,D[39]^=G,D[48]^=V,D[49]^=G,Et=D[0],xe=D[1],pt=D[11]<<4|D[10]>>>28,Ct=D[10]<<4|D[11]>>>28,ut=D[20]<<3|D[21]>>>29,ht=D[21]<<3|D[20]>>>29,ri=D[31]<<9|D[30]>>>23,ii=D[30]<<9|D[31]>>>23,Te=D[40]<<18|D[41]>>>14,Rt=D[41]<<18|D[40]>>>14,At=D[2]<<1|D[3]>>>31,St=D[3]<<1|D[2]>>>31,Ve=D[13]<<12|D[12]>>>20,nt=D[12]<<12|D[13]>>>20,Pe=D[22]<<10|D[23]>>>22,Ot=D[23]<<10|D[22]>>>22,Re=D[33]<<13|D[32]>>>19,lt=D[32]<<13|D[33]>>>19,ni=D[42]<<2|D[43]>>>30,si=D[43]<<2|D[42]>>>30,ze=D[5]<<30|D[4]>>>2,qt=D[4]<<30|D[5]>>>2,Ne=D[14]<<6|D[15]>>>26,bt=D[15]<<6|D[14]>>>26,Ae=D[25]<<11|D[24]>>>21,xt=D[24]<<11|D[25]>>>21,Nt=D[34]<<15|D[35]>>>17,Ue=D[35]<<15|D[34]>>>17,dt=D[45]<<29|D[44]>>>3,qe=D[44]<<29|D[45]>>>3,Me=D[6]<<28|D[7]>>>4,ct=D[7]<<28|D[6]>>>4,mt=D[17]<<23|D[16]>>>9,gt=D[16]<<23|D[17]>>>9,It=D[26]<<25|D[27]>>>7,Be=D[27]<<25|D[26]>>>7,st=D[36]<<21|D[37]>>>11,Le=D[37]<<21|D[36]>>>11,Tt=D[47]<<24|D[46]>>>8,Lt=D[46]<<24|D[47]>>>8,Pt=D[8]<<27|D[9]>>>5,Fe=D[9]<<27|D[8]>>>5,ft=D[18]<<20|D[19]>>>12,De=D[19]<<20|D[18]>>>12,ei=D[29]<<7|D[28]>>>25,ti=D[28]<<7|D[29]>>>25,Mt=D[38]<<8|D[39]>>>24,Dt=D[39]<<8|D[38]>>>24,at=D[48]<<14|D[49]>>>18,rt=D[49]<<14|D[48]>>>18,D[0]=Et^~Ve&Ae,D[1]=xe^~nt&xt,D[10]=Me^~ft&ut,D[11]=ct^~De&ht,D[20]=At^~Ne&It,D[21]=St^~bt&Be,D[30]=Pt^~pt&Pe,D[31]=Fe^~Ct&Ot,D[40]=ze^~mt&ei,D[41]=qt^~gt&ti,D[2]=Ve^~Ae&st,D[3]=nt^~xt&Le,D[12]=ft^~ut&Re,D[13]=De^~ht&lt,D[22]=Ne^~It&Mt,D[23]=bt^~Be&Dt,D[32]=pt^~Pe&Nt,D[33]=Ct^~Ot&Ue,D[42]=mt^~ei&ri,D[43]=gt^~ti&ii,D[4]=Ae^~st&at,D[5]=xt^~Le&rt,D[14]=ut^~Re&dt,D[15]=ht^~lt&qe,D[24]=It^~Mt&Te,D[25]=Be^~Dt&Rt,D[34]=Pe^~Nt&Tt,D[35]=Ot^~Ue&Lt,D[44]=ei^~ri&ni,D[45]=ti^~ii&si,D[6]=st^~at&Et,D[7]=Le^~rt&xe,D[16]=Re^~dt&Me,D[17]=lt^~qe&ct,D[26]=Mt^~Te&At,D[27]=Dt^~Rt&St,D[36]=Nt^~Tt&Pt,D[37]=Ue^~Lt&Fe,D[46]=ri^~ni&ze,D[47]=ii^~si&qt,D[8]=at^~Et&Ve,D[9]=rt^~xe&nt,D[18]=dt^~Me&ft,D[19]=qe^~ct&De,D[28]=Te^~At&Ne,D[29]=Rt^~St&bt,D[38]=Tt^~Pt&pt,D[39]=Lt^~Fe&Ct,D[48]=ni^~ze&mt,D[49]=si^~qt&gt,D[0]^=B[J],D[1]^=B[J+1]};if(u)r.exports=l;else for(S=0;S<b.length;++S)n[b[S]]=l[b[S]]})()})(Nw);var LO=Nw.exports,qO="logger/5.7.0",V6=!1,G6=!1,Hh={debug:1,default:2,info:2,warning:3,error:4,off:5},$6=Hh.default,$p=null;function BO(){try{let r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken implementation")}catch(r){return r.message}return null}var J6=BO(),c1;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(c1||(c1={}));var un;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(un||(un={}));var W6="0123456789abcdef",Xt=class r{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){let i=e.toLowerCase();Hh[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!($6>Hh[i])&&console.log.apply(console,t)}debug(...e){this._log(r.levels.DEBUG,e)}info(...e){this._log(r.levels.INFO,e)}warn(...e){this._log(r.levels.WARNING,e)}makeError(e,t,i){if(G6)return this.makeError("censored error",t,{});t||(t=r.errors.UNKNOWN_ERROR),i||(i={});let n=[];Object.keys(i).forEach(p=>{let g=i[p];try{if(g instanceof Uint8Array){let m="";for(let w=0;w<g.length;w++)m+=W6[g[w]>>4],m+=W6[g[w]&15];n.push(p+"=Uint8Array(0x"+m+")")}else n.push(p+"="+JSON.stringify(g))}catch{n.push(p+"="+JSON.stringify(i[p].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);let a=e,c="";switch(t){case un.NUMERIC_FAULT:{c="NUMERIC_FAULT";let p=e;switch(p){case"overflow":case"underflow":case"division-by-zero":c+="-"+p;break;case"negative-power":case"negative-width":c+="-unsupported";break;case"unbound-bitwise-result":c+="-unbound-result";break}break}case un.CALL_EXCEPTION:case un.INSUFFICIENT_FUNDS:case un.MISSING_NEW:case un.NONCE_EXPIRED:case un.REPLACEMENT_UNDERPRICED:case un.TRANSACTION_REPLACED:case un.UNPREDICTABLE_GAS_LIMIT:c=t;break}c&&(e+=" [ See: https://links.ethers.org/v5-errors-"+c+" ]"),n.length&&(e+=" ("+n.join(", ")+")");let u=new Error(e);return u.reason=a,u.code=t,Object.keys(i).forEach(function(p){u[p]=i[p]}),u}throwError(e,t,i){throw this.makeError(e,t,i)}throwArgumentError(e,t,i){return this.throwError(e,r.errors.INVALID_ARGUMENT,{argument:t,value:i})}assert(e,t,i,n){e||this.throwError(t,i,n)}assertArgument(e,t,i,n){e||this.throwArgumentError(t,i,n)}checkNormalize(e){J6&&this.throwError("platform missing String.prototype.normalize",r.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:J6})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,r.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,r.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,i){i?i=": "+i:i="",e<t&&this.throwError("missing argument"+i,r.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+i,r.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",r.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",r.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",r.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return $p||($p=new r(qO)),$p}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",r.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),V6){if(!e)return;this.globalLogger().throwError("error censorship permanent",r.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}G6=!!e,V6=!!t}static setLogLevel(e){let t=Hh[e.toLowerCase()];if(t==null){r.globalLogger().warn("invalid log level - "+e);return}$6=t}static from(e){return new r(e)}};Xt.errors=un,Xt.levels=c1;var FO="bytes/5.7.0",lr=new Xt(FO);function Tw(r){return!!r.toHexString}function Xo(r){return r.slice||(r.slice=function(){let e=Array.prototype.slice.call(arguments);return Xo(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function UO(r){return Ii(r)&&!(r.length%2)||ac(r)}function Y6(r){return typeof r=="number"&&r==r&&r%1===0}function ac(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!Y6(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){let t=r[e];if(!Y6(t)||t<0||t>=256)return!1}return!0}function ar(r,e){if(e||(e={}),typeof r=="number"){lr.checkSafeUint53(r,"invalid arrayify value");let t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Xo(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),Tw(r)&&(r=r.toHexString()),Ii(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":lr.throwArgumentError("hex data is odd-length","value",r));let i=[];for(let n=0;n<t.length;n+=2)i.push(parseInt(t.substring(n,n+2),16));return Xo(new Uint8Array(i))}return ac(r)?Xo(new Uint8Array(r)):lr.throwArgumentError("invalid arrayify value","value",r)}function zO(r){let e=r.map(n=>ar(n)),t=e.reduce((n,a)=>n+a.length,0),i=new Uint8Array(t);return e.reduce((n,a)=>(i.set(a,n),n+a.length),0),Xo(i)}function kO(r,e){r=ar(r),r.length>e&&lr.throwArgumentError("value out of range","value",arguments[0]);let t=new Uint8Array(e);return t.set(r,e-r.length),Xo(t)}function Ii(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}var Jp="0123456789abcdef";function Wr(r,e){if(e||(e={}),typeof r=="number"){lr.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Jp[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),Tw(r))return r.toHexString();if(Ii(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":lr.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(ac(r)){let t="0x";for(let i=0;i<r.length;i++){let n=r[i];t+=Jp[(n&240)>>4]+Jp[n&15]}return t}return lr.throwArgumentError("invalid hexlify value","value",r)}function jO(r){if(typeof r!="string")r=Wr(r);else if(!Ii(r)||r.length%2)return null;return(r.length-2)/2}function Q6(r,e,t){return typeof r!="string"?r=Wr(r):(!Ii(r)||r.length%2)&&lr.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function Kn(r,e){for(typeof r!="string"?r=Wr(r):Ii(r)||lr.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&lr.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function Lw(r){let e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(UO(r)){let t=ar(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Wr(t.slice(0,32)),e.s=Wr(t.slice(32,64))):t.length===65?(e.r=Wr(t.slice(0,32)),e.s=Wr(t.slice(32,64)),e.v=t[64]):lr.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:lr.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Wr(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){let n=kO(ar(e._vs),32);e._vs=Wr(n);let a=n[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=a:e.recoveryParam!==a&&lr.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),n[0]&=127;let c=Wr(n);e.s==null?e.s=c:e.s!==c&&lr.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?lr.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{let n=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==n&&lr.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!Ii(e.r)?lr.throwArgumentError("signature missing or invalid r","signature",r):e.r=Kn(e.r,32),e.s==null||!Ii(e.s)?lr.throwArgumentError("signature missing or invalid s","signature",r):e.s=Kn(e.s,32);let t=ar(e.s);t[0]>=128&&lr.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);let i=Wr(t);e._vs&&(Ii(e._vs)||lr.throwArgumentError("signature invalid _vs","signature",r),e._vs=Kn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&lr.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function _1(r){return"0x"+LO.keccak_256(ar(r))}var qw={exports:{}},HO={},KO=Object.freeze({__proto__:null,default:HO}),VO=TO(KO);(function(r){(function(e,t){function i(f,l){if(!f)throw new Error(l||"Assertion failed")}function n(f,l){f.super_=l;var b=function(){};b.prototype=l.prototype,f.prototype=new b,f.prototype.constructor=f}function a(f,l,b){if(a.isBN(f))return f;this.negative=0,this.words=null,this.length=0,this.red=null,f!==null&&((l==="le"||l==="be")&&(b=l,l=10),this._init(f||0,l||10,b||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=VO.Buffer}catch{}a.isBN=function(f){return f instanceof a?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===a.wordSize&&Array.isArray(f.words)},a.max=function(f,l){return f.cmp(l)>0?f:l},a.min=function(f,l){return f.cmp(l)<0?f:l},a.prototype._init=function(f,l,b){if(typeof f=="number")return this._initNumber(f,l,b);if(typeof f=="object")return this._initArray(f,l,b);l==="hex"&&(l=16),i(l===(l|0)&&l>=2&&l<=36),f=f.toString().replace(/\s+/g,"");var S=0;f[0]==="-"&&(S++,this.negative=1),S<f.length&&(l===16?this._parseHex(f,S,b):(this._parseBase(f,l,S),b==="le"&&this._initArray(this.toArray(),l,b)))},a.prototype._initNumber=function(f,l,b){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(i(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),l,b)},a.prototype._initArray=function(f,l,b){if(i(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var M,A,v=0;if(b==="be")for(S=f.length-1,M=0;S>=0;S-=3)A=f[S]|f[S-1]<<8|f[S-2]<<16,this.words[M]|=A<<v&67108863,this.words[M+1]=A>>>26-v&67108863,v+=24,v>=26&&(v-=26,M++);else if(b==="le")for(S=0,M=0;S<f.length;S+=3)A=f[S]|f[S+1]<<8|f[S+2]<<16,this.words[M]|=A<<v&67108863,this.words[M+1]=A>>>26-v&67108863,v+=24,v>=26&&(v-=26,M++);return this._strip()};function u(f,l){var b=f.charCodeAt(l);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;i(!1,"Invalid character in "+f)}function p(f,l,b){var S=u(f,b);return b-1>=l&&(S|=u(f,b-1)<<4),S}a.prototype._parseHex=function(f,l,b){this.length=Math.ceil((f.length-l)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var M=0,A=0,v;if(b==="be")for(S=f.length-1;S>=l;S-=2)v=p(f,l,S)<<M,this.words[A]|=v&67108863,M>=18?(M-=18,A+=1,this.words[A]|=v>>>26):M+=8;else{var x=f.length-l;for(S=x%2===0?l+1:l;S<f.length;S+=2)v=p(f,l,S)<<M,this.words[A]|=v&67108863,M>=18?(M-=18,A+=1,this.words[A]|=v>>>26):M+=8}this._strip()};function g(f,l,b,S){for(var M=0,A=0,v=Math.min(f.length,b),x=l;x<v;x++){var y=f.charCodeAt(x)-48;M*=S,y>=49?A=y-49+10:y>=17?A=y-17+10:A=y,i(y>=0&&A<S,"Invalid character"),M+=A}return M}a.prototype._parseBase=function(f,l,b){this.words=[0],this.length=1;for(var S=0,M=1;M<=67108863;M*=l)S++;S--,M=M/l|0;for(var A=f.length-b,v=A%S,x=Math.min(A,A-v)+b,y=0,N=b;N<x;N+=S)y=g(f,N,N+S,l),this.imuln(M),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(v!==0){var Z=1;for(y=g(f,N,f.length,l),N=0;N<v;N++)Z*=l;this.imuln(Z),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},a.prototype.copy=function(f){f.words=new Array(this.length);for(var l=0;l<this.length;l++)f.words[l]=this.words[l];f.length=this.length,f.negative=this.negative,f.red=this.red};function m(f,l){f.words=l.words,f.length=l.length,f.negative=l.negative,f.red=l.red}if(a.prototype._move=function(f){m(f,this)},a.prototype.clone=function(){var f=new a(null);return this.copy(f),f},a.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{a.prototype.inspect=w}else a.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var R=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(f,l){f=f||10,l=l|0||1;var b;if(f===16||f==="hex"){b="";for(var S=0,M=0,A=0;A<this.length;A++){var v=this.words[A],x=((v<<S|M)&16777215).toString(16);M=v>>>24-S&16777215,S+=2,S>=26&&(S-=26,A--),M!==0||A!==this.length-1?b=R[6-x.length]+x+b:b=x+b}for(M!==0&&(b=M.toString(16)+b);b.length%l!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(f===(f|0)&&f>=2&&f<=36){var y=I[f],N=O[f];b="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var ee=Z.modrn(N).toString(f);Z=Z.idivn(N),Z.isZero()?b=ee+b:b=R[y-ee.length]+ee+b}for(this.isZero()&&(b="0"+b);b.length%l!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},a.prototype.toJSON=function(){return this.toString(16,2)},c&&(a.prototype.toBuffer=function(f,l){return this.toArrayLike(c,f,l)}),a.prototype.toArray=function(f,l){return this.toArrayLike(Array,f,l)};var B=function(f,l){return f.allocUnsafe?f.allocUnsafe(l):new f(l)};a.prototype.toArrayLike=function(f,l,b){this._strip();var S=this.byteLength(),M=b||Math.max(1,S);i(S<=M,"byte array longer than desired length"),i(M>0,"Requested array length <= 0");var A=B(f,M),v=l==="le"?"LE":"BE";return this["_toArrayLike"+v](A,S),A},a.prototype._toArrayLikeLE=function(f,l){for(var b=0,S=0,M=0,A=0;M<this.length;M++){var v=this.words[M]<<A|S;f[b++]=v&255,b<f.length&&(f[b++]=v>>8&255),b<f.length&&(f[b++]=v>>16&255),A===6?(b<f.length&&(f[b++]=v>>24&255),S=0,A=0):(S=v>>>24,A+=2)}if(b<f.length)for(f[b++]=S;b<f.length;)f[b++]=0},a.prototype._toArrayLikeBE=function(f,l){for(var b=f.length-1,S=0,M=0,A=0;M<this.length;M++){var v=this.words[M]<<A|S;f[b--]=v&255,b>=0&&(f[b--]=v>>8&255),b>=0&&(f[b--]=v>>16&255),A===6?(b>=0&&(f[b--]=v>>24&255),S=0,A=0):(S=v>>>24,A+=2)}if(b>=0)for(f[b--]=S;b>=0;)f[b--]=0},Math.clz32?a.prototype._countBits=function(f){return 32-Math.clz32(f)}:a.prototype._countBits=function(f){var l=f,b=0;return l>=4096&&(b+=13,l>>>=13),l>=64&&(b+=7,l>>>=7),l>=8&&(b+=4,l>>>=4),l>=2&&(b+=2,l>>>=2),b+l},a.prototype._zeroBits=function(f){if(f===0)return 26;var l=f,b=0;return l&8191||(b+=13,l>>>=13),l&127||(b+=7,l>>>=7),l&15||(b+=4,l>>>=4),l&3||(b+=2,l>>>=2),l&1||b++,b},a.prototype.bitLength=function(){var f=this.words[this.length-1],l=this._countBits(f);return(this.length-1)*26+l};function F(f){for(var l=new Array(f.bitLength()),b=0;b<l.length;b++){var S=b/26|0,M=b%26;l[b]=f.words[S]>>>M&1}return l}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,l=0;l<this.length;l++){var b=this._zeroBits(this.words[l]);if(f+=b,b!==26)break}return f},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},a.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]|f.words[l];return this._strip()},a.prototype.ior=function(f){return i((this.negative|f.negative)===0),this.iuor(f)},a.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},a.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},a.prototype.iuand=function(f){var l;this.length>f.length?l=f:l=this;for(var b=0;b<l.length;b++)this.words[b]=this.words[b]&f.words[b];return this.length=l.length,this._strip()},a.prototype.iand=function(f){return i((this.negative|f.negative)===0),this.iuand(f)},a.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},a.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},a.prototype.iuxor=function(f){var l,b;this.length>f.length?(l=this,b=f):(l=f,b=this);for(var S=0;S<b.length;S++)this.words[S]=l.words[S]^b.words[S];if(this!==l)for(;S<l.length;S++)this.words[S]=l.words[S];return this.length=l.length,this._strip()},a.prototype.ixor=function(f){return i((this.negative|f.negative)===0),this.iuxor(f)},a.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},a.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},a.prototype.inotn=function(f){i(typeof f=="number"&&f>=0);var l=Math.ceil(f/26)|0,b=f%26;this._expand(l),b>0&&l--;for(var S=0;S<l;S++)this.words[S]=~this.words[S]&67108863;return b>0&&(this.words[S]=~this.words[S]&67108863>>26-b),this._strip()},a.prototype.notn=function(f){return this.clone().inotn(f)},a.prototype.setn=function(f,l){i(typeof f=="number"&&f>=0);var b=f/26|0,S=f%26;return this._expand(b+1),l?this.words[b]=this.words[b]|1<<S:this.words[b]=this.words[b]&~(1<<S),this._strip()},a.prototype.iadd=function(f){var l;if(this.negative!==0&&f.negative===0)return this.negative=0,l=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,l=this.isub(f),f.negative=1,l._normSign();var b,S;this.length>f.length?(b=this,S=f):(b=f,S=this);for(var M=0,A=0;A<S.length;A++)l=(b.words[A]|0)+(S.words[A]|0)+M,this.words[A]=l&67108863,M=l>>>26;for(;M!==0&&A<b.length;A++)l=(b.words[A]|0)+M,this.words[A]=l&67108863,M=l>>>26;if(this.length=b.length,M!==0)this.words[this.length]=M,this.length++;else if(b!==this)for(;A<b.length;A++)this.words[A]=b.words[A];return this},a.prototype.add=function(f){var l;return f.negative!==0&&this.negative===0?(f.negative=0,l=this.sub(f),f.negative^=1,l):f.negative===0&&this.negative!==0?(this.negative=0,l=f.sub(this),this.negative=1,l):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},a.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var l=this.iadd(f);return f.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var b=this.cmp(f);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,M;b>0?(S=this,M=f):(S=f,M=this);for(var A=0,v=0;v<M.length;v++)l=(S.words[v]|0)-(M.words[v]|0)+A,A=l>>26,this.words[v]=l&67108863;for(;A!==0&&v<S.length;v++)l=(S.words[v]|0)+A,A=l>>26,this.words[v]=l&67108863;if(A===0&&v<S.length&&S!==this)for(;v<S.length;v++)this.words[v]=S.words[v];return this.length=Math.max(this.length,v),S!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(f){return this.clone().isub(f)};function z(f,l,b){b.negative=l.negative^f.negative;var S=f.length+l.length|0;b.length=S,S=S-1|0;var M=f.words[0]|0,A=l.words[0]|0,v=M*A,x=v&67108863,y=v/67108864|0;b.words[0]=x;for(var N=1;N<S;N++){for(var Z=y>>>26,ee=y&67108863,D=Math.min(N,l.length-1),V=Math.max(0,N-f.length+1);V<=D;V++){var G=N-V|0;M=f.words[G]|0,A=l.words[V]|0,v=M*A+ee,Z+=v/67108864|0,ee=v&67108863}b.words[N]=ee|0,y=Z|0}return y!==0?b.words[N]=y|0:b.length--,b._strip()}var Y=function(f,l,b){var S=f.words,M=l.words,A=b.words,v=0,x,y,N,Z=S[0]|0,ee=Z&8191,D=Z>>>13,V=S[1]|0,G=V&8191,J=V>>>13,ie=S[2]|0,fe=ie&8191,se=ie>>>13,ce=S[3]|0,pe=ce&8191,ne=ce>>>13,de=S[4]|0,_t=de&8191,_e=de>>>13,vt=S[5]|0,Et=vt&8191,xe=vt>>>13,Ve=S[6]|0,nt=Ve&8191,Ae=Ve>>>13,xt=S[7]|0,st=xt&8191,Le=xt>>>13,at=S[8]|0,rt=at&8191,Me=at>>>13,ct=S[9]|0,ft=ct&8191,De=ct>>>13,ut=M[0]|0,ht=ut&8191,Re=ut>>>13,lt=M[1]|0,dt=lt&8191,qe=lt>>>13,At=M[2]|0,St=At&8191,Ne=At>>>13,bt=M[3]|0,It=bt&8191,Be=bt>>>13,Mt=M[4]|0,Dt=Mt&8191,Te=Mt>>>13,Rt=M[5]|0,Pt=Rt&8191,Fe=Rt>>>13,pt=M[6]|0,Ct=pt&8191,Pe=pt>>>13,Ot=M[7]|0,Nt=Ot&8191,Ue=Ot>>>13,Tt=M[8]|0,Lt=Tt&8191,ze=Tt>>>13,qt=M[9]|0,mt=qt&8191,gt=qt>>>13;b.negative=f.negative^l.negative,b.length=19,x=Math.imul(ee,ht),y=Math.imul(ee,Re),y=y+Math.imul(D,ht)|0,N=Math.imul(D,Re);var ei=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(ei>>>26)|0,ei&=67108863,x=Math.imul(G,ht),y=Math.imul(G,Re),y=y+Math.imul(J,ht)|0,N=Math.imul(J,Re),x=x+Math.imul(ee,dt)|0,y=y+Math.imul(ee,qe)|0,y=y+Math.imul(D,dt)|0,N=N+Math.imul(D,qe)|0;var ti=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(ti>>>26)|0,ti&=67108863,x=Math.imul(fe,ht),y=Math.imul(fe,Re),y=y+Math.imul(se,ht)|0,N=Math.imul(se,Re),x=x+Math.imul(G,dt)|0,y=y+Math.imul(G,qe)|0,y=y+Math.imul(J,dt)|0,N=N+Math.imul(J,qe)|0,x=x+Math.imul(ee,St)|0,y=y+Math.imul(ee,Ne)|0,y=y+Math.imul(D,St)|0,N=N+Math.imul(D,Ne)|0;var ri=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(ri>>>26)|0,ri&=67108863,x=Math.imul(pe,ht),y=Math.imul(pe,Re),y=y+Math.imul(ne,ht)|0,N=Math.imul(ne,Re),x=x+Math.imul(fe,dt)|0,y=y+Math.imul(fe,qe)|0,y=y+Math.imul(se,dt)|0,N=N+Math.imul(se,qe)|0,x=x+Math.imul(G,St)|0,y=y+Math.imul(G,Ne)|0,y=y+Math.imul(J,St)|0,N=N+Math.imul(J,Ne)|0,x=x+Math.imul(ee,It)|0,y=y+Math.imul(ee,Be)|0,y=y+Math.imul(D,It)|0,N=N+Math.imul(D,Be)|0;var ii=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(ii>>>26)|0,ii&=67108863,x=Math.imul(_t,ht),y=Math.imul(_t,Re),y=y+Math.imul(_e,ht)|0,N=Math.imul(_e,Re),x=x+Math.imul(pe,dt)|0,y=y+Math.imul(pe,qe)|0,y=y+Math.imul(ne,dt)|0,N=N+Math.imul(ne,qe)|0,x=x+Math.imul(fe,St)|0,y=y+Math.imul(fe,Ne)|0,y=y+Math.imul(se,St)|0,N=N+Math.imul(se,Ne)|0,x=x+Math.imul(G,It)|0,y=y+Math.imul(G,Be)|0,y=y+Math.imul(J,It)|0,N=N+Math.imul(J,Be)|0,x=x+Math.imul(ee,Dt)|0,y=y+Math.imul(ee,Te)|0,y=y+Math.imul(D,Dt)|0,N=N+Math.imul(D,Te)|0;var ni=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(ni>>>26)|0,ni&=67108863,x=Math.imul(Et,ht),y=Math.imul(Et,Re),y=y+Math.imul(xe,ht)|0,N=Math.imul(xe,Re),x=x+Math.imul(_t,dt)|0,y=y+Math.imul(_t,qe)|0,y=y+Math.imul(_e,dt)|0,N=N+Math.imul(_e,qe)|0,x=x+Math.imul(pe,St)|0,y=y+Math.imul(pe,Ne)|0,y=y+Math.imul(ne,St)|0,N=N+Math.imul(ne,Ne)|0,x=x+Math.imul(fe,It)|0,y=y+Math.imul(fe,Be)|0,y=y+Math.imul(se,It)|0,N=N+Math.imul(se,Be)|0,x=x+Math.imul(G,Dt)|0,y=y+Math.imul(G,Te)|0,y=y+Math.imul(J,Dt)|0,N=N+Math.imul(J,Te)|0,x=x+Math.imul(ee,Pt)|0,y=y+Math.imul(ee,Fe)|0,y=y+Math.imul(D,Pt)|0,N=N+Math.imul(D,Fe)|0;var si=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(si>>>26)|0,si&=67108863,x=Math.imul(nt,ht),y=Math.imul(nt,Re),y=y+Math.imul(Ae,ht)|0,N=Math.imul(Ae,Re),x=x+Math.imul(Et,dt)|0,y=y+Math.imul(Et,qe)|0,y=y+Math.imul(xe,dt)|0,N=N+Math.imul(xe,qe)|0,x=x+Math.imul(_t,St)|0,y=y+Math.imul(_t,Ne)|0,y=y+Math.imul(_e,St)|0,N=N+Math.imul(_e,Ne)|0,x=x+Math.imul(pe,It)|0,y=y+Math.imul(pe,Be)|0,y=y+Math.imul(ne,It)|0,N=N+Math.imul(ne,Be)|0,x=x+Math.imul(fe,Dt)|0,y=y+Math.imul(fe,Te)|0,y=y+Math.imul(se,Dt)|0,N=N+Math.imul(se,Te)|0,x=x+Math.imul(G,Pt)|0,y=y+Math.imul(G,Fe)|0,y=y+Math.imul(J,Pt)|0,N=N+Math.imul(J,Fe)|0,x=x+Math.imul(ee,Ct)|0,y=y+Math.imul(ee,Pe)|0,y=y+Math.imul(D,Ct)|0,N=N+Math.imul(D,Pe)|0;var Oi=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,x=Math.imul(st,ht),y=Math.imul(st,Re),y=y+Math.imul(Le,ht)|0,N=Math.imul(Le,Re),x=x+Math.imul(nt,dt)|0,y=y+Math.imul(nt,qe)|0,y=y+Math.imul(Ae,dt)|0,N=N+Math.imul(Ae,qe)|0,x=x+Math.imul(Et,St)|0,y=y+Math.imul(Et,Ne)|0,y=y+Math.imul(xe,St)|0,N=N+Math.imul(xe,Ne)|0,x=x+Math.imul(_t,It)|0,y=y+Math.imul(_t,Be)|0,y=y+Math.imul(_e,It)|0,N=N+Math.imul(_e,Be)|0,x=x+Math.imul(pe,Dt)|0,y=y+Math.imul(pe,Te)|0,y=y+Math.imul(ne,Dt)|0,N=N+Math.imul(ne,Te)|0,x=x+Math.imul(fe,Pt)|0,y=y+Math.imul(fe,Fe)|0,y=y+Math.imul(se,Pt)|0,N=N+Math.imul(se,Fe)|0,x=x+Math.imul(G,Ct)|0,y=y+Math.imul(G,Pe)|0,y=y+Math.imul(J,Ct)|0,N=N+Math.imul(J,Pe)|0,x=x+Math.imul(ee,Nt)|0,y=y+Math.imul(ee,Ue)|0,y=y+Math.imul(D,Nt)|0,N=N+Math.imul(D,Ue)|0;var ss=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(ss>>>26)|0,ss&=67108863,x=Math.imul(rt,ht),y=Math.imul(rt,Re),y=y+Math.imul(Me,ht)|0,N=Math.imul(Me,Re),x=x+Math.imul(st,dt)|0,y=y+Math.imul(st,qe)|0,y=y+Math.imul(Le,dt)|0,N=N+Math.imul(Le,qe)|0,x=x+Math.imul(nt,St)|0,y=y+Math.imul(nt,Ne)|0,y=y+Math.imul(Ae,St)|0,N=N+Math.imul(Ae,Ne)|0,x=x+Math.imul(Et,It)|0,y=y+Math.imul(Et,Be)|0,y=y+Math.imul(xe,It)|0,N=N+Math.imul(xe,Be)|0,x=x+Math.imul(_t,Dt)|0,y=y+Math.imul(_t,Te)|0,y=y+Math.imul(_e,Dt)|0,N=N+Math.imul(_e,Te)|0,x=x+Math.imul(pe,Pt)|0,y=y+Math.imul(pe,Fe)|0,y=y+Math.imul(ne,Pt)|0,N=N+Math.imul(ne,Fe)|0,x=x+Math.imul(fe,Ct)|0,y=y+Math.imul(fe,Pe)|0,y=y+Math.imul(se,Ct)|0,N=N+Math.imul(se,Pe)|0,x=x+Math.imul(G,Nt)|0,y=y+Math.imul(G,Ue)|0,y=y+Math.imul(J,Nt)|0,N=N+Math.imul(J,Ue)|0,x=x+Math.imul(ee,Lt)|0,y=y+Math.imul(ee,ze)|0,y=y+Math.imul(D,Lt)|0,N=N+Math.imul(D,ze)|0;var Ni=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,x=Math.imul(ft,ht),y=Math.imul(ft,Re),y=y+Math.imul(De,ht)|0,N=Math.imul(De,Re),x=x+Math.imul(rt,dt)|0,y=y+Math.imul(rt,qe)|0,y=y+Math.imul(Me,dt)|0,N=N+Math.imul(Me,qe)|0,x=x+Math.imul(st,St)|0,y=y+Math.imul(st,Ne)|0,y=y+Math.imul(Le,St)|0,N=N+Math.imul(Le,Ne)|0,x=x+Math.imul(nt,It)|0,y=y+Math.imul(nt,Be)|0,y=y+Math.imul(Ae,It)|0,N=N+Math.imul(Ae,Be)|0,x=x+Math.imul(Et,Dt)|0,y=y+Math.imul(Et,Te)|0,y=y+Math.imul(xe,Dt)|0,N=N+Math.imul(xe,Te)|0,x=x+Math.imul(_t,Pt)|0,y=y+Math.imul(_t,Fe)|0,y=y+Math.imul(_e,Pt)|0,N=N+Math.imul(_e,Fe)|0,x=x+Math.imul(pe,Ct)|0,y=y+Math.imul(pe,Pe)|0,y=y+Math.imul(ne,Ct)|0,N=N+Math.imul(ne,Pe)|0,x=x+Math.imul(fe,Nt)|0,y=y+Math.imul(fe,Ue)|0,y=y+Math.imul(se,Nt)|0,N=N+Math.imul(se,Ue)|0,x=x+Math.imul(G,Lt)|0,y=y+Math.imul(G,ze)|0,y=y+Math.imul(J,Lt)|0,N=N+Math.imul(J,ze)|0,x=x+Math.imul(ee,mt)|0,y=y+Math.imul(ee,gt)|0,y=y+Math.imul(D,mt)|0,N=N+Math.imul(D,gt)|0;var as=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(as>>>26)|0,as&=67108863,x=Math.imul(ft,dt),y=Math.imul(ft,qe),y=y+Math.imul(De,dt)|0,N=Math.imul(De,qe),x=x+Math.imul(rt,St)|0,y=y+Math.imul(rt,Ne)|0,y=y+Math.imul(Me,St)|0,N=N+Math.imul(Me,Ne)|0,x=x+Math.imul(st,It)|0,y=y+Math.imul(st,Be)|0,y=y+Math.imul(Le,It)|0,N=N+Math.imul(Le,Be)|0,x=x+Math.imul(nt,Dt)|0,y=y+Math.imul(nt,Te)|0,y=y+Math.imul(Ae,Dt)|0,N=N+Math.imul(Ae,Te)|0,x=x+Math.imul(Et,Pt)|0,y=y+Math.imul(Et,Fe)|0,y=y+Math.imul(xe,Pt)|0,N=N+Math.imul(xe,Fe)|0,x=x+Math.imul(_t,Ct)|0,y=y+Math.imul(_t,Pe)|0,y=y+Math.imul(_e,Ct)|0,N=N+Math.imul(_e,Pe)|0,x=x+Math.imul(pe,Nt)|0,y=y+Math.imul(pe,Ue)|0,y=y+Math.imul(ne,Nt)|0,N=N+Math.imul(ne,Ue)|0,x=x+Math.imul(fe,Lt)|0,y=y+Math.imul(fe,ze)|0,y=y+Math.imul(se,Lt)|0,N=N+Math.imul(se,ze)|0,x=x+Math.imul(G,mt)|0,y=y+Math.imul(G,gt)|0,y=y+Math.imul(J,mt)|0,N=N+Math.imul(J,gt)|0;var os=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(os>>>26)|0,os&=67108863,x=Math.imul(ft,St),y=Math.imul(ft,Ne),y=y+Math.imul(De,St)|0,N=Math.imul(De,Ne),x=x+Math.imul(rt,It)|0,y=y+Math.imul(rt,Be)|0,y=y+Math.imul(Me,It)|0,N=N+Math.imul(Me,Be)|0,x=x+Math.imul(st,Dt)|0,y=y+Math.imul(st,Te)|0,y=y+Math.imul(Le,Dt)|0,N=N+Math.imul(Le,Te)|0,x=x+Math.imul(nt,Pt)|0,y=y+Math.imul(nt,Fe)|0,y=y+Math.imul(Ae,Pt)|0,N=N+Math.imul(Ae,Fe)|0,x=x+Math.imul(Et,Ct)|0,y=y+Math.imul(Et,Pe)|0,y=y+Math.imul(xe,Ct)|0,N=N+Math.imul(xe,Pe)|0,x=x+Math.imul(_t,Nt)|0,y=y+Math.imul(_t,Ue)|0,y=y+Math.imul(_e,Nt)|0,N=N+Math.imul(_e,Ue)|0,x=x+Math.imul(pe,Lt)|0,y=y+Math.imul(pe,ze)|0,y=y+Math.imul(ne,Lt)|0,N=N+Math.imul(ne,ze)|0,x=x+Math.imul(fe,mt)|0,y=y+Math.imul(fe,gt)|0,y=y+Math.imul(se,mt)|0,N=N+Math.imul(se,gt)|0;var cs=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(cs>>>26)|0,cs&=67108863,x=Math.imul(ft,It),y=Math.imul(ft,Be),y=y+Math.imul(De,It)|0,N=Math.imul(De,Be),x=x+Math.imul(rt,Dt)|0,y=y+Math.imul(rt,Te)|0,y=y+Math.imul(Me,Dt)|0,N=N+Math.imul(Me,Te)|0,x=x+Math.imul(st,Pt)|0,y=y+Math.imul(st,Fe)|0,y=y+Math.imul(Le,Pt)|0,N=N+Math.imul(Le,Fe)|0,x=x+Math.imul(nt,Ct)|0,y=y+Math.imul(nt,Pe)|0,y=y+Math.imul(Ae,Ct)|0,N=N+Math.imul(Ae,Pe)|0,x=x+Math.imul(Et,Nt)|0,y=y+Math.imul(Et,Ue)|0,y=y+Math.imul(xe,Nt)|0,N=N+Math.imul(xe,Ue)|0,x=x+Math.imul(_t,Lt)|0,y=y+Math.imul(_t,ze)|0,y=y+Math.imul(_e,Lt)|0,N=N+Math.imul(_e,ze)|0,x=x+Math.imul(pe,mt)|0,y=y+Math.imul(pe,gt)|0,y=y+Math.imul(ne,mt)|0,N=N+Math.imul(ne,gt)|0;var En=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(En>>>26)|0,En&=67108863,x=Math.imul(ft,Dt),y=Math.imul(ft,Te),y=y+Math.imul(De,Dt)|0,N=Math.imul(De,Te),x=x+Math.imul(rt,Pt)|0,y=y+Math.imul(rt,Fe)|0,y=y+Math.imul(Me,Pt)|0,N=N+Math.imul(Me,Fe)|0,x=x+Math.imul(st,Ct)|0,y=y+Math.imul(st,Pe)|0,y=y+Math.imul(Le,Ct)|0,N=N+Math.imul(Le,Pe)|0,x=x+Math.imul(nt,Nt)|0,y=y+Math.imul(nt,Ue)|0,y=y+Math.imul(Ae,Nt)|0,N=N+Math.imul(Ae,Ue)|0,x=x+Math.imul(Et,Lt)|0,y=y+Math.imul(Et,ze)|0,y=y+Math.imul(xe,Lt)|0,N=N+Math.imul(xe,ze)|0,x=x+Math.imul(_t,mt)|0,y=y+Math.imul(_t,gt)|0,y=y+Math.imul(_e,mt)|0,N=N+Math.imul(_e,gt)|0;var xn=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(xn>>>26)|0,xn&=67108863,x=Math.imul(ft,Pt),y=Math.imul(ft,Fe),y=y+Math.imul(De,Pt)|0,N=Math.imul(De,Fe),x=x+Math.imul(rt,Ct)|0,y=y+Math.imul(rt,Pe)|0,y=y+Math.imul(Me,Ct)|0,N=N+Math.imul(Me,Pe)|0,x=x+Math.imul(st,Nt)|0,y=y+Math.imul(st,Ue)|0,y=y+Math.imul(Le,Nt)|0,N=N+Math.imul(Le,Ue)|0,x=x+Math.imul(nt,Lt)|0,y=y+Math.imul(nt,ze)|0,y=y+Math.imul(Ae,Lt)|0,N=N+Math.imul(Ae,ze)|0,x=x+Math.imul(Et,mt)|0,y=y+Math.imul(Et,gt)|0,y=y+Math.imul(xe,mt)|0,N=N+Math.imul(xe,gt)|0;var An=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(An>>>26)|0,An&=67108863,x=Math.imul(ft,Ct),y=Math.imul(ft,Pe),y=y+Math.imul(De,Ct)|0,N=Math.imul(De,Pe),x=x+Math.imul(rt,Nt)|0,y=y+Math.imul(rt,Ue)|0,y=y+Math.imul(Me,Nt)|0,N=N+Math.imul(Me,Ue)|0,x=x+Math.imul(st,Lt)|0,y=y+Math.imul(st,ze)|0,y=y+Math.imul(Le,Lt)|0,N=N+Math.imul(Le,ze)|0,x=x+Math.imul(nt,mt)|0,y=y+Math.imul(nt,gt)|0,y=y+Math.imul(Ae,mt)|0,N=N+Math.imul(Ae,gt)|0;var fs=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(fs>>>26)|0,fs&=67108863,x=Math.imul(ft,Nt),y=Math.imul(ft,Ue),y=y+Math.imul(De,Nt)|0,N=Math.imul(De,Ue),x=x+Math.imul(rt,Lt)|0,y=y+Math.imul(rt,ze)|0,y=y+Math.imul(Me,Lt)|0,N=N+Math.imul(Me,ze)|0,x=x+Math.imul(st,mt)|0,y=y+Math.imul(st,gt)|0,y=y+Math.imul(Le,mt)|0,N=N+Math.imul(Le,gt)|0;var us=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(us>>>26)|0,us&=67108863,x=Math.imul(ft,Lt),y=Math.imul(ft,ze),y=y+Math.imul(De,Lt)|0,N=Math.imul(De,ze),x=x+Math.imul(rt,mt)|0,y=y+Math.imul(rt,gt)|0,y=y+Math.imul(Me,mt)|0,N=N+Math.imul(Me,gt)|0;var Pc=(v+x|0)+((y&8191)<<13)|0;v=(N+(y>>>13)|0)+(Pc>>>26)|0,Pc&=67108863,x=Math.imul(ft,mt),y=Math.imul(ft,gt),y=y+Math.imul(De,mt)|0,N=Math.imul(De,gt);var Cc=(v+x|0)+((y&8191)<<13)|0;return v=(N+(y>>>13)|0)+(Cc>>>26)|0,Cc&=67108863,A[0]=ei,A[1]=ti,A[2]=ri,A[3]=ii,A[4]=ni,A[5]=si,A[6]=Oi,A[7]=ss,A[8]=Ni,A[9]=as,A[10]=os,A[11]=cs,A[12]=En,A[13]=xn,A[14]=An,A[15]=fs,A[16]=us,A[17]=Pc,A[18]=Cc,v!==0&&(A[19]=v,b.length++),b};Math.imul||(Y=z);function $(f,l,b){b.negative=l.negative^f.negative,b.length=f.length+l.length;for(var S=0,M=0,A=0;A<b.length-1;A++){var v=M;M=0;for(var x=S&67108863,y=Math.min(A,l.length-1),N=Math.max(0,A-f.length+1);N<=y;N++){var Z=A-N,ee=f.words[Z]|0,D=l.words[N]|0,V=ee*D,G=V&67108863;v=v+(V/67108864|0)|0,G=G+x|0,x=G&67108863,v=v+(G>>>26)|0,M+=v>>>26,v&=67108863}b.words[A]=x,S=v,v=M}return S!==0?b.words[A]=S:b.length--,b._strip()}function K(f,l,b){return $(f,l,b)}a.prototype.mulTo=function(f,l){var b,S=this.length+f.length;return this.length===10&&f.length===10?b=Y(this,f,l):S<63?b=z(this,f,l):S<1024?b=$(this,f,l):b=K(this,f,l),b},a.prototype.mul=function(f){var l=new a(null);return l.words=new Array(this.length+f.length),this.mulTo(f,l)},a.prototype.mulf=function(f){var l=new a(null);return l.words=new Array(this.length+f.length),K(this,f,l)},a.prototype.imul=function(f){return this.clone().mulTo(f,this)},a.prototype.imuln=function(f){var l=f<0;l&&(f=-f),i(typeof f=="number"),i(f<67108864);for(var b=0,S=0;S<this.length;S++){var M=(this.words[S]|0)*f,A=(M&67108863)+(b&67108863);b>>=26,b+=M/67108864|0,b+=A>>>26,this.words[S]=A&67108863}return b!==0&&(this.words[S]=b,this.length++),l?this.ineg():this},a.prototype.muln=function(f){return this.clone().imuln(f)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(f){var l=F(f);if(l.length===0)return new a(1);for(var b=this,S=0;S<l.length&&l[S]===0;S++,b=b.sqr());if(++S<l.length)for(var M=b.sqr();S<l.length;S++,M=M.sqr())l[S]!==0&&(b=b.mul(M));return b},a.prototype.iushln=function(f){i(typeof f=="number"&&f>=0);var l=f%26,b=(f-l)/26,S=67108863>>>26-l<<26-l,M;if(l!==0){var A=0;for(M=0;M<this.length;M++){var v=this.words[M]&S,x=(this.words[M]|0)-v<<l;this.words[M]=x|A,A=v>>>26-l}A&&(this.words[M]=A,this.length++)}if(b!==0){for(M=this.length-1;M>=0;M--)this.words[M+b]=this.words[M];for(M=0;M<b;M++)this.words[M]=0;this.length+=b}return this._strip()},a.prototype.ishln=function(f){return i(this.negative===0),this.iushln(f)},a.prototype.iushrn=function(f,l,b){i(typeof f=="number"&&f>=0);var S;l?S=(l-l%26)/26:S=0;var M=f%26,A=Math.min((f-M)/26,this.length),v=67108863^67108863>>>M<<M,x=b;if(S-=A,S=Math.max(0,S),x){for(var y=0;y<A;y++)x.words[y]=this.words[y];x.length=A}if(A!==0)if(this.length>A)for(this.length-=A,y=0;y<this.length;y++)this.words[y]=this.words[y+A];else this.words[0]=0,this.length=1;var N=0;for(y=this.length-1;y>=0&&(N!==0||y>=S);y--){var Z=this.words[y]|0;this.words[y]=N<<26-M|Z>>>M,N=Z&v}return x&&N!==0&&(x.words[x.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(f,l,b){return i(this.negative===0),this.iushrn(f,l,b)},a.prototype.shln=function(f){return this.clone().ishln(f)},a.prototype.ushln=function(f){return this.clone().iushln(f)},a.prototype.shrn=function(f){return this.clone().ishrn(f)},a.prototype.ushrn=function(f){return this.clone().iushrn(f)},a.prototype.testn=function(f){i(typeof f=="number"&&f>=0);var l=f%26,b=(f-l)/26,S=1<<l;if(this.length<=b)return!1;var M=this.words[b];return!!(M&S)},a.prototype.imaskn=function(f){i(typeof f=="number"&&f>=0);var l=f%26,b=(f-l)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(l!==0&&b++,this.length=Math.min(b,this.length),l!==0){var S=67108863^67108863>>>l<<l;this.words[this.length-1]&=S}return this._strip()},a.prototype.maskn=function(f){return this.clone().imaskn(f)},a.prototype.iaddn=function(f){return i(typeof f=="number"),i(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},a.prototype._iaddn=function(f){this.words[0]+=f;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},a.prototype.isubn=function(f){if(i(typeof f=="number"),i(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},a.prototype.addn=function(f){return this.clone().iaddn(f)},a.prototype.subn=function(f){return this.clone().isubn(f)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(f,l,b){var S=f.length+b,M;this._expand(S);var A,v=0;for(M=0;M<f.length;M++){A=(this.words[M+b]|0)+v;var x=(f.words[M]|0)*l;A-=x&67108863,v=(A>>26)-(x/67108864|0),this.words[M+b]=A&67108863}for(;M<this.length-b;M++)A=(this.words[M+b]|0)+v,v=A>>26,this.words[M+b]=A&67108863;if(v===0)return this._strip();for(i(v===-1),v=0,M=0;M<this.length;M++)A=-(this.words[M]|0)+v,v=A>>26,this.words[M]=A&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(f,l){var b=this.length-f.length,S=this.clone(),M=f,A=M.words[M.length-1]|0,v=this._countBits(A);b=26-v,b!==0&&(M=M.ushln(b),S.iushln(b),A=M.words[M.length-1]|0);var x=S.length-M.length,y;if(l!=="mod"){y=new a(null),y.length=x+1,y.words=new Array(y.length);for(var N=0;N<y.length;N++)y.words[N]=0}var Z=S.clone()._ishlnsubmul(M,1,x);Z.negative===0&&(S=Z,y&&(y.words[x]=1));for(var ee=x-1;ee>=0;ee--){var D=(S.words[M.length+ee]|0)*67108864+(S.words[M.length+ee-1]|0);for(D=Math.min(D/A|0,67108863),S._ishlnsubmul(M,D,ee);S.negative!==0;)D--,S.negative=0,S._ishlnsubmul(M,1,ee),S.isZero()||(S.negative^=1);y&&(y.words[ee]=D)}return y&&y._strip(),S._strip(),l!=="div"&&b!==0&&S.iushrn(b),{div:y||null,mod:S}},a.prototype.divmod=function(f,l,b){if(i(!f.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var S,M,A;return this.negative!==0&&f.negative===0?(A=this.neg().divmod(f,l),l!=="mod"&&(S=A.div.neg()),l!=="div"&&(M=A.mod.neg(),b&&M.negative!==0&&M.iadd(f)),{div:S,mod:M}):this.negative===0&&f.negative!==0?(A=this.divmod(f.neg(),l),l!=="mod"&&(S=A.div.neg()),{div:S,mod:A.mod}):this.negative&f.negative?(A=this.neg().divmod(f.neg(),l),l!=="div"&&(M=A.mod.neg(),b&&M.negative!==0&&M.isub(f)),{div:A.div,mod:M}):f.length>this.length||this.cmp(f)<0?{div:new a(0),mod:this}:f.length===1?l==="div"?{div:this.divn(f.words[0]),mod:null}:l==="mod"?{div:null,mod:new a(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new a(this.modrn(f.words[0]))}:this._wordDiv(f,l)},a.prototype.div=function(f){return this.divmod(f,"div",!1).div},a.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},a.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},a.prototype.divRound=function(f){var l=this.divmod(f);if(l.mod.isZero())return l.div;var b=l.div.negative!==0?l.mod.isub(f):l.mod,S=f.ushrn(1),M=f.andln(1),A=b.cmp(S);return A<0||M===1&&A===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},a.prototype.modrn=function(f){var l=f<0;l&&(f=-f),i(f<=67108863);for(var b=(1<<26)%f,S=0,M=this.length-1;M>=0;M--)S=(b*S+(this.words[M]|0))%f;return l?-S:S},a.prototype.modn=function(f){return this.modrn(f)},a.prototype.idivn=function(f){var l=f<0;l&&(f=-f),i(f<=67108863);for(var b=0,S=this.length-1;S>=0;S--){var M=(this.words[S]|0)+b*67108864;this.words[S]=M/f|0,b=M%f}return this._strip(),l?this.ineg():this},a.prototype.divn=function(f){return this.clone().idivn(f)},a.prototype.egcd=function(f){i(f.negative===0),i(!f.isZero());var l=this,b=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var S=new a(1),M=new a(0),A=new a(0),v=new a(1),x=0;l.isEven()&&b.isEven();)l.iushrn(1),b.iushrn(1),++x;for(var y=b.clone(),N=l.clone();!l.isZero();){for(var Z=0,ee=1;!(l.words[0]&ee)&&Z<26;++Z,ee<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(S.isOdd()||M.isOdd())&&(S.iadd(y),M.isub(N)),S.iushrn(1),M.iushrn(1);for(var D=0,V=1;!(b.words[0]&V)&&D<26;++D,V<<=1);if(D>0)for(b.iushrn(D);D-- >0;)(A.isOdd()||v.isOdd())&&(A.iadd(y),v.isub(N)),A.iushrn(1),v.iushrn(1);l.cmp(b)>=0?(l.isub(b),S.isub(A),M.isub(v)):(b.isub(l),A.isub(S),v.isub(M))}return{a:A,b:v,gcd:b.iushln(x)}},a.prototype._invmp=function(f){i(f.negative===0),i(!f.isZero());var l=this,b=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var S=new a(1),M=new a(0),A=b.clone();l.cmpn(1)>0&&b.cmpn(1)>0;){for(var v=0,x=1;!(l.words[0]&x)&&v<26;++v,x<<=1);if(v>0)for(l.iushrn(v);v-- >0;)S.isOdd()&&S.iadd(A),S.iushrn(1);for(var y=0,N=1;!(b.words[0]&N)&&y<26;++y,N<<=1);if(y>0)for(b.iushrn(y);y-- >0;)M.isOdd()&&M.iadd(A),M.iushrn(1);l.cmp(b)>=0?(l.isub(b),S.isub(M)):(b.isub(l),M.isub(S))}var Z;return l.cmpn(1)===0?Z=S:Z=M,Z.cmpn(0)<0&&Z.iadd(f),Z},a.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var l=this.clone(),b=f.clone();l.negative=0,b.negative=0;for(var S=0;l.isEven()&&b.isEven();S++)l.iushrn(1),b.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;b.isEven();)b.iushrn(1);var M=l.cmp(b);if(M<0){var A=l;l=b,b=A}else if(M===0||b.cmpn(1)===0)break;l.isub(b)}while(!0);return b.iushln(S)},a.prototype.invm=function(f){return this.egcd(f).a.umod(f)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(f){return this.words[0]&f},a.prototype.bincn=function(f){i(typeof f=="number");var l=f%26,b=(f-l)/26,S=1<<l;if(this.length<=b)return this._expand(b+1),this.words[b]|=S,this;for(var M=S,A=b;M!==0&&A<this.length;A++){var v=this.words[A]|0;v+=M,M=v>>>26,v&=67108863,this.words[A]=v}return M!==0&&(this.words[A]=M,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(f){var l=f<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var b;if(this.length>1)b=1;else{l&&(f=-f),i(f<=67108863,"Number is too big");var S=this.words[0]|0;b=S===f?0:S<f?-1:1}return this.negative!==0?-b|0:b},a.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var l=this.ucmp(f);return this.negative!==0?-l|0:l},a.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var l=0,b=this.length-1;b>=0;b--){var S=this.words[b]|0,M=f.words[b]|0;if(S!==M){S<M?l=-1:S>M&&(l=1);break}}return l},a.prototype.gtn=function(f){return this.cmpn(f)===1},a.prototype.gt=function(f){return this.cmp(f)===1},a.prototype.gten=function(f){return this.cmpn(f)>=0},a.prototype.gte=function(f){return this.cmp(f)>=0},a.prototype.ltn=function(f){return this.cmpn(f)===-1},a.prototype.lt=function(f){return this.cmp(f)===-1},a.prototype.lten=function(f){return this.cmpn(f)<=0},a.prototype.lte=function(f){return this.cmp(f)<=0},a.prototype.eqn=function(f){return this.cmpn(f)===0},a.prototype.eq=function(f){return this.cmp(f)===0},a.red=function(f){return new d(f)},a.prototype.toRed=function(f){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(f){return this.red=f,this},a.prototype.forceRed=function(f){return i(!this.red,"Already a number in reduction context"),this._forceRed(f)},a.prototype.redAdd=function(f){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},a.prototype.redIAdd=function(f){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},a.prototype.redSub=function(f){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},a.prototype.redISub=function(f){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},a.prototype.redShl=function(f){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},a.prototype.redMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},a.prototype.redIMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(f){return i(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var X={k256:null,p224:null,p192:null,p25519:null};function te(f,l){this.name=f,this.p=new a(l,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}te.prototype._tmp=function(){var f=new a(null);return f.words=new Array(Math.ceil(this.n/13)),f},te.prototype.ireduce=function(f){var l=f,b;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),b=l.bitLength();while(b>this.n);var S=b<this.n?-1:l.ucmp(this.p);return S===0?(l.words[0]=0,l.length=1):S>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},te.prototype.split=function(f,l){f.iushrn(this.n,0,l)},te.prototype.imulK=function(f){return f.imul(this.k)};function k(){te.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(k,te),k.prototype.split=function(f,l){for(var b=4194303,S=Math.min(f.length,9),M=0;M<S;M++)l.words[M]=f.words[M];if(l.length=S,f.length<=9){f.words[0]=0,f.length=1;return}var A=f.words[9];for(l.words[l.length++]=A&b,M=10;M<f.length;M++){var v=f.words[M]|0;f.words[M-10]=(v&b)<<4|A>>>22,A=v}A>>>=22,f.words[M-10]=A,A===0&&f.length>10?f.length-=10:f.length-=9},k.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var l=0,b=0;b<f.length;b++){var S=f.words[b]|0;l+=S*977,f.words[b]=l&67108863,l=S*64+(l/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function U(){te.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(U,te);function ae(){te.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ae,te);function P(){te.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(P,te),P.prototype.imulK=function(f){for(var l=0,b=0;b<f.length;b++){var S=(f.words[b]|0)*19+l,M=S&67108863;S>>>=26,f.words[b]=M,l=S}return l!==0&&(f.words[f.length++]=l),f},a._prime=function(f){if(X[f])return X[f];var l;if(f==="k256")l=new k;else if(f==="p224")l=new U;else if(f==="p192")l=new ae;else if(f==="p25519")l=new P;else throw new Error("Unknown prime "+f);return X[f]=l,l};function d(f){if(typeof f=="string"){var l=a._prime(f);this.m=l.p,this.prime=l}else i(f.gtn(1),"modulus must be greater than 1"),this.m=f,this.prime=null}d.prototype._verify1=function(f){i(f.negative===0,"red works only with positives"),i(f.red,"red works only with red numbers")},d.prototype._verify2=function(f,l){i((f.negative|l.negative)===0,"red works only with positives"),i(f.red&&f.red===l.red,"red works only with red numbers")},d.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(m(f,f.umod(this.m)._forceRed(this)),f)},d.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},d.prototype.add=function(f,l){this._verify2(f,l);var b=f.add(l);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},d.prototype.iadd=function(f,l){this._verify2(f,l);var b=f.iadd(l);return b.cmp(this.m)>=0&&b.isub(this.m),b},d.prototype.sub=function(f,l){this._verify2(f,l);var b=f.sub(l);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},d.prototype.isub=function(f,l){this._verify2(f,l);var b=f.isub(l);return b.cmpn(0)<0&&b.iadd(this.m),b},d.prototype.shl=function(f,l){return this._verify1(f),this.imod(f.ushln(l))},d.prototype.imul=function(f,l){return this._verify2(f,l),this.imod(f.imul(l))},d.prototype.mul=function(f,l){return this._verify2(f,l),this.imod(f.mul(l))},d.prototype.isqr=function(f){return this.imul(f,f.clone())},d.prototype.sqr=function(f){return this.mul(f,f)},d.prototype.sqrt=function(f){if(f.isZero())return f.clone();var l=this.m.andln(3);if(i(l%2===1),l===3){var b=this.m.add(new a(1)).iushrn(2);return this.pow(f,b)}for(var S=this.m.subn(1),M=0;!S.isZero()&&S.andln(1)===0;)M++,S.iushrn(1);i(!S.isZero());var A=new a(1).toRed(this),v=A.redNeg(),x=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new a(2*y*y).toRed(this);this.pow(y,x).cmp(v)!==0;)y.redIAdd(v);for(var N=this.pow(y,S),Z=this.pow(f,S.addn(1).iushrn(1)),ee=this.pow(f,S),D=M;ee.cmp(A)!==0;){for(var V=ee,G=0;V.cmp(A)!==0;G++)V=V.redSqr();i(G<D);var J=this.pow(N,new a(1).iushln(D-G-1));Z=Z.redMul(J),N=J.redSqr(),ee=ee.redMul(N),D=G}return Z},d.prototype.invm=function(f){var l=f._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},d.prototype.pow=function(f,l){if(l.isZero())return new a(1).toRed(this);if(l.cmpn(1)===0)return f.clone();var b=4,S=new Array(1<<b);S[0]=new a(1).toRed(this),S[1]=f;for(var M=2;M<S.length;M++)S[M]=this.mul(S[M-1],f);var A=S[0],v=0,x=0,y=l.bitLength()%26;for(y===0&&(y=26),M=l.length-1;M>=0;M--){for(var N=l.words[M],Z=y-1;Z>=0;Z--){var ee=N>>Z&1;if(A!==S[0]&&(A=this.sqr(A)),ee===0&&v===0){x=0;continue}v<<=1,v|=ee,x++,!(x!==b&&(M!==0||Z!==0))&&(A=this.mul(A,S[v]),x=0,v=0)}y=26}return A},d.prototype.convertTo=function(f){var l=f.umod(this.m);return l===f?l.clone():l},d.prototype.convertFrom=function(f){var l=f.clone();return l.red=null,l},a.mont=function(f){return new _(f)};function _(f){d.call(this,f),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(_,d),_.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},_.prototype.convertFrom=function(f){var l=this.imod(f.mul(this.rinv));return l.red=null,l},_.prototype.imul=function(f,l){if(f.isZero()||l.isZero())return f.words[0]=0,f.length=1,f;var b=f.imul(l),S=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=b.isub(S).iushrn(this.shift),A=M;return M.cmp(this.m)>=0?A=M.isub(this.m):M.cmpn(0)<0&&(A=M.iadd(this.m)),A._forceRed(this)},_.prototype.mul=function(f,l){if(f.isZero()||l.isZero())return new a(0)._forceRed(this);var b=f.mul(l),S=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=b.isub(S).iushrn(this.shift),A=M;return M.cmp(this.m)>=0?A=M.isub(this.m):M.cmpn(0)<0&&(A=M.iadd(this.m)),A._forceRed(this)},_.prototype.invm=function(f){var l=this.imod(f._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,Ow)})(qw);var He=qw.exports,Bw="bignumber/5.7.0",Gh=He.BN,Os=new Xt(Bw),Wp={},X6=9007199254740991;function GO(r){return r!=null&&(Pr.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||Ii(r)||typeof r=="bigint"||ac(r))}var Z6=!1,Pr=class r{constructor(e,t){e!==Wp&&Os.throwError("cannot call constructor directly; use BigNumber.from",Xt.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return di(Ze(this).fromTwos(e))}toTwos(e){return di(Ze(this).toTwos(e))}abs(){return this._hex[0]==="-"?r.from(this._hex.substring(1)):this}add(e){return di(Ze(this).add(Ze(e)))}sub(e){return di(Ze(this).sub(Ze(e)))}div(e){return r.from(e).isZero()&&$i("division-by-zero","div"),di(Ze(this).div(Ze(e)))}mul(e){return di(Ze(this).mul(Ze(e)))}mod(e){let t=Ze(e);return t.isNeg()&&$i("division-by-zero","mod"),di(Ze(this).umod(t))}pow(e){let t=Ze(e);return t.isNeg()&&$i("negative-power","pow"),di(Ze(this).pow(t))}and(e){let t=Ze(e);return(this.isNegative()||t.isNeg())&&$i("unbound-bitwise-result","and"),di(Ze(this).and(t))}or(e){let t=Ze(e);return(this.isNegative()||t.isNeg())&&$i("unbound-bitwise-result","or"),di(Ze(this).or(t))}xor(e){let t=Ze(e);return(this.isNegative()||t.isNeg())&&$i("unbound-bitwise-result","xor"),di(Ze(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&$i("negative-width","mask"),di(Ze(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&$i("negative-width","shl"),di(Ze(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&$i("negative-width","shr"),di(Ze(this).shrn(e))}eq(e){return Ze(this).eq(Ze(e))}lt(e){return Ze(this).lt(Ze(e))}lte(e){return Ze(this).lte(Ze(e))}gt(e){return Ze(this).gt(Ze(e))}gte(e){return Ze(this).gte(Ze(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Ze(this).isZero()}toNumber(){try{return Ze(this).toNumber()}catch{$i("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Os.throwError("this platform does not support BigInt",Xt.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Z6||(Z6=!0,Os.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Os.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Xt.errors.UNEXPECTED_ARGUMENT,{}):Os.throwError("BigNumber.toString does not accept parameters",Xt.errors.UNEXPECTED_ARGUMENT,{})),Ze(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof r)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new r(Wp,Mf(e)):e.match(/^-?[0-9]+$/)?new r(Wp,Mf(new Gh(e))):Os.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&$i("underflow","BigNumber.from",e),(e>=X6||e<=-X6)&&$i("overflow","BigNumber.from",e),r.from(String(e));let t=e;if(typeof t=="bigint")return r.from(t.toString());if(ac(t))return r.from(Wr(t));if(t)if(t.toHexString){let i=t.toHexString();if(typeof i=="string")return r.from(i)}else{let i=t._hex;if(i==null&&t.type==="BigNumber"&&(i=t.hex),typeof i=="string"&&(Ii(i)||i[0]==="-"&&Ii(i.substring(1))))return r.from(i)}return Os.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}};function Mf(r){if(typeof r!="string")return Mf(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Os.throwArgumentError("invalid hex","value",r),r=Mf(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function di(r){return Pr.from(Mf(r))}function Ze(r){let e=Pr.from(r).toHexString();return e[0]==="-"?new Gh("-"+e.substring(3),16):new Gh(e.substring(2),16)}function $i(r,e,t){let i={fault:r,operation:e};return t!=null&&(i.value=t),Os.throwError(r,Xt.errors.NUMERIC_FAULT,i)}function $O(r){return new Gh(r,36).toString(16)}var Yr=new Xt(Bw),xf={},Fw=Pr.from(0),Uw=Pr.from(-1);function zw(r,e,t,i){let n={fault:e,operation:t};return i!==void 0&&(n.value=i),Yr.throwError(r,Xt.errors.NUMERIC_FAULT,n)}var Af="0";for(;Af.length<256;)Af+=Af;function E1(r){if(typeof r!="number")try{r=Pr.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+Af.substring(0,r):Yr.throwArgumentError("invalid decimal size","decimals",r)}function Yp(r,e){e==null&&(e=0);let t=E1(e);r=Pr.from(r);let i=r.lt(Fw);i&&(r=r.mul(Uw));let n=r.mod(t).toString();for(;n.length<t.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];let a=r.div(t).toString();return t.length===1?r=a:r=a+"."+n,i&&(r="-"+r),r}function Cs(r,e){e==null&&(e=0);let t=E1(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Yr.throwArgumentError("invalid decimal value","value",r);let i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&Yr.throwArgumentError("missing value","value",r);let n=r.split(".");n.length>2&&Yr.throwArgumentError("too many decimal points","value",r);let a=n[0],c=n[1];for(a||(a="0"),c||(c="0");c[c.length-1]==="0";)c=c.substring(0,c.length-1);for(c.length>t.length-1&&zw("fractional component exceeds decimals","underflow","parseFixed"),c===""&&(c="0");c.length<t.length-1;)c+="0";let u=Pr.from(a),p=Pr.from(c),g=u.mul(t).add(p);return i&&(g=g.mul(Uw)),g}var Sf=class r{constructor(e,t,i,n){e!==xf&&Yr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Xt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=i,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=E1(n),Object.freeze(this)}static from(e){if(e instanceof r)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,i=128,n=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{let a=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);a||Yr.throwArgumentError("invalid fixed format","format",e),t=a[1]!=="u",i=parseInt(a[2]),n=parseInt(a[3])}}else if(e){let a=(c,u,p)=>e[c]==null?p:(typeof e[c]!==u&&Yr.throwArgumentError("invalid fixed format ("+c+" not "+u+")","format."+c,e[c]),e[c]);t=a("signed","boolean",t),i=a("width","number",i),n=a("decimals","number",n)}return i%8&&Yr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&Yr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new r(xf,t,i,n)}},$h=class r{constructor(e,t,i,n){e!==xf&&Yr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Xt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Yr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);let t=Cs(this._value,this.format.decimals),i=Cs(e._value,e.format.decimals);return r.fromValue(t.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);let t=Cs(this._value,this.format.decimals),i=Cs(e._value,e.format.decimals);return r.fromValue(t.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);let t=Cs(this._value,this.format.decimals),i=Cs(e._value,e.format.decimals);return r.fromValue(t.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);let t=Cs(this._value,this.format.decimals),i=Cs(e._value,e.format.decimals);return r.fromValue(t.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){let e=this.toString().split(".");e.length===1&&e.push("0");let t=r.from(e[0],this.format),i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(t=t.subUnsafe(ew.toFormat(t.format))),t}ceiling(){let e=this.toString().split(".");e.length===1&&e.push("0");let t=r.from(e[0],this.format),i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(t=t.addUnsafe(ew.toFormat(t.format))),t}round(e){e==null&&(e=0);let t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&Yr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;let i=r.from("1"+Af.substring(0,e),this.format),n=JO.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Yr.throwArgumentError("invalid byte width","width",e);let t=Pr.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Kn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return r.fromString(this._value,e)}static fromValue(e,t,i){return i==null&&t!=null&&!GO(t)&&(i=t,t=null),t==null&&(t=0),i==null&&(i="fixed"),r.fromString(Yp(e,t),Sf.from(i))}static fromString(e,t){t==null&&(t="fixed");let i=Sf.from(t),n=Cs(e,i.decimals);!i.signed&&n.lt(Fw)&&zw("unsigned value cannot be negative","overflow","value",e);let a=null;i.signed?a=n.toTwos(i.width).toHexString():(a=n.toHexString(),a=Kn(a,i.width/8));let c=Yp(n,i.decimals);return new r(xf,a,c,i)}static fromBytes(e,t){t==null&&(t="fixed");let i=Sf.from(t);if(ar(e).length>i.width/8)throw new Error("overflow");let n=Pr.from(e);i.signed&&(n=n.fromTwos(i.width));let a=n.toTwos((i.signed?0:1)+i.width).toHexString(),c=Yp(n,i.decimals);return new r(xf,a,c,i)}static from(e,t){if(typeof e=="string")return r.fromString(e,t);if(ac(e))return r.fromBytes(e,t);try{return r.fromValue(e,0,t)}catch(i){if(i.code!==Xt.errors.INVALID_ARGUMENT)throw i}return Yr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}},ew=$h.from(1),JO=$h.from("0.5"),WO="strings/5.7.0",kw=new Xt(WO),Jh;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Jh||(Jh={}));var Zo;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(Zo||(Zo={}));function YO(r,e,t,i,n){return kw.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function jw(r,e,t,i,n){if(r===Zo.BAD_PREFIX||r===Zo.UNEXPECTED_CONTINUE){let a=0;for(let c=e+1;c<t.length&&t[c]>>6===2;c++)a++;return a}return r===Zo.OVERRUN?t.length-e-1:0}function QO(r,e,t,i,n){return r===Zo.OVERLONG?(i.push(n),0):(i.push(65533),jw(r,e,t))}Object.freeze({error:YO,ignore:jw,replace:QO});function Qp(r,e=Jh.current){e!=Jh.current&&(kw.checkNormalize(),r=r.normalize(e));let t=[];for(let i=0;i<r.length;i++){let n=r.charCodeAt(i);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192),t.push(n&63|128);else if((n&64512)==55296){i++;let a=r.charCodeAt(i);if(i>=r.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");let c=65536+((n&1023)<<10)+(a&1023);t.push(c>>18|240),t.push(c>>12&63|128),t.push(c>>6&63|128),t.push(c&63|128)}else t.push(n>>12|224),t.push(n>>6&63|128),t.push(n&63|128)}return ar(t)}function XO(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function Xp(r,e){e||(e=function(n){return[parseInt(n,16)]});let t=0,i={};return r.split(",").forEach(n=>{let a=n.split(":");t+=parseInt(a[0],16),i[t]=e(a[1])}),i}function tw(r){let e=0;return r.split(",").map(t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let n=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:n,h:e}})}tw("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),Xp("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Xp("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Xp("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",XO),tw("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");var Hw="hash/5.7.0";function ZO(r){r=atob(r);let e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return ar(e)}function Kw(r,e){e==null&&(e=1);let t=[],i=t.forEach,n=function(a,c){i.call(a,function(u){c>0&&Array.isArray(u)?n(u,c-1):t.push(u)})};return n(r,e),t}function eN(r){let e={};for(let t=0;t<r.length;t++){let i=r[t];e[i[0]]=i[1]}return e}function tN(r){let e=0;function t(){return r[e++]<<8|r[e++]}let i=t(),n=1,a=[0,1];for(let X=1;X<i;X++)a.push(n+=t());let c=t(),u=e;e+=c;let p=0,g=0;function m(){return p==0&&(g=g<<8|r[e++],p=8),g>>--p&1}let w=31,R=Math.pow(2,w),I=R>>>1,O=I>>1,B=R-1,F=0;for(let X=0;X<w;X++)F=F<<1|m();let z=[],Y=0,$=R;for(;;){let X=Math.floor(((F-Y+1)*n-1)/$),te=0,k=i;for(;k-te>1;){let P=te+k>>>1;X<a[P]?k=P:te=P}if(te==0)break;z.push(te);let U=Y+Math.floor($*a[te]/n),ae=Y+Math.floor($*a[te+1]/n)-1;for(;!((U^ae)&I);)F=F<<1&B|m(),U=U<<1&B,ae=ae<<1&B|1;for(;U&~ae&O;)F=F&I|F<<1&B>>>1|m(),U=U<<1^I,ae=(ae^I)<<1|I|1;Y=U,$=1+ae-U}let K=i-4;return z.map(X=>{switch(X-K){case 3:return K+65792+(r[u++]<<16|r[u++]<<8|r[u++]);case 2:return K+256+(r[u++]<<8|r[u++]);case 1:return K+r[u++];default:return X-1}})}function rN(r){let e=0;return()=>r[e++]}function iN(r){return rN(tN(r))}function nN(r){return r&1?~r>>1:r>>1}function sN(r,e){let t=Array(r);for(let i=0;i<r;i++)t[i]=1+e();return t}function rw(r,e){let t=Array(r);for(let i=0,n=-1;i<r;i++)t[i]=n+=1+e();return t}function aN(r,e){let t=Array(r);for(let i=0,n=0;i<r;i++)t[i]=n+=nN(e());return t}function Wh(r,e){let t=rw(r(),r),i=r(),n=rw(i,r),a=sN(i,r);for(let c=0;c<i;c++)for(let u=0;u<a[c];u++)t.push(n[c]+u);return e?t.map(c=>e[c]):t}function oN(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(fN(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(uN(t,r))}return eN(Kw(e))}function cN(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function Vw(r,e,t){let i=Array(r).fill(void 0).map(()=>[]);for(let n=0;n<e;n++)aN(r,t).forEach((a,c)=>i[c].push(a));return i}function fN(r,e){let t=1+e(),i=e(),n=cN(e),a=Vw(n.length,1+r,e);return Kw(a.map((c,u)=>{let p=c[0],g=c.slice(1);return Array(n[u]).fill(void 0).map((m,w)=>{let R=w*i;return[p+w*t,g.map(I=>I+R)]})}))}function uN(r,e){let t=1+e();return Vw(t,1+r,e).map(i=>[i[0],i.slice(1)])}function hN(r){let e=Wh(r).sort((i,n)=>i-n);return t();function t(){let i=[];for(;;){let g=Wh(r,e);if(g.length==0)break;i.push({set:new Set(g),node:t()})}i.sort((g,m)=>m.set.size-g.set.size);let n=r(),a=n%3;n=n/3|0;let c=!!(n&1);n>>=1;let u=n==1,p=n==2;return{branches:i,valid:a,fe0f:c,save:u,check:p}}}function lN(){return iN(ZO("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}var Fh=lN();new Set(Wh(Fh)),new Set(Wh(Fh)),oN(Fh),hN(Fh),new Xt(Hw);var dN=new Uint8Array(32);dN.fill(0);var pN=`Ethereum Signed Message:
`;function Gw(r){return typeof r=="string"&&(r=Qp(r)),_1(zO([Qp(pN),Qp(String(r.length)),r]))}var gN="rlp/5.7.0";new Xt(gN);var vN="address/5.7.0",Ef=new Xt(vN);function iw(r){Ii(r,20)||Ef.throwArgumentError("invalid address","address",r),r=r.toLowerCase();let e=r.substring(2).split(""),t=new Uint8Array(40);for(let n=0;n<40;n++)t[n]=e[n].charCodeAt(0);let i=ar(_1(t));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(i[n>>1]&15)>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}var bN=9007199254740991;function mN(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}var x1={};for(let r=0;r<10;r++)x1[String(r)]=String(r);for(let r=0;r<26;r++)x1[String.fromCharCode(65+r)]=String(10+r);var nw=Math.floor(mN(bN));function yN(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(i=>x1[i]).join("");for(;e.length>=nw;){let i=e.substring(0,nw);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function wN(r){let e=null;if(typeof r!="string"&&Ef.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=iw(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&Ef.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==yN(r)&&Ef.throwArgumentError("bad icap checksum","address",r),e=$O(r.substring(4));e.length<40;)e="0"+e;e=iw("0x"+e)}else Ef.throwArgumentError("invalid address","address",r);return e}var _N="properties/5.7.0";new Xt(_N);function yf(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}new Xt(Hw);var EN=new Uint8Array(32);EN.fill(0),Pr.from(-1);var xN=Pr.from(0),AN=Pr.from(1);Pr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Kn(AN.toHexString(),32),Kn(xN.toHexString(),32);var Un={},et={},Tf=$w;function $w(r,e){if(!r)throw new Error(e||"Assertion failed")}$w.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var f1={exports:{}};typeof Object.create=="function"?f1.exports=function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:f1.exports=function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}};var SN=Tf,IN=f1.exports;et.inherits=IN;function MN(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function DN(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var i=0,n=0;n<r.length;n++){var a=r.charCodeAt(n);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):MN(r,n)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++n)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(n=0;n<r.length;n++)t[n]=r[n]|0;return t}et.toArray=DN;function RN(r){for(var e="",t=0;t<r.length;t++)e+=Ww(r[t].toString(16));return e}et.toHex=RN;function Jw(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}et.htonl=Jw;function PN(r,e){for(var t="",i=0;i<r.length;i++){var n=r[i];e==="little"&&(n=Jw(n)),t+=Yw(n.toString(16))}return t}et.toHex32=PN;function Ww(r){return r.length===1?"0"+r:r}et.zero2=Ww;function Yw(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}et.zero8=Yw;function CN(r,e,t,i){var n=t-e;SN(n%4===0);for(var a=new Array(n/4),c=0,u=e;c<a.length;c++,u+=4){var p;i==="big"?p=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:p=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],a[c]=p>>>0}return a}et.join32=CN;function ON(r,e){for(var t=new Array(r.length*4),i=0,n=0;i<r.length;i++,n+=4){var a=r[i];e==="big"?(t[n]=a>>>24,t[n+1]=a>>>16&255,t[n+2]=a>>>8&255,t[n+3]=a&255):(t[n+3]=a>>>24,t[n+2]=a>>>16&255,t[n+1]=a>>>8&255,t[n]=a&255)}return t}et.split32=ON;function NN(r,e){return r>>>e|r<<32-e}et.rotr32=NN;function TN(r,e){return r<<e|r>>>32-e}et.rotl32=TN;function LN(r,e){return r+e>>>0}et.sum32=LN;function qN(r,e,t){return r+e+t>>>0}et.sum32_3=qN;function BN(r,e,t,i){return r+e+t+i>>>0}et.sum32_4=BN;function FN(r,e,t,i,n){return r+e+t+i+n>>>0}et.sum32_5=FN;function UN(r,e,t,i){var n=r[e],a=r[e+1],c=i+a>>>0,u=(c<i?1:0)+t+n;r[e]=u>>>0,r[e+1]=c}et.sum64=UN;function zN(r,e,t,i){var n=e+i>>>0,a=(n<e?1:0)+r+t;return a>>>0}et.sum64_hi=zN;function kN(r,e,t,i){var n=e+i;return n>>>0}et.sum64_lo=kN;function jN(r,e,t,i,n,a,c,u){var p=0,g=e;g=g+i>>>0,p+=g<e?1:0,g=g+a>>>0,p+=g<a?1:0,g=g+u>>>0,p+=g<u?1:0;var m=r+t+n+c+p;return m>>>0}et.sum64_4_hi=jN;function HN(r,e,t,i,n,a,c,u){var p=e+i+a+u;return p>>>0}et.sum64_4_lo=HN;function KN(r,e,t,i,n,a,c,u,p,g){var m=0,w=e;w=w+i>>>0,m+=w<e?1:0,w=w+a>>>0,m+=w<a?1:0,w=w+u>>>0,m+=w<u?1:0,w=w+g>>>0,m+=w<g?1:0;var R=r+t+n+c+p+m;return R>>>0}et.sum64_5_hi=KN;function VN(r,e,t,i,n,a,c,u,p,g){var m=e+i+a+u+g;return m>>>0}et.sum64_5_lo=VN;function GN(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}et.rotr64_hi=GN;function $N(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}et.rotr64_lo=$N;function JN(r,e,t){return r>>>t}et.shr64_hi=JN;function WN(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}et.shr64_lo=WN;var oc={},sw=et,YN=Tf;function Uh(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}oc.BlockHash=Uh,Uh.prototype.update=function(r,e){if(r=sw.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var t=r.length%this._delta8;this.pending=r.slice(r.length-t,r.length),this.pending.length===0&&(this.pending=null),r=sw.join32(r,0,r.length-t,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},Uh.prototype.digest=function(r){return this.update(this._pad()),YN(this.pending===null),this._digest(r)},Uh.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,t=e-(r+this.padLength)%e,i=new Array(t+this.padLength);i[0]=128;for(var n=1;n<t;n++)i[n]=0;if(r<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=r>>>24&255,i[n++]=r>>>16&255,i[n++]=r>>>8&255,i[n++]=r&255}else for(i[n++]=r&255,i[n++]=r>>>8&255,i[n++]=r>>>16&255,i[n++]=r>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,a=8;a<this.padLength;a++)i[n++]=0;return i};var Qo={},Wn={},QN=et,Vn=QN.rotr32;function XN(r,e,t,i){if(r===0)return Qw(e,t,i);if(r===1||r===3)return Zw(e,t,i);if(r===2)return Xw(e,t,i)}Wn.ft_1=XN;function Qw(r,e,t){return r&e^~r&t}Wn.ch32=Qw;function Xw(r,e,t){return r&e^r&t^e&t}Wn.maj32=Xw;function Zw(r,e,t){return r^e^t}Wn.p32=Zw;function ZN(r){return Vn(r,2)^Vn(r,13)^Vn(r,22)}Wn.s0_256=ZN;function eT(r){return Vn(r,6)^Vn(r,11)^Vn(r,25)}Wn.s1_256=eT;function tT(r){return Vn(r,7)^Vn(r,18)^r>>>3}Wn.g0_256=tT;function rT(r){return Vn(r,17)^Vn(r,19)^r>>>10}Wn.g1_256=rT;var tc=et,iT=oc,nT=Wn,Zp=tc.rotl32,wf=tc.sum32,sT=tc.sum32_5,aT=nT.ft_1,e5=iT.BlockHash,oT=[1518500249,1859775393,2400959708,3395469782];function kn(){if(!(this instanceof kn))return new kn;e5.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}tc.inherits(kn,e5);var cT=kn;kn.blockSize=512,kn.outSize=160,kn.hmacStrength=80,kn.padLength=64,kn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=Zp(t[i-3]^t[i-8]^t[i-14]^t[i-16],1);var n=this.h[0],a=this.h[1],c=this.h[2],u=this.h[3],p=this.h[4];for(i=0;i<t.length;i++){var g=~~(i/20),m=sT(Zp(n,5),aT(g,a,c,u),p,t[i],oT[g]);p=u,u=c,c=Zp(a,30),a=n,n=m}this.h[0]=wf(this.h[0],n),this.h[1]=wf(this.h[1],a),this.h[2]=wf(this.h[2],c),this.h[3]=wf(this.h[3],u),this.h[4]=wf(this.h[4],p)},kn.prototype._digest=function(r){return r==="hex"?tc.toHex32(this.h,"big"):tc.split32(this.h,"big")};var rc=et,fT=oc,cc=Wn,uT=Tf,fn=rc.sum32,hT=rc.sum32_4,lT=rc.sum32_5,dT=cc.ch32,pT=cc.maj32,gT=cc.s0_256,vT=cc.s1_256,bT=cc.g0_256,mT=cc.g1_256,t5=fT.BlockHash,yT=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function jn(){if(!(this instanceof jn))return new jn;t5.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=yT,this.W=new Array(64)}rc.inherits(jn,t5);var r5=jn;jn.blockSize=512,jn.outSize=256,jn.hmacStrength=192,jn.padLength=64,jn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=hT(mT(t[i-2]),t[i-7],bT(t[i-15]),t[i-16]);var n=this.h[0],a=this.h[1],c=this.h[2],u=this.h[3],p=this.h[4],g=this.h[5],m=this.h[6],w=this.h[7];for(uT(this.k.length===t.length),i=0;i<t.length;i++){var R=lT(w,vT(p),dT(p,g,m),this.k[i],t[i]),I=fn(gT(n),pT(n,a,c));w=m,m=g,g=p,p=fn(u,R),u=c,c=a,a=n,n=fn(R,I)}this.h[0]=fn(this.h[0],n),this.h[1]=fn(this.h[1],a),this.h[2]=fn(this.h[2],c),this.h[3]=fn(this.h[3],u),this.h[4]=fn(this.h[4],p),this.h[5]=fn(this.h[5],g),this.h[6]=fn(this.h[6],m),this.h[7]=fn(this.h[7],w)},jn.prototype._digest=function(r){return r==="hex"?rc.toHex32(this.h,"big"):rc.split32(this.h,"big")};var u1=et,i5=r5;function Ns(){if(!(this instanceof Ns))return new Ns;i5.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}u1.inherits(Ns,i5);var wT=Ns;Ns.blockSize=512,Ns.outSize=224,Ns.hmacStrength=192,Ns.padLength=64,Ns.prototype._digest=function(r){return r==="hex"?u1.toHex32(this.h.slice(0,7),"big"):u1.split32(this.h.slice(0,7),"big")};var gi=et,_T=oc,ET=Tf,Gn=gi.rotr64_hi,$n=gi.rotr64_lo,n5=gi.shr64_hi,s5=gi.shr64_lo,fa=gi.sum64,e1=gi.sum64_hi,t1=gi.sum64_lo,xT=gi.sum64_4_hi,AT=gi.sum64_4_lo,ST=gi.sum64_5_hi,IT=gi.sum64_5_lo,a5=_T.BlockHash,MT=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function hn(){if(!(this instanceof hn))return new hn;a5.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=MT,this.W=new Array(160)}gi.inherits(hn,a5);var o5=hn;hn.blockSize=1024,hn.outSize=512,hn.hmacStrength=192,hn.padLength=128,hn.prototype._prepareBlock=function(r,e){for(var t=this.W,i=0;i<32;i++)t[i]=r[e+i];for(;i<t.length;i+=2){var n=FT(t[i-4],t[i-3]),a=UT(t[i-4],t[i-3]),c=t[i-14],u=t[i-13],p=qT(t[i-30],t[i-29]),g=BT(t[i-30],t[i-29]),m=t[i-32],w=t[i-31];t[i]=xT(n,a,c,u,p,g,m,w),t[i+1]=AT(n,a,c,u,p,g,m,w)}},hn.prototype._update=function(r,e){this._prepareBlock(r,e);var t=this.W,i=this.h[0],n=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4],p=this.h[5],g=this.h[6],m=this.h[7],w=this.h[8],R=this.h[9],I=this.h[10],O=this.h[11],B=this.h[12],F=this.h[13],z=this.h[14],Y=this.h[15];ET(this.k.length===t.length);for(var $=0;$<t.length;$+=2){var K=z,X=Y,te=TT(w,R),k=LT(w,R),U=DT(w,R,I,O,B),ae=RT(w,R,I,O,B,F),P=this.k[$],d=this.k[$+1],_=t[$],f=t[$+1],l=ST(K,X,te,k,U,ae,P,d,_,f),b=IT(K,X,te,k,U,ae,P,d,_,f);K=OT(i,n),X=NT(i,n),te=PT(i,n,a,c,u),k=CT(i,n,a,c,u,p);var S=e1(K,X,te,k),M=t1(K,X,te,k);z=B,Y=F,B=I,F=O,I=w,O=R,w=e1(g,m,l,b),R=t1(m,m,l,b),g=u,m=p,u=a,p=c,a=i,c=n,i=e1(l,b,S,M),n=t1(l,b,S,M)}fa(this.h,0,i,n),fa(this.h,2,a,c),fa(this.h,4,u,p),fa(this.h,6,g,m),fa(this.h,8,w,R),fa(this.h,10,I,O),fa(this.h,12,B,F),fa(this.h,14,z,Y)},hn.prototype._digest=function(r){return r==="hex"?gi.toHex32(this.h,"big"):gi.split32(this.h,"big")};function DT(r,e,t,i,n){var a=r&t^~r&n;return a<0&&(a+=4294967296),a}function RT(r,e,t,i,n,a){var c=e&i^~e&a;return c<0&&(c+=4294967296),c}function PT(r,e,t,i,n){var a=r&t^r&n^t&n;return a<0&&(a+=4294967296),a}function CT(r,e,t,i,n,a){var c=e&i^e&a^i&a;return c<0&&(c+=4294967296),c}function OT(r,e){var t=Gn(r,e,28),i=Gn(e,r,2),n=Gn(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function NT(r,e){var t=$n(r,e,28),i=$n(e,r,2),n=$n(e,r,7),a=t^i^n;return a<0&&(a+=4294967296),a}function TT(r,e){var t=Gn(r,e,14),i=Gn(r,e,18),n=Gn(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function LT(r,e){var t=$n(r,e,14),i=$n(r,e,18),n=$n(e,r,9),a=t^i^n;return a<0&&(a+=4294967296),a}function qT(r,e){var t=Gn(r,e,1),i=Gn(r,e,8),n=n5(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function BT(r,e){var t=$n(r,e,1),i=$n(r,e,8),n=s5(r,e,7),a=t^i^n;return a<0&&(a+=4294967296),a}function FT(r,e){var t=Gn(r,e,19),i=Gn(e,r,29),n=n5(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}function UT(r,e){var t=$n(r,e,19),i=$n(e,r,29),n=s5(r,e,6),a=t^i^n;return a<0&&(a+=4294967296),a}var h1=et,c5=o5;function Ts(){if(!(this instanceof Ts))return new Ts;c5.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}h1.inherits(Ts,c5);var zT=Ts;Ts.blockSize=1024,Ts.outSize=384,Ts.hmacStrength=192,Ts.padLength=128,Ts.prototype._digest=function(r){return r==="hex"?h1.toHex32(this.h.slice(0,12),"big"):h1.split32(this.h.slice(0,12),"big")},Qo.sha1=cT,Qo.sha224=wT,Qo.sha256=r5,Qo.sha384=zT,Qo.sha512=o5;var f5={},Ga=et,kT=oc,zh=Ga.rotl32,aw=Ga.sum32,_f=Ga.sum32_3,ow=Ga.sum32_4,u5=kT.BlockHash;function zn(){if(!(this instanceof zn))return new zn;u5.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Ga.inherits(zn,u5),f5.ripemd160=zn,zn.blockSize=512,zn.outSize=160,zn.hmacStrength=192,zn.padLength=64,zn.prototype._update=function(r,e){for(var t=this.h[0],i=this.h[1],n=this.h[2],a=this.h[3],c=this.h[4],u=t,p=i,g=n,m=a,w=c,R=0;R<80;R++){var I=aw(zh(ow(t,cw(R,i,n,a),r[KT[R]+e],jT(R)),GT[R]),c);t=c,c=a,a=zh(n,10),n=i,i=I,I=aw(zh(ow(u,cw(79-R,p,g,m),r[VT[R]+e],HT(R)),$T[R]),w),u=w,w=m,m=zh(g,10),g=p,p=I}I=_f(this.h[1],n,m),this.h[1]=_f(this.h[2],a,w),this.h[2]=_f(this.h[3],c,u),this.h[3]=_f(this.h[4],t,p),this.h[4]=_f(this.h[0],i,g),this.h[0]=I},zn.prototype._digest=function(r){return r==="hex"?Ga.toHex32(this.h,"little"):Ga.split32(this.h,"little")};function cw(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function jT(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function HT(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var KT=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],VT=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],GT=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],$T=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],JT=et,WT=Tf;function ec(r,e,t){if(!(this instanceof ec))return new ec(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(JT.toArray(e,t))}var YT=ec;ec.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),WT(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},ec.prototype.update=function(r,e){return this.inner.update(r,e),this},ec.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var e=r;e.utils=et,e.common=oc,e.sha=Qo,e.ripemd=f5,e.hmac=YT,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(Un);function fc(r,e,t){return t={path:e,exports:{},require:function(i,n){return QT(i,n??t.path)}},r(t,t.exports),t.exports}function QT(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var A1=h5;function h5(r,e){if(!r)throw new Error(e||"Assertion failed")}h5.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var ln=fc(function(r,e){var t=e;function i(c,u){if(Array.isArray(c))return c.slice();if(!c)return[];var p=[];if(typeof c!="string"){for(var g=0;g<c.length;g++)p[g]=c[g]|0;return p}if(u==="hex"){c=c.replace(/[^a-z0-9]+/ig,""),c.length%2!==0&&(c="0"+c);for(var g=0;g<c.length;g+=2)p.push(parseInt(c[g]+c[g+1],16))}else for(var g=0;g<c.length;g++){var m=c.charCodeAt(g),w=m>>8,R=m&255;w?p.push(w,R):p.push(R)}return p}t.toArray=i;function n(c){return c.length===1?"0"+c:c}t.zero2=n;function a(c){for(var u="",p=0;p<c.length;p++)u+=n(c[p].toString(16));return u}t.toHex=a,t.encode=function(c,u){return u==="hex"?a(c):c}}),Mi=fc(function(r,e){var t=e;t.assert=A1,t.toArray=ln.toArray,t.zero2=ln.zero2,t.toHex=ln.toHex,t.encode=ln.encode;function i(p,g,m){var w=new Array(Math.max(p.bitLength(),m)+1);w.fill(0);for(var R=1<<g+1,I=p.clone(),O=0;O<w.length;O++){var B,F=I.andln(R-1);I.isOdd()?(F>(R>>1)-1?B=(R>>1)-F:B=F,I.isubn(B)):B=0,w[O]=B,I.iushrn(1)}return w}t.getNAF=i;function n(p,g){var m=[[],[]];p=p.clone(),g=g.clone();for(var w=0,R=0,I;p.cmpn(-w)>0||g.cmpn(-R)>0;){var O=p.andln(3)+w&3,B=g.andln(3)+R&3;O===3&&(O=-1),B===3&&(B=-1);var F;O&1?(I=p.andln(7)+w&7,(I===3||I===5)&&B===2?F=-O:F=O):F=0,m[0].push(F);var z;B&1?(I=g.andln(7)+R&7,(I===3||I===5)&&O===2?z=-B:z=B):z=0,m[1].push(z),2*w===F+1&&(w=1-w),2*R===z+1&&(R=1-R),p.iushrn(1),g.iushrn(1)}return m}t.getJSF=n;function a(p,g,m){var w="_"+g;p.prototype[g]=function(){return this[w]!==void 0?this[w]:this[w]=m.call(this)}}t.cachedProperty=a;function c(p){return typeof p=="string"?t.toArray(p,"hex"):p}t.parseBytes=c;function u(p){return new He(p,"hex","le")}t.intFromLE=u}),kh=Mi.getNAF,XT=Mi.getJSF,Yh=Mi.assert;function ua(r,e){this.type=r,this.p=new He(e.p,16),this.red=e.prime?He.red(e.prime):He.mont(this.p),this.zero=new He(0).toRed(this.red),this.one=new He(1).toRed(this.red),this.two=new He(2).toRed(this.red),this.n=e.n&&new He(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Qa=ua;ua.prototype.point=function(){throw new Error("Not implemented")},ua.prototype.validate=function(){throw new Error("Not implemented")},ua.prototype._fixedNafMul=function(r,e){Yh(r.precomputed);var t=r._getDoubles(),i=kh(e,1,this._bitLength),n=(1<<t.step+1)-(t.step%2===0?2:1);n/=3;var a=[],c,u;for(c=0;c<i.length;c+=t.step){u=0;for(var p=c+t.step-1;p>=c;p--)u=(u<<1)+i[p];a.push(u)}for(var g=this.jpoint(null,null,null),m=this.jpoint(null,null,null),w=n;w>0;w--){for(c=0;c<a.length;c++)u=a[c],u===w?m=m.mixedAdd(t.points[c]):u===-w&&(m=m.mixedAdd(t.points[c].neg()));g=g.add(m)}return g.toP()},ua.prototype._wnafMul=function(r,e){var t=4,i=r._getNAFPoints(t);t=i.wnd;for(var n=i.points,a=kh(e,t,this._bitLength),c=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var p=0;u>=0&&a[u]===0;u--)p++;if(u>=0&&p++,c=c.dblp(p),u<0)break;var g=a[u];Yh(g!==0),r.type==="affine"?g>0?c=c.mixedAdd(n[g-1>>1]):c=c.mixedAdd(n[-g-1>>1].neg()):g>0?c=c.add(n[g-1>>1]):c=c.add(n[-g-1>>1].neg())}return r.type==="affine"?c.toP():c},ua.prototype._wnafMulAdd=function(r,e,t,i,n){var a=this._wnafT1,c=this._wnafT2,u=this._wnafT3,p=0,g,m,w;for(g=0;g<i;g++){w=e[g];var R=w._getNAFPoints(r);a[g]=R.wnd,c[g]=R.points}for(g=i-1;g>=1;g-=2){var I=g-1,O=g;if(a[I]!==1||a[O]!==1){u[I]=kh(t[I],a[I],this._bitLength),u[O]=kh(t[O],a[O],this._bitLength),p=Math.max(u[I].length,p),p=Math.max(u[O].length,p);continue}var B=[e[I],null,null,e[O]];e[I].y.cmp(e[O].y)===0?(B[1]=e[I].add(e[O]),B[2]=e[I].toJ().mixedAdd(e[O].neg())):e[I].y.cmp(e[O].y.redNeg())===0?(B[1]=e[I].toJ().mixedAdd(e[O]),B[2]=e[I].add(e[O].neg())):(B[1]=e[I].toJ().mixedAdd(e[O]),B[2]=e[I].toJ().mixedAdd(e[O].neg()));var F=[-3,-1,-5,-7,0,7,5,1,3],z=XT(t[I],t[O]);for(p=Math.max(z[0].length,p),u[I]=new Array(p),u[O]=new Array(p),m=0;m<p;m++){var Y=z[0][m]|0,$=z[1][m]|0;u[I][m]=F[(Y+1)*3+($+1)],u[O][m]=0,c[I]=B}}var K=this.jpoint(null,null,null),X=this._wnafT4;for(g=p;g>=0;g--){for(var te=0;g>=0;){var k=!0;for(m=0;m<i;m++)X[m]=u[m][g]|0,X[m]!==0&&(k=!1);if(!k)break;te++,g--}if(g>=0&&te++,K=K.dblp(te),g<0)break;for(m=0;m<i;m++){var U=X[m];U!==0&&(U>0?w=c[m][U-1>>1]:U<0&&(w=c[m][-U-1>>1].neg()),w.type==="affine"?K=K.mixedAdd(w):K=K.add(w))}}for(g=0;g<i;g++)c[g]=null;return n?K:K.toP()};function Ji(r,e){this.curve=r,this.type=e,this.precomputed=null}ua.BasePoint=Ji,Ji.prototype.eq=function(){throw new Error("Not implemented")},Ji.prototype.validate=function(){return this.curve.validate(this)},ua.prototype.decodePoint=function(r,e){r=Mi.toArray(r,e);var t=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*t){r[0]===6?Yh(r[r.length-1]%2===0):r[0]===7&&Yh(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+t),r.slice(1+t,1+2*t));return i}else if((r[0]===2||r[0]===3)&&r.length-1===t)return this.pointFromX(r.slice(1,1+t),r[0]===3);throw new Error("Unknown point format")},Ji.prototype.encodeCompressed=function(r){return this.encode(r,!0)},Ji.prototype._encode=function(r){var e=this.curve.p.byteLength(),t=this.getX().toArray("be",e);return r?[this.getY().isEven()?2:3].concat(t):[4].concat(t,this.getY().toArray("be",e))},Ji.prototype.encode=function(r,e){return Mi.encode(this._encode(e),r)},Ji.prototype.precompute=function(r){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,r),e.beta=this._getBeta(),this.precomputed=e,this},Ji.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((r.bitLength()+1)/e.step):!1},Ji.prototype._getDoubles=function(r,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var t=[this],i=this,n=0;n<e;n+=r){for(var a=0;a<r;a++)i=i.dbl();t.push(i)}return{step:r,points:t}},Ji.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],t=(1<<r)-1,i=t===1?null:this.dbl(),n=1;n<t;n++)e[n]=e[n-1].add(i);return{wnd:r,points:e}},Ji.prototype._getBeta=function(){return null},Ji.prototype.dblp=function(r){for(var e=this,t=0;t<r;t++)e=e.dbl();return e};var S1=fc(function(r){typeof Object.create=="function"?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}}),ZT=Mi.assert;function Yi(r){Qa.call(this,"short",r),this.a=new He(r.a,16).toRed(this.red),this.b=new He(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}S1(Yi,Qa);var eL=Yi;Yi.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,t;if(r.beta)e=new He(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=i[0].cmp(i[1])<0?i[0]:i[1],e=e.toRed(this.red)}if(r.lambda)t=new He(r.lambda,16);else{var n=this._getEndoRoots(this.n);this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))===0?t=n[0]:(t=n[1],ZT(this.g.mul(t).x.cmp(this.g.x.redMul(e))===0))}var a;return r.basis?a=r.basis.map(function(c){return{a:new He(c.a,16),b:new He(c.b,16)}}):a=this._getEndoBasis(t),{beta:e,lambda:t,basis:a}}},Yi.prototype._getEndoRoots=function(r){var e=r===this.p?this.red:He.mont(r),t=new He(2).toRed(e).redInvm(),i=t.redNeg(),n=new He(3).toRed(e).redNeg().redSqrt().redMul(t),a=i.redAdd(n).fromRed(),c=i.redSub(n).fromRed();return[a,c]},Yi.prototype._getEndoBasis=function(r){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),t=r,i=this.n.clone(),n=new He(1),a=new He(0),c=new He(0),u=new He(1),p,g,m,w,R,I,O,B=0,F,z;t.cmpn(0)!==0;){var Y=i.div(t);F=i.sub(Y.mul(t)),z=c.sub(Y.mul(n));var $=u.sub(Y.mul(a));if(!m&&F.cmp(e)<0)p=O.neg(),g=n,m=F.neg(),w=z;else if(m&&++B===2)break;O=F,i=t,t=F,c=n,n=z,u=a,a=$}R=F.neg(),I=z;var K=m.sqr().add(w.sqr()),X=R.sqr().add(I.sqr());return X.cmp(K)>=0&&(R=p,I=g),m.negative&&(m=m.neg(),w=w.neg()),R.negative&&(R=R.neg(),I=I.neg()),[{a:m,b:w},{a:R,b:I}]},Yi.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],i=e[1],n=i.b.mul(r).divRound(this.n),a=t.b.neg().mul(r).divRound(this.n),c=n.mul(t.a),u=a.mul(i.a),p=n.mul(t.b),g=a.mul(i.b),m=r.sub(c).sub(u),w=p.add(g).neg();return{k1:m,k2:w}},Yi.prototype.pointFromX=function(r,e){r=new He(r,16),r.red||(r=r.toRed(this.red));var t=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=t.redSqrt();if(i.redSqr().redSub(t).cmp(this.zero)!==0)throw new Error("invalid point");var n=i.fromRed().isOdd();return(e&&!n||!e&&n)&&(i=i.redNeg()),this.point(r,i)},Yi.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,i=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return t.redSqr().redISub(n).cmpn(0)===0},Yi.prototype._endoWnafMulAdd=function(r,e,t){for(var i=this._endoWnafT1,n=this._endoWnafT2,a=0;a<r.length;a++){var c=this._endoSplit(e[a]),u=r[a],p=u._getBeta();c.k1.negative&&(c.k1.ineg(),u=u.neg(!0)),c.k2.negative&&(c.k2.ineg(),p=p.neg(!0)),i[a*2]=u,i[a*2+1]=p,n[a*2]=c.k1,n[a*2+1]=c.k2}for(var g=this._wnafMulAdd(1,i,n,a*2,t),m=0;m<a*2;m++)i[m]=null,n[m]=null;return g};function _r(r,e,t,i){Qa.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new He(e,16),this.y=new He(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}S1(_r,Qa.BasePoint),Yi.prototype.point=function(r,e,t){return new _r(this,r,e,t)},Yi.prototype.pointFromJSON=function(r,e){return _r.fromJSON(this,r,e)},_r.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,i=function(n){return t.point(n.x.redMul(t.endo.beta),n.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e}},_r.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},_r.fromJSON=function(r,e,t){typeof e=="string"&&(e=JSON.parse(e));var i=r.point(e[0],e[1],t);if(!e[2])return i;function n(c){return r.point(c[0],c[1],t)}var a=e[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(n))}},i},_r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},_r.prototype.isInfinity=function(){return this.inf},_r.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var e=this.y.redSub(r.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),i=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,i)},_r.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),i=r.redInvm(),n=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(i),a=n.redSqr().redISub(this.x.redAdd(this.x)),c=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,c)},_r.prototype.getX=function(){return this.x.fromRed()},_r.prototype.getY=function(){return this.y.fromRed()},_r.prototype.mul=function(r){return r=new He(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},_r.prototype.mulAdd=function(r,e,t){var i=[this,e],n=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},_r.prototype.jmulAdd=function(r,e,t){var i=[this,e],n=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},_r.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},_r.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,i=function(n){return n.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e},_r.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function Dr(r,e,t,i){Qa.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new He(0)):(this.x=new He(e,16),this.y=new He(t,16),this.z=new He(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}S1(Dr,Qa.BasePoint),Yi.prototype.jpoint=function(r,e,t){return new Dr(this,r,e,t)},Dr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),i=this.y.redMul(e).redMul(r);return this.curve.point(t,i)},Dr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Dr.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),i=this.x.redMul(e),n=r.x.redMul(t),a=this.y.redMul(e.redMul(r.z)),c=r.y.redMul(t.redMul(this.z)),u=i.redSub(n),p=a.redSub(c);if(u.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=u.redSqr(),m=g.redMul(u),w=i.redMul(g),R=p.redSqr().redIAdd(m).redISub(w).redISub(w),I=p.redMul(w.redISub(R)).redISub(a.redMul(m)),O=this.z.redMul(r.z).redMul(u);return this.curve.jpoint(R,I,O)},Dr.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,i=r.x.redMul(e),n=this.y,a=r.y.redMul(e).redMul(this.z),c=t.redSub(i),u=n.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var p=c.redSqr(),g=p.redMul(c),m=t.redMul(p),w=u.redSqr().redIAdd(g).redISub(m).redISub(m),R=u.redMul(m.redISub(w)).redISub(n.redMul(g)),I=this.z.redMul(c);return this.curve.jpoint(w,R,I)},Dr.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<r;e++)t=t.dbl();return t}var i=this.curve.a,n=this.curve.tinv,a=this.x,c=this.y,u=this.z,p=u.redSqr().redSqr(),g=c.redAdd(c);for(e=0;e<r;e++){var m=a.redSqr(),w=g.redSqr(),R=w.redSqr(),I=m.redAdd(m).redIAdd(m).redIAdd(i.redMul(p)),O=a.redMul(w),B=I.redSqr().redISub(O.redAdd(O)),F=O.redISub(B),z=I.redMul(F);z=z.redIAdd(z).redISub(R);var Y=g.redMul(u);e+1<r&&(p=p.redMul(R)),a=B,u=Y,g=z}return this.curve.jpoint(a,g.redMul(n),u)},Dr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Dr.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),c=this.x.redAdd(n).redSqr().redISub(i).redISub(a);c=c.redIAdd(c);var u=i.redAdd(i).redIAdd(i),p=u.redSqr().redISub(c).redISub(c),g=a.redIAdd(a);g=g.redIAdd(g),g=g.redIAdd(g),r=p,e=u.redMul(c.redISub(p)).redISub(g),t=this.y.redAdd(this.y)}else{var m=this.x.redSqr(),w=this.y.redSqr(),R=w.redSqr(),I=this.x.redAdd(w).redSqr().redISub(m).redISub(R);I=I.redIAdd(I);var O=m.redAdd(m).redIAdd(m),B=O.redSqr(),F=R.redIAdd(R);F=F.redIAdd(F),F=F.redIAdd(F),r=B.redISub(I).redISub(I),e=O.redMul(I.redISub(r)).redISub(F),t=this.y.redMul(this.z),t=t.redIAdd(t)}return this.curve.jpoint(r,e,t)},Dr.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),c=this.x.redAdd(n).redSqr().redISub(i).redISub(a);c=c.redIAdd(c);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),p=u.redSqr().redISub(c).redISub(c);r=p;var g=a.redIAdd(a);g=g.redIAdd(g),g=g.redIAdd(g),e=u.redMul(c.redISub(p)).redISub(g),t=this.y.redAdd(this.y)}else{var m=this.z.redSqr(),w=this.y.redSqr(),R=this.x.redMul(w),I=this.x.redSub(m).redMul(this.x.redAdd(m));I=I.redAdd(I).redIAdd(I);var O=R.redIAdd(R);O=O.redIAdd(O);var B=O.redAdd(O);r=I.redSqr().redISub(B),t=this.y.redAdd(this.z).redSqr().redISub(w).redISub(m);var F=w.redSqr();F=F.redIAdd(F),F=F.redIAdd(F),F=F.redIAdd(F),e=I.redMul(O.redISub(r)).redISub(F)}return this.curve.jpoint(r,e,t)},Dr.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,i=this.z,n=i.redSqr().redSqr(),a=e.redSqr(),c=t.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(r.redMul(n)),p=e.redAdd(e);p=p.redIAdd(p);var g=p.redMul(c),m=u.redSqr().redISub(g.redAdd(g)),w=g.redISub(m),R=c.redSqr();R=R.redIAdd(R),R=R.redIAdd(R),R=R.redIAdd(R);var I=u.redMul(w).redISub(R),O=t.redAdd(t).redMul(i);return this.curve.jpoint(m,I,O)},Dr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),i=e.redSqr(),n=r.redAdd(r).redIAdd(r),a=n.redSqr(),c=this.x.redAdd(e).redSqr().redISub(r).redISub(i);c=c.redIAdd(c),c=c.redAdd(c).redIAdd(c),c=c.redISub(a);var u=c.redSqr(),p=i.redIAdd(i);p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var g=n.redIAdd(c).redSqr().redISub(a).redISub(u).redISub(p),m=e.redMul(g);m=m.redIAdd(m),m=m.redIAdd(m);var w=this.x.redMul(u).redISub(m);w=w.redIAdd(w),w=w.redIAdd(w);var R=this.y.redMul(g.redMul(p.redISub(g)).redISub(c.redMul(u)));R=R.redIAdd(R),R=R.redIAdd(R),R=R.redIAdd(R);var I=this.z.redAdd(c).redSqr().redISub(t).redISub(u);return this.curve.jpoint(w,R,I)},Dr.prototype.mul=function(r,e){return r=new He(r,e),this.curve._wnafMul(this,r)},Dr.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0)!==0)return!1;var i=e.redMul(this.z),n=t.redMul(r.z);return this.y.redMul(n).redISub(r.y.redMul(i)).cmpn(0)===0},Dr.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(this.x.cmp(t)===0)return!0;for(var i=r.clone(),n=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),this.x.cmp(t)===0)return!0}},Dr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Dr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Kh=fc(function(r,e){var t=e;t.base=Qa,t.short=eL,t.mont=null,t.edwards=null}),Vh=fc(function(r,e){var t=e,i=Mi.assert;function n(u){u.type==="short"?this.curve=new Kh.short(u):u.type==="edwards"?this.curve=new Kh.edwards(u):this.curve=new Kh.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=n;function a(u,p){Object.defineProperty(t,u,{configurable:!0,enumerable:!0,get:function(){var g=new n(p);return Object.defineProperty(t,u,{configurable:!0,enumerable:!0,value:g}),g}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Un.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Un.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Un.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Un.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Un.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Un.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Un.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=null.crash()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Un.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})});function ha(r){if(!(this instanceof ha))return new ha(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ln.toArray(r.entropy,r.entropyEnc||"hex"),t=ln.toArray(r.nonce,r.nonceEnc||"hex"),i=ln.toArray(r.pers,r.persEnc||"hex");A1(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var fw=ha;ha.prototype._init=function(r,e,t){var i=r.concat(e).concat(t);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},ha.prototype._hmac=function(){return new Un.hmac(this.hash,this.K)},ha.prototype._update=function(r){var e=this._hmac().update(this.V).update([0]);r&&(e=e.update(r)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},ha.prototype.reseed=function(r,e,t,i){typeof e!="string"&&(i=t,t=e,e=null),r=ln.toArray(r,e),t=ln.toArray(t,i),A1(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(t||[])),this._reseed=1},ha.prototype.generate=function(r,e,t,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(i=t,t=e,e=null),t&&(t=ln.toArray(t,i||"hex"),this._update(t));for(var n=[];n.length<r;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var a=n.slice(0,r);return this._update(t),this._reseed++,ln.encode(a,e)};var r1=Mi.assert;function Ur(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var i1=Ur;Ur.fromPublic=function(r,e,t){return e instanceof Ur?e:new Ur(r,{pub:e,pubEnc:t})},Ur.fromPrivate=function(r,e,t){return e instanceof Ur?e:new Ur(r,{priv:e,privEnc:t})},Ur.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ur.prototype.getPublic=function(r,e){return typeof r=="string"&&(e=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,r):this.pub},Ur.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},Ur.prototype._importPrivate=function(r,e){this.priv=new He(r,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Ur.prototype._importPublic=function(r,e){if(r.x||r.y){this.ec.curve.type==="mont"?r1(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r1(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,e)},Ur.prototype.derive=function(r){return r.validate()||r1(r.validate(),"public point not validated"),r.mul(this.priv).getX()},Ur.prototype.sign=function(r,e,t){return this.ec.sign(r,this,e,t)},Ur.prototype.verify=function(r,e){return this.ec.verify(r,e,this)},Ur.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var tL=Mi.assert;function tl(r,e){if(r instanceof tl)return r;this._importDER(r,e)||(tL(r.r&&r.s,"Signature without r or s"),this.r=new He(r.r,16),this.s=new He(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var jh=tl;function rL(){this.place=0}function n1(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var n=0,a=0,c=e.place;a<i;a++,c++)n<<=8,n|=r[c],n>>>=0;return n<=127?!1:(e.place=c,n)}function uw(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}tl.prototype._importDER=function(r,e){r=Mi.toArray(r,e);var t=new rL;if(r[t.place++]!==48)return!1;var i=n1(r,t);if(i===!1||i+t.place!==r.length||r[t.place++]!==2)return!1;var n=n1(r,t);if(n===!1)return!1;var a=r.slice(t.place,n+t.place);if(t.place+=n,r[t.place++]!==2)return!1;var c=n1(r,t);if(c===!1||r.length!==c+t.place)return!1;var u=r.slice(t.place,c+t.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new He(a),this.s=new He(u),this.recoveryParam=null,!0};function s1(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}tl.prototype.toDER=function(r){var e=this.r.toArray(),t=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),t[0]&128&&(t=[0].concat(t)),e=uw(e),t=uw(t);!t[0]&&!(t[1]&128);)t=t.slice(1);var i=[2];s1(i,e.length),i=i.concat(e),i.push(2),s1(i,t.length);var n=i.concat(t),a=[48];return s1(a,n.length),a=a.concat(n),Mi.encode(a,r)};var iL=function(){throw new Error("unsupported")},l5=Mi.assert;function Wi(r){if(!(this instanceof Wi))return new Wi(r);typeof r=="string"&&(l5(Object.prototype.hasOwnProperty.call(Vh,r),"Unknown curve "+r),r=Vh[r]),r instanceof Vh.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var nL=Wi;Wi.prototype.keyPair=function(r){return new i1(this,r)},Wi.prototype.keyFromPrivate=function(r,e){return i1.fromPrivate(this,r,e)},Wi.prototype.keyFromPublic=function(r,e){return i1.fromPublic(this,r,e)},Wi.prototype.genKeyPair=function(r){r||(r={});for(var e=new fw({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||iL(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),t=this.n.byteLength(),i=this.n.sub(new He(2));;){var n=new He(e.generate(t));if(!(n.cmp(i)>0))return n.iaddn(1),this.keyFromPrivate(n)}},Wi.prototype._truncateToN=function(r,e){var t=r.byteLength()*8-this.n.bitLength();return t>0&&(r=r.ushrn(t)),!e&&r.cmp(this.n)>=0?r.sub(this.n):r},Wi.prototype.sign=function(r,e,t,i){typeof t=="object"&&(i=t,t=null),i||(i={}),e=this.keyFromPrivate(e,t),r=this._truncateToN(new He(r,16));for(var n=this.n.byteLength(),a=e.getPrivate().toArray("be",n),c=r.toArray("be",n),u=new fw({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),p=this.n.sub(new He(1)),g=0;;g++){var m=i.k?i.k(g):new He(u.generate(this.n.byteLength()));if(m=this._truncateToN(m,!0),!(m.cmpn(1)<=0||m.cmp(p)>=0)){var w=this.g.mul(m);if(!w.isInfinity()){var R=w.getX(),I=R.umod(this.n);if(I.cmpn(0)!==0){var O=m.invm(this.n).mul(I.mul(e.getPrivate()).iadd(r));if(O=O.umod(this.n),O.cmpn(0)!==0){var B=(w.getY().isOdd()?1:0)|(R.cmp(I)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),B^=1),new jh({r:I,s:O,recoveryParam:B})}}}}}},Wi.prototype.verify=function(r,e,t,i){r=this._truncateToN(new He(r,16)),t=this.keyFromPublic(t,i),e=new jh(e,"hex");var n=e.r,a=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),u=c.mul(r).umod(this.n),p=c.mul(n).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(u,t.getPublic(),p),g.isInfinity()?!1:g.eqXToP(n)):(g=this.g.mulAdd(u,t.getPublic(),p),g.isInfinity()?!1:g.getX().umod(this.n).cmp(n)===0)},Wi.prototype.recoverPubKey=function(r,e,t,i){l5((3&t)===t,"The recovery param is more than two bits"),e=new jh(e,i);var n=this.n,a=new He(r),c=e.r,u=e.s,p=t&1,g=t>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?c=this.curve.pointFromX(c.add(this.curve.n),p):c=this.curve.pointFromX(c,p);var m=e.r.invm(n),w=n.sub(a).mul(m).umod(n),R=u.mul(m).umod(n);return this.g.mulAdd(w,c,R)},Wi.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new jh(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var a;try{a=this.recoverPubKey(r,e,n)}catch{continue}if(a.eq(t))return n}throw new Error("Unable to find valid recovery factor")};var sL=fc(function(r,e){var t=e;t.version="6.5.4",t.utils=Mi,t.rand=function(){throw new Error("unsupported")},t.curve=Kh,t.curves=Vh,t.ec=nL,t.eddsa=null}),aL=sL.ec,oL="signing-key/5.7.0",l1=new Xt(oL),a1=null;function Hn(){return a1||(a1=new aL("secp256k1")),a1}var d1=class{constructor(e){yf(this,"curve","secp256k1"),yf(this,"privateKey",Wr(e)),jO(this.privateKey)!==32&&l1.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");let t=Hn().keyFromPrivate(ar(this.privateKey));yf(this,"publicKey","0x"+t.getPublic(!1,"hex")),yf(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),yf(this,"_isSigningKey",!0)}_addPoint(e){let t=Hn().keyFromPublic(ar(this.publicKey)),i=Hn().keyFromPublic(ar(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){let t=Hn().keyFromPrivate(ar(this.privateKey)),i=ar(e);i.length!==32&&l1.throwArgumentError("bad digest length","digest",e);let n=t.sign(i,{canonical:!0});return Lw({recoveryParam:n.recoveryParam,r:Kn("0x"+n.r.toString(16),32),s:Kn("0x"+n.s.toString(16),32)})}computeSharedSecret(e){let t=Hn().keyFromPrivate(ar(this.privateKey)),i=Hn().keyFromPublic(ar(d5(e)));return Kn("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}};function cL(r,e){let t=Lw(e),i={r:ar(t.r),s:ar(t.s)};return"0x"+Hn().recoverPubKey(ar(r),i,t.recoveryParam).encode("hex",!1)}function d5(r,e){let t=ar(r);if(t.length===32){let i=new d1(t);return e?"0x"+Hn().keyFromPrivate(t).getPublic(!0,"hex"):i.publicKey}else{if(t.length===33)return e?Wr(t):"0x"+Hn().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+Hn().keyFromPublic(t).getPublic(!0,"hex"):Wr(t)}return l1.throwArgumentError("invalid public or private key","key","[REDACTED]")}var fL="transactions/5.7.0";new Xt(fL);var hw;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(hw||(hw={}));function uL(r){let e=d5(r);return wN(Q6(_1(Q6(e,1)),12))}function hL(r,e){return uL(cL(ar(r),e))}var lL="https://rpc.walletconnect.org/v1";function dL(r,e,t,i,n,a){return L(this,null,function*(){switch(t.t){case"eip191":return pL(r,e,t.s);case"eip1271":return yield gL(r,e,t.s,i,n,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}})}function pL(r,e,t){return hL(Gw(e),t).toLowerCase()===r.toLowerCase()}function gL(r,e,t,i,n,a){return L(this,null,function*(){try{let c="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",p="0000000000000000000000000000000000000000000000000000000000000041",g=t.substring(2),m=Gw(e).substring(2),w=c+m+u+p+g,R=yield fetch(`${a||lL}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:vL(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:w},"latest"]})}),{result:I}=yield R.json();return I?I.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}})}function vL(){return Date.now()+Math.floor(Math.random()*1e3)}var bL=Object.defineProperty,mL=Object.defineProperties,yL=Object.getOwnPropertyDescriptors,lw=Object.getOwnPropertySymbols,wL=Object.prototype.hasOwnProperty,_L=Object.prototype.propertyIsEnumerable,dw=(r,e,t)=>e in r?bL(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,EL=(r,e)=>{for(var t in e||(e={}))wL.call(e,t)&&dw(r,t,e[t]);if(lw)for(var t of lw(e))_L.call(e,t)&&dw(r,t,e[t]);return r},xL=(r,e)=>mL(r,yL(e)),AL="did:pkh:",I1=r=>r?.split(":"),p5=r=>{let e=r&&I1(r);if(e)return r.includes(AL)?e[3]:e[1]},M1=r=>{let e=r&&I1(r);if(e)return e[2]+":"+e[3]},Lf=r=>{let e=r&&I1(r);if(e)return e.pop()};function D1(r){return L(this,null,function*(){let{cacao:e,projectId:t}=r,{s:i,p:n}=e,a=R1(n,n.iss),c=Lf(n.iss);return yield dL(c,a,i,p5(n.iss),t)})}var R1=(r,e)=>{let t=`${r.domain} wants you to sign in with your Ethereum account:`,i=Lf(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=r.statement||void 0,a=`URI: ${r.aud||r.uri}`,c=`Version: ${r.version}`,u=`Chain ID: ${p5(e)}`,p=`Nonce: ${r.nonce}`,g=`Issued At: ${r.iat}`,m=r.exp?`Expiration Time: ${r.exp}`:void 0,w=r.nbf?`Not Before: ${r.nbf}`:void 0,R=r.requestId?`Request ID: ${r.requestId}`:void 0,I=r.resources?`Resources:${r.resources.map(B=>`
- ${B}`).join("")}`:void 0,O=qf(r.resources);if(O){let B=Df(O);n=CL(n,B)}return[t,i,"",n,"",a,c,u,p,g,m,w,R,I].filter(B=>B!=null).join(`
`)};function SL(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function IL(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function $a(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");let e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{let i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(n=>{let a=i[n];if(!Array.isArray(a))throw new Error(`Ability limits ${n} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);a.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${c}`)})})})}function ML(r,e,t,i={}){return t?.sort((n,a)=>n.localeCompare(a)),{att:{[r]:DL(e,t,i)}}}function DL(r,e,t={}){e=e?.sort((n,a)=>n.localeCompare(a));let i=e.map(n=>({[`${r}/${n}`]:[t]}));return Object.assign({},...i)}function g5(r){return $a(r),`urn:recap:${SL(r).replace(/=/g,"")}`}function Df(r){let e=IL(r.replace("urn:recap:",""));return $a(e),e}function v5(r,e,t){let i=ML(r,e,t);return g5(i)}function RL(r){return r&&r.includes("urn:recap:")}function b5(r,e){let t=Df(r),i=Df(e),n=PL(t,i);return g5(n)}function PL(r,e){$a(r),$a(e);let t=Object.keys(r.att).concat(Object.keys(e.att)).sort((n,a)=>n.localeCompare(a)),i={att:{}};return t.forEach(n=>{var a,c;Object.keys(((a=r.att)==null?void 0:a[n])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[n])||{})).sort((u,p)=>u.localeCompare(p)).forEach(u=>{var p,g;i.att[n]=xL(EL({},i.att[n]),{[u]:((p=r.att[n])==null?void 0:p[u])||((g=e.att[n])==null?void 0:g[u])})})}),i}function CL(r="",e){$a(e);let t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;let i=[],n=0;Object.keys(e.att).forEach(u=>{let p=Object.keys(e.att[u]).map(w=>({ability:w.split("/")[0],action:w.split("/")[1]}));p.sort((w,R)=>w.action.localeCompare(R.action));let g={};p.forEach(w=>{g[w.ability]||(g[w.ability]=[]),g[w.ability].push(w.action)});let m=Object.keys(g).map(w=>(n++,`(${n}) '${w}': '${g[w].join("', '")}' for '${u}'.`));i.push(m.join(", ").replace(".,","."))});let a=i.join(" "),c=`${t}${a}`;return`${r?r+" ":""}${c}`}function P1(r){var e;let t=Df(r);$a(t);let i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function C1(r){let e=Df(r);$a(e);let t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(n=>{var a;(a=n?.[0])!=null&&a.chains&&t.push(n[0].chains)})}),[...new Set(t.flat())]}function qf(r){if(!r)return;let e=r?.[r.length-1];return RL(e)?e:void 0}var m5="base10",zr="base16",Yn="base64pad",uc="base64url",Bf="utf8",y5=0,dn=1,hc=2,OL=0,pw=1,If=12,O1=32;function w5(){let r=Xh.generateKeyPair();return{privateKey:nr(r.secretKey,zr),publicKey:nr(r.publicKey,zr)}}function rl(){let r=(0,Rf.randomBytes)(O1);return nr(r,zr)}function _5(r,e){let t=Xh.sharedKey(hr(r,zr),hr(e,zr),!0),i=new _w.HKDF(nc.SHA256,t).expand(O1);return nr(i,zr)}function lc(r){let e=(0,nc.hash)(hr(r,zr));return nr(e,zr)}function pn(r){let e=(0,nc.hash)(hr(r,Bf));return nr(e,zr)}function E5(r){return hr(`${r}`,m5)}function la(r){return Number(nr(r,m5))}function x5(r){let e=E5(typeof r.type<"u"?r.type:y5);if(la(e)===dn&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");let t=typeof r.senderPublicKey<"u"?hr(r.senderPublicKey,zr):void 0,i=typeof r.iv<"u"?hr(r.iv,zr):(0,Rf.randomBytes)(If),n=new p1.ChaCha20Poly1305(hr(r.symKey,zr)).seal(i,hr(r.message,Bf));return M5({type:e,sealed:n,iv:i,senderPublicKey:t,encoding:r.encoding})}function A5(r,e){let t=E5(hc),i=(0,Rf.randomBytes)(If),n=hr(r,Bf);return M5({type:t,sealed:n,iv:i,encoding:e})}function S5(r){let e=new p1.ChaCha20Poly1305(hr(r.symKey,zr)),{sealed:t,iv:i}=dc({encoded:r.encoded,encoding:r?.encoding}),n=e.open(i,t);if(n===null)throw new Error("Failed to decrypt");return nr(n,Bf)}function I5(r,e){let{sealed:t}=dc({encoded:r,encoding:e});return nr(t,Bf)}function M5(r){let{encoding:e=Yn}=r;if(la(r.type)===hc)return nr(Ta([r.type,r.sealed]),e);if(la(r.type)===dn){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return nr(Ta([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return nr(Ta([r.type,r.iv,r.sealed]),e)}function dc(r){let{encoded:e,encoding:t=Yn}=r,i=hr(e,t),n=i.slice(OL,pw),a=pw;if(la(n)===dn){let g=a+O1,m=g+If,w=i.slice(a,g),R=i.slice(g,m),I=i.slice(m);return{type:n,sealed:I,iv:R,senderPublicKey:w}}if(la(n)===hc){let g=i.slice(a),m=(0,Rf.randomBytes)(If);return{type:n,sealed:g,iv:m}}let c=a+If,u=i.slice(a,c),p=i.slice(c);return{type:n,sealed:p,iv:u}}function D5(r,e){let t=dc({encoded:r,encoding:e?.encoding});return N1({type:la(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?nr(t.senderPublicKey,zr):void 0,receiverPublicKey:e?.receiverPublicKey})}function N1(r){let e=r?.type||y5;if(e===dn){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function T1(r){return r.type===dn&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function L1(r){return r.type===hc}function NL(r){return new Ew.ec("p256").keyFromPublic({x:Buffer.from(r.x,"base64").toString("hex"),y:Buffer.from(r.y,"base64").toString("hex")},"hex")}function TL(r){let e=r.replace(/-/g,"+").replace(/_/g,"/"),t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function LL(r){return Buffer.from(TL(r),"base64")}function R5(r,e){let[t,i,n]=r.split("."),a=LL(n);if(a.length!==64)throw new Error("Invalid signature length");let c=a.slice(0,32).toString("hex"),u=a.slice(32,64).toString("hex"),p=`${t}.${i}`,g=new nc.SHA256().update(Buffer.from(p)).digest(),m=NL(e),w=Buffer.from(g).toString("hex");if(!m.verify(w,{r:c,s:u}))throw new Error("Invalid signature");return Yo(r).payload}var qL="irn";function il(r){return r?.relay||{protocol:qL}}function pc(r){let e=k6[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var BL=Object.defineProperty,FL=Object.defineProperties,UL=Object.getOwnPropertyDescriptors,gw=Object.getOwnPropertySymbols,zL=Object.prototype.hasOwnProperty,kL=Object.prototype.propertyIsEnumerable,vw=(r,e,t)=>e in r?BL(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,bw=(r,e)=>{for(var t in e||(e={}))zL.call(e,t)&&vw(r,t,e[t]);if(gw)for(var t of gw(e))kL.call(e,t)&&vw(r,t,e[t]);return r},jL=(r,e)=>FL(r,UL(e));function HL(r,e="-"){let t={},i="relay"+e;return Object.keys(r).forEach(n=>{if(n.startsWith(i)){let a=n.replace(i,""),c=r[n];t[a]=c}}),t}function q1(r){if(!r.includes("wc:")){let p=Cw(r);p!=null&&p.includes("wc:")&&(r=p)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;let e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),n=r.substring(e+1,t).split("@"),a=typeof t<"u"?r.substring(t):"",c=ic.parse(a),u=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:i,topic:KL(n[0]),version:parseInt(n[1],10),symKey:c.symKey,relay:HL(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function KL(r){return r.startsWith("//")?r.substring(2):r}function VL(r,e="-"){let t="relay",i={};return Object.keys(r).forEach(n=>{let a=t+e+n;r[n]&&(i[a]=r[n])}),i}function B1(r){return`${r.protocol}:${r.topic}@${r.version}?`+ic.stringify(bw(jL(bw({symKey:r.symKey},VL(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function Ff(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function gc(r){let e=[];return r.forEach(t=>{let[i,n]=t.split(":");e.push(`${i}:${n}`)}),e}function GL(r){let e=[];return Object.values(r).forEach(t=>{e.push(...gc(t.accounts))}),e}function $L(r,e){let t=[];return Object.values(r).forEach(i=>{gc(i.accounts).includes(e)&&t.push(...i.methods)}),t}function JL(r,e){let t=[];return Object.values(r).forEach(i=>{gc(i.accounts).includes(e)&&t.push(...i.events)}),t}function nl(r){return r.includes(":")}function vc(r){return nl(r)?r.split(":")[0]:r}function WL(r){let e={};return r?.forEach(t=>{let[i,n]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(t),e[i].chains.push(`${i}:${n}`)}),e}function F1(r,e){e=e.map(i=>i.replace("did:pkh:",""));let t=WL(e);for(let[i,n]of Object.entries(t))n.methods?n.methods=Of(n.methods,r):n.methods=r,n.events=["chainChanged","accountsChanged"];return t}var YL={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},QL={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ge(r,e){let{message:t,code:i}=QL[r];return{message:e?`${t} ${e}`:t,code:i}}function ot(r,e){let{message:t,code:i}=YL[r];return{message:e?`${t} ${e}`:t,code:i}}function Di(r,e){return Array.isArray(r)?typeof e<"u"&&r.length?r.every(e):!0:!1}function Xa(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Rr(r){return typeof r>"u"}function er(r,e){return e&&Rr(r)?!0:typeof r=="string"&&!!r.trim().length}function U1(r,e){return e&&Rr(r)?!0:typeof r=="number"&&!isNaN(r)}function P5(r,e){let{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),n=Object.keys(t),a=!0;return Va(n,i)?(i.forEach(c=>{let{accounts:u,methods:p,events:g}=r.namespaces[c],m=gc(u),w=t[c];(!Va(xw(c,w),m)||!Va(w.methods,p)||!Va(w.events,g))&&(a=!1)}),a):!1}function Qh(r){return er(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function XL(r){if(er(r,!1)&&r.includes(":")){let e=r.split(":");if(e.length===3){let t=e[0]+":"+e[1];return!!e[2]&&Qh(t)}}return!1}function C5(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(er(r,!1)){if(e(r))return!0;let t=Cw(r);return e(t)}}catch{}return!1}function O5(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function N5(r){return r?.topic}function T5(r,e){let t=null;return er(r?.publicKey,!1)||(t=ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function mw(r){let e=!0;return Di(r)?r.length&&(e=r.every(t=>er(t,!1))):e=!1,e}function ZL(r,e,t){let i=null;return Di(e)&&e.length?e.forEach(n=>{i||Qh(n)||(i=ot("UNSUPPORTED_CHAINS",`${t}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):Qh(r)||(i=ot("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function eq(r,e,t){let i=null;return Object.entries(r).forEach(([n,a])=>{if(i)return;let c=ZL(n,xw(n,a),`${e} ${t}`);c&&(i=c)}),i}function tq(r,e){let t=null;return Di(r)?r.forEach(i=>{t||XL(i)||(t=ot("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=ot("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function rq(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;let n=tq(i?.accounts,`${e} namespace`);n&&(t=n)}),t}function iq(r,e){let t=null;return mw(r?.methods)?mw(r?.events)||(t=ot("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=ot("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function L5(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;let n=iq(i,`${e}, namespace`);n&&(t=n)}),t}function q5(r,e,t){let i=null;if(r&&Xa(r)){let n=L5(r,e);n&&(i=n);let a=eq(r,e,t);a&&(i=a)}else i=ge("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function sl(r,e){let t=null;if(r&&Xa(r)){let i=L5(r,e);i&&(t=i);let n=rq(r,e);n&&(t=n)}else t=ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function z1(r){return er(r.protocol,!0)}function B5(r,e){let t=!1;return e&&!r?t=!0:r&&Di(r)&&r.length&&r.forEach(i=>{t=z1(i)}),t}function F5(r){return typeof r=="number"}function kr(r){return typeof r<"u"&&typeof r!==null}function U5(r){return!(!r||typeof r!="object"||!r.code||!U1(r.code,!1)||!r.message||!er(r.message,!1))}function z5(r){return!(Rr(r)||!er(r.method,!1))}function k5(r){return!(Rr(r)||Rr(r.result)&&Rr(r.error)||!U1(r.id,!1)||!er(r.jsonrpc,!1))}function j5(r){return!(Rr(r)||!er(r.name,!1))}function k1(r,e){return!(!Qh(e)||!GL(r).includes(e))}function H5(r,e,t){return er(t,!1)?$L(r,e).includes(t):!1}function K5(r,e,t){return er(t,!1)?JL(r,e).includes(t):!1}function j1(r,e,t){let i=null,n=nq(r),a=sq(e),c=Object.keys(n),u=Object.keys(a),p=yw(Object.keys(r)),g=yw(Object.keys(e)),m=p.filter(w=>!g.includes(w));return m.length&&(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${m.toString()}
      Received: ${Object.keys(e).toString()}`)),Va(c,u)||(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${u.toString()}`)),Object.keys(e).forEach(w=>{if(!w.includes(":")||i)return;let R=gc(e[w].accounts);R.includes(w)||(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${w}
        Required: ${w}
        Approved: ${R.toString()}`))}),c.forEach(w=>{i||(Va(n[w].methods,a[w].methods)?Va(n[w].events,a[w].events)||(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${w}`)):i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${w}`))}),i}function nq(r){let e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(n=>{e[n]={methods:r[t].methods,events:r[t].events}})}),e}function yw(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function sq(r){let e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:gc(r[t].accounts)?.forEach(n=>{e[n]={accounts:r[t].accounts.filter(a=>a.includes(`${n}:`)),methods:r[t].methods,events:r[t].events}})}),e}function V5(r,e){return U1(r,!1)&&r<=e.max&&r>=e.min}function H1(){let r=Cf();return new Promise(e=>{switch(r){case pi.browser:e(aq());break;case pi.reactNative:e(oq());break;case pi.node:e(cq());break;default:e(!0)}})}function aq(){return sc()&&navigator?.onLine}function oq(){return L(this,null,function*(){return Wa()&&typeof global<"u"&&global!=null&&global.NetInfo?(yield global==null?void 0:global.NetInfo.fetch())?.isConnected:!0})}function cq(){return!0}function G5(r){switch(Cf()){case pi.browser:fq(r);break;case pi.reactNative:uq(r);break;case pi.node:break}}function fq(r){!Wa()&&sc()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function uq(r){Wa()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>r(e?.isConnected))}var o1={},da=class{static get(e){return o1[e]}static set(e,t){o1[e]=t}static delete(e){delete o1[e]}};var js=wt(ws());var J5=wt(ws()),ol=wt(Mo());var gn=class{};var K1=class extends gn{constructor(e){super()}},$5=ol.FIVE_SECONDS,Za={pulse:"heartbeat_pulse"},al=class r extends K1{constructor(e){super(e),this.events=new J5.EventEmitter,this.interval=$5,this.interval=e?.interval||$5}static init(e){return L(this,null,function*(){let t=new r(e);return yield t.init(),t})}init(){return L(this,null,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}initialize(){return L(this,null,function*(){this.intervalRef=setInterval(()=>this.pulse(),(0,ol.toMiliseconds)(this.interval))})}pulse(){this.events.emit(Za.pulse)}};var hq=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,lq=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,dq=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function pq(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){gq(r);return}return e}function gq(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function Uf(r,e={}){if(typeof r!="string")return r;let t=r.trim();if(r[0]==='"'&&r.endsWith('"')&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){let i=t.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!dq.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(hq.test(r)||lq.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,pq)}return JSON.parse(r)}catch(i){if(e.strict)throw i;return r}}function vq(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function vr(r,...e){try{return vq(r(...e))}catch(t){return Promise.reject(t)}}function bq(r){let e=typeof r;return r===null||e!=="object"&&e!=="function"}function mq(r){let e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function zf(r){if(bq(r))return String(r);if(mq(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return zf(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}var V1="base64:";function W5(r){return typeof r=="string"?r:V1+wq(r)}function Y5(r){return typeof r!="string"||!r.startsWith(V1)?r:yq(r.slice(V1.length))}function yq(r){return globalThis.Buffer?Buffer.from(r,"base64"):Uint8Array.from(globalThis.atob(r),e=>e.codePointAt(0))}function wq(r){return globalThis.Buffer?Buffer.from(r).toString("base64"):globalThis.btoa(String.fromCodePoint(...r))}function Qr(r){return r&&r.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Q5(...r){return Qr(r.join(":"))}function kf(r){return r=Qr(r),r?r+":":""}var _q="memory",Eq=()=>{let r=new Map;return{name:_q,getInstance:()=>r,hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return[...r.keys()]},clear(){r.clear()},dispose(){r.clear()}}};function e8(r={}){let e={mounts:{"":r.driver||Eq()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=m=>{for(let w of e.mountpoints)if(m.startsWith(w))return{base:w,relativeKey:m.slice(w.length),driver:e.mounts[w]};return{base:"",relativeKey:m,driver:e.mounts[""]}},i=(m,w)=>e.mountpoints.filter(R=>R.startsWith(m)||w&&m.startsWith(R)).map(R=>({relativeBase:m.length>R.length?m.slice(R.length):void 0,mountpoint:R,driver:e.mounts[R]})),n=(m,w)=>{if(e.watching){w=Qr(w);for(let R of e.watchListeners)R(m,w)}},a=()=>L(this,null,function*(){if(!e.watching){e.watching=!0;for(let m in e.mounts)e.unwatch[m]=yield X5(e.mounts[m],n,m)}}),c=()=>L(this,null,function*(){if(e.watching){for(let m in e.unwatch)yield e.unwatch[m]();e.unwatch={},e.watching=!1}}),u=(m,w,R)=>{let I=new Map,O=B=>{let F=I.get(B.base);return F||(F={driver:B.driver,base:B.base,items:[]},I.set(B.base,F)),F};for(let B of m){let F=typeof B=="string",z=Qr(F?B:B.key),Y=F?void 0:B.value,$=F||!B.options?w:Je(Je({},w),B.options),K=t(z);O(K).items.push({key:z,value:Y,relativeKey:K.relativeKey,options:$})}return Promise.all([...I.values()].map(B=>R(B))).then(B=>B.flat())},p={hasItem(m,w={}){m=Qr(m);let{relativeKey:R,driver:I}=t(m);return vr(I.hasItem,R,w)},getItem(m,w={}){m=Qr(m);let{relativeKey:R,driver:I}=t(m);return vr(I.getItem,R,w).then(O=>Uf(O))},getItems(m,w={}){return u(m,w,R=>R.driver.getItems?vr(R.driver.getItems,R.items.map(I=>({key:I.relativeKey,options:I.options})),w).then(I=>I.map(O=>({key:Q5(R.base,O.key),value:Uf(O.value)}))):Promise.all(R.items.map(I=>vr(R.driver.getItem,I.relativeKey,I.options).then(O=>({key:I.key,value:Uf(O)})))))},getItemRaw(m,w={}){m=Qr(m);let{relativeKey:R,driver:I}=t(m);return I.getItemRaw?vr(I.getItemRaw,R,w):vr(I.getItem,R,w).then(O=>Y5(O))},setItem(I,O){return L(this,arguments,function*(m,w,R={}){if(w===void 0)return p.removeItem(m);m=Qr(m);let{relativeKey:B,driver:F}=t(m);F.setItem&&(yield vr(F.setItem,B,zf(w),R),F.watch||n("update",m))})},setItems(m,w){return L(this,null,function*(){yield u(m,w,R=>L(this,null,function*(){if(R.driver.setItems)return vr(R.driver.setItems,R.items.map(I=>({key:I.relativeKey,value:zf(I.value),options:I.options})),w);R.driver.setItem&&(yield Promise.all(R.items.map(I=>vr(R.driver.setItem,I.relativeKey,zf(I.value),I.options))))}))})},setItemRaw(I,O){return L(this,arguments,function*(m,w,R={}){if(w===void 0)return p.removeItem(m,R);m=Qr(m);let{relativeKey:B,driver:F}=t(m);if(F.setItemRaw)yield vr(F.setItemRaw,B,w,R);else if(F.setItem)yield vr(F.setItem,B,W5(w),R);else return;F.watch||n("update",m)})},removeItem(R){return L(this,arguments,function*(m,w={}){typeof w=="boolean"&&(w={removeMeta:w}),m=Qr(m);let{relativeKey:I,driver:O}=t(m);O.removeItem&&(yield vr(O.removeItem,I,w),(w.removeMeta||w.removeMata)&&(yield vr(O.removeItem,I+"$",w)),O.watch||n("remove",m))})},getMeta(R){return L(this,arguments,function*(m,w={}){typeof w=="boolean"&&(w={nativeOnly:w}),m=Qr(m);let{relativeKey:I,driver:O}=t(m),B=Object.create(null);if(O.getMeta&&Object.assign(B,yield vr(O.getMeta,I,w)),!w.nativeOnly){let F=yield vr(O.getItem,I+"$",w).then(z=>Uf(z));F&&typeof F=="object"&&(typeof F.atime=="string"&&(F.atime=new Date(F.atime)),typeof F.mtime=="string"&&(F.mtime=new Date(F.mtime)),Object.assign(B,F))}return B})},setMeta(m,w,R={}){return this.setItem(m+"$",w,R)},removeMeta(m,w={}){return this.removeItem(m+"$",w)},getKeys(R){return L(this,arguments,function*(m,w={}){m=kf(m);let I=i(m,!0),O=[],B=[];for(let F of I){let z=yield vr(F.driver.getKeys,F.relativeBase,w);for(let Y of z){let $=F.mountpoint+Qr(Y);O.some(K=>$.startsWith(K))||B.push($)}O=[F.mountpoint,...O.filter(Y=>!Y.startsWith(F.mountpoint))]}return m?B.filter(F=>F.startsWith(m)&&F[F.length-1]!=="$"):B.filter(F=>F[F.length-1]!=="$")})},clear(R){return L(this,arguments,function*(m,w={}){m=kf(m),yield Promise.all(i(m,!1).map(I=>L(this,null,function*(){if(I.driver.clear)return vr(I.driver.clear,I.relativeBase,w);if(I.driver.removeItem){let O=yield I.driver.getKeys(I.relativeBase||"",w);return Promise.all(O.map(B=>I.driver.removeItem(B,w)))}})))})},dispose(){return L(this,null,function*(){yield Promise.all(Object.values(e.mounts).map(m=>Z5(m)))})},watch(m){return L(this,null,function*(){return yield a(),e.watchListeners.push(m),()=>L(this,null,function*(){e.watchListeners=e.watchListeners.filter(w=>w!==m),e.watchListeners.length===0&&(yield c())})})},unwatch(){return L(this,null,function*(){e.watchListeners=[],yield c()})},mount(m,w){if(m=kf(m),m&&e.mounts[m])throw new Error(`already mounted at ${m}`);return m&&(e.mountpoints.push(m),e.mountpoints.sort((R,I)=>I.length-R.length)),e.mounts[m]=w,e.watching&&Promise.resolve(X5(w,n,m)).then(R=>{e.unwatch[m]=R}).catch(console.error),p},unmount(m,w=!0){return L(this,null,function*(){m=kf(m),!(!m||!e.mounts[m])&&(e.watching&&m in e.unwatch&&(e.unwatch[m]?.(),delete e.unwatch[m]),w&&(yield Z5(e.mounts[m])),e.mountpoints=e.mountpoints.filter(R=>R!==m),delete e.mounts[m])})},getMount(m=""){m=Qr(m)+":";let w=t(m);return{driver:w.driver,base:w.base}},getMounts(m="",w={}){return m=Qr(m),i(m,w.parents).map(I=>({driver:I.driver,base:I.mountpoint}))},keys:(m,w={})=>p.getKeys(m,w),get:(m,w={})=>p.getItem(m,w),set:(m,w,R={})=>p.setItem(m,w,R),has:(m,w={})=>p.hasItem(m,w),del:(m,w={})=>p.removeItem(m,w),remove:(m,w={})=>p.removeItem(m,w)};return p}function X5(r,e,t){return r.watch?r.watch((i,n)=>e(i,t+n)):()=>{}}function Z5(r){return L(this,null,function*(){typeof r.dispose=="function"&&(yield vr(r.dispose))})}function eo(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function $1(r,e){let t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);let i=eo(t);return(n,a)=>i.then(c=>a(c.transaction(e,n).objectStore(e)))}var G1;function jf(){return G1||(G1=$1("keyval-store","keyval")),G1}function J1(r,e=jf()){return e("readonly",t=>eo(t.get(r)))}function t8(r,e,t=jf()){return t("readwrite",i=>(i.put(e,r),eo(i.transaction)))}function r8(r,e=jf()){return e("readwrite",t=>(t.delete(r),eo(t.transaction)))}function i8(r=jf()){return r("readwrite",e=>(e.clear(),eo(e.transaction)))}function xq(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},eo(r.transaction)}function n8(r=jf()){return r("readonly",e=>{if(e.getAllKeys)return eo(e.getAllKeys());let t=[];return xq(e,i=>t.push(i.key)).then(()=>t)})}var Aq="idb-keyval",Sq=(r={})=>{let e=r.base&&r.base.length>0?`${r.base}:`:"",t=a=>e+a,i;return r.dbName&&r.storeName&&(i=$1(r.dbName,r.storeName)),{name:Aq,options:r,hasItem(a){return L(this,null,function*(){return!(typeof(yield J1(t(a),i))>"u")})},getItem(a){return L(this,null,function*(){return(yield J1(t(a),i))??null})},setItem(a,c){return t8(t(a),c,i)},removeItem(a){return r8(t(a),i)},getKeys(){return n8(i)},clear(){return i8(i)}}},Iq="WALLET_CONNECT_V2_INDEXED_DB",Mq="keyvaluestorage",Y1=class{constructor(){this.indexedDb=e8({driver:Sq({dbName:Iq,storeName:Mq})})}getKeys(){return L(this,null,function*(){return this.indexedDb.getKeys()})}getEntries(){return L(this,null,function*(){return(yield this.indexedDb.getItems(yield this.indexedDb.getKeys())).map(e=>[e.key,e.value])})}getItem(e){return L(this,null,function*(){let t=yield this.indexedDb.getItem(e);if(t!==null)return t})}setItem(e,t){return L(this,null,function*(){yield this.indexedDb.setItem(e,Jr(t))})}removeItem(e){return L(this,null,function*(){yield this.indexedDb.removeItem(e)})}},W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cl={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){let t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof W1<"u"&&W1.localStorage?cl.exports=W1.localStorage:typeof window<"u"&&window.localStorage?cl.exports=window.localStorage:cl.exports=new e})();function Dq(r){var e;return[r[0],Gi((e=r[1])!=null?e:"")]}var Q1=class{constructor(){this.localStorage=cl.exports}getKeys(){return L(this,null,function*(){return Object.keys(this.localStorage)})}getEntries(){return L(this,null,function*(){return Object.entries(this.localStorage).map(Dq)})}getItem(e){return L(this,null,function*(){let t=this.localStorage.getItem(e);if(t!==null)return Gi(t)})}setItem(e,t){return L(this,null,function*(){this.localStorage.setItem(e,Jr(t))})}removeItem(e){return L(this,null,function*(){this.localStorage.removeItem(e)})}},Rq="wc_storage_version",s8=1,Pq=(r,e,t)=>L(void 0,null,function*(){let i=Rq,n=yield e.getItem(i);if(n&&n>=s8){t(e);return}let a=yield r.getKeys();if(!a.length){t(e);return}let c=[];for(;a.length;){let u=a.shift();if(!u)continue;let p=u.toLowerCase();if(p.includes("wc@")||p.includes("walletconnect")||p.includes("wc_")||p.includes("wallet_connect")){let g=yield r.getItem(u);yield e.setItem(u,g),c.push(u)}}yield e.setItem(i,s8),t(e),Cq(r,c)}),Cq=(r,e)=>L(void 0,null,function*(){e.length&&e.forEach(t=>L(void 0,null,function*(){yield r.removeItem(t)}))}),fl=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};let e=new Q1;this.storage=e;try{let t=new Y1;Pq(e,t,this.setInitialized)}catch{this.initialized=!0}}getKeys(){return L(this,null,function*(){return yield this.initialize(),this.storage.getKeys()})}getEntries(){return L(this,null,function*(){return yield this.initialize(),this.storage.getEntries()})}getItem(e){return L(this,null,function*(){return yield this.initialize(),this.storage.getItem(e)})}setItem(e,t){return L(this,null,function*(){return yield this.initialize(),this.storage.setItem(e,t)})}removeItem(e){return L(this,null,function*(){return yield this.initialize(),this.storage.removeItem(e)})}initialize(){return L(this,null,function*(){this.initialized||(yield new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)}))})}};var Fs=wt(eg()),to=wt(eg());var Kq={level:"info"},Vf="custom_context",ng=1e3*1024,tg=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},ll=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new tg(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}},dl=class{constructor(e,t=ng){this.level=e??"error",this.levelValue=Fs.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new ll(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Fs.levels.values.error?console.error(e):t===Fs.levels.values.warn?console.warn(e):t===Fs.levels.values.debug?console.debug(e):t===Fs.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Jr({timestamp:new Date().toISOString(),log:e}));let t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new ll(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push(Jr({extraMetadata:e})),new Blob(t,{type:"application/json"})}},rg=class{constructor(e,t=ng){this.baseChunkLogger=new dl(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=t,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}},ig=class{constructor(e,t=ng){this.baseChunkLogger=new dl(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}},Vq=Object.defineProperty,Gq=Object.defineProperties,$q=Object.getOwnPropertyDescriptors,l8=Object.getOwnPropertySymbols,Jq=Object.prototype.hasOwnProperty,Wq=Object.prototype.propertyIsEnumerable,d8=(r,e,t)=>e in r?Vq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pl=(r,e)=>{for(var t in e||(e={}))Jq.call(e,t)&&d8(r,t,e[t]);if(l8)for(var t of l8(e))Wq.call(e,t)&&d8(r,t,e[t]);return r},gl=(r,e)=>Gq(r,$q(e));function ro(r){return gl(pl({},r),{level:r?.level||Kq.level})}function Yq(r,e=Vf){return r[e]||""}function Qq(r,e,t=Vf){return r[t]=e,r}function jr(r,e=Vf){let t="";return typeof r.bindings>"u"?t=Yq(r,e):t=r.bindings().context||"",t}function Xq(r,e,t=Vf){let i=jr(r,t);return i.trim()?`${i}/${e}`:e}function Cr(r,e,t=Vf){let i=Xq(r,e,t),n=r.child({context:i});return Qq(n,i,t)}function Zq(r){var e,t;let i=new rg((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:(0,Fs.default)(gl(pl({},r.opts),{level:"trace",browser:gl(pl({},(t=r.opts)==null?void 0:t.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function eB(r){var e;let t=new ig((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:(0,Fs.default)(gl(pl({},r.opts),{level:"trace"}),t),chunkLoggerController:t}}function p8(r){return typeof r.loggerOverride<"u"&&typeof r.loggerOverride!="string"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Zq(r):eB(r)}var g8=wt(ws()),vl=class extends gn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}};var bl=class extends gn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},ml=class{constructor(e,t){this.logger=e,this.core=t}},yl=class extends gn{constructor(e,t){super(),this.relayer=e,this.logger=t}},wl=class extends gn{constructor(e){super()}},_l=class{constructor(e,t,i,n){this.core=e,this.logger=t,this.name=i}};var El=class extends gn{constructor(e,t){super(),this.relayer=e,this.logger=t}};var xl=class extends gn{constructor(e,t){super(),this.core=e,this.logger=t}};var Al=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},Sl=class{constructor(e,t){this.projectId=e,this.logger=t}},Il=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}};var Ml=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}};var Dl=class{constructor(e){this.client=e}};var Ie=wt(Mo());var T8=wt(ws());var Er={};Lr(Er,{DEFAULT_ERROR:()=>$f,IBaseJsonRpcProvider:()=>Bl,IEvents:()=>Yf,IJsonRpcConnection:()=>hg,IJsonRpcProvider:()=>Qf,INTERNAL_ERROR:()=>Rl,INVALID_PARAMS:()=>y8,INVALID_REQUEST:()=>b8,METHOD_NOT_FOUND:()=>m8,PARSE_ERROR:()=>v8,RESERVED_ERROR_CODES:()=>sg,SERVER_ERROR:()=>Gf,SERVER_ERROR_CODE_RANGE:()=>Pl,STANDARD_ERROR_MAP:()=>pa,formatErrorMessage:()=>O8,formatJsonRpcError:()=>Us,formatJsonRpcRequest:()=>Ri,formatJsonRpcResult:()=>ba,getBigIntRpcId:()=>vn,getError:()=>Ol,getErrorByCode:()=>Nl,isHttpUrl:()=>Fl,isJsonRpcError:()=>Hr,isJsonRpcPayload:()=>dg,isJsonRpcRequest:()=>yc,isJsonRpcResponse:()=>ma,isJsonRpcResult:()=>Pi,isJsonRpcValidationInvalid:()=>PB,isLocalhostUrl:()=>lg,isNodeJs:()=>C8,isReservedErrorCode:()=>Cl,isServerErrorCode:()=>tB,isValidDefaultRoute:()=>Ll,isValidErrorCode:()=>w8,isValidLeadingWildcardRoute:()=>SB,isValidRoute:()=>AB,isValidTrailingWildcardRoute:()=>IB,isValidWildcardRoute:()=>ql,isWsUrl:()=>Ul,parseConnectionError:()=>Jf,payloadId:()=>Xn,validateJsonRpcError:()=>rB});var v8="PARSE_ERROR",b8="INVALID_REQUEST",m8="METHOD_NOT_FOUND",y8="INVALID_PARAMS",Rl="INTERNAL_ERROR",Gf="SERVER_ERROR",sg=[-32700,-32600,-32601,-32602,-32603],Pl=[-32e3,-32099],pa={[v8]:{code:-32700,message:"Parse error"},[b8]:{code:-32600,message:"Invalid Request"},[m8]:{code:-32601,message:"Method not found"},[y8]:{code:-32602,message:"Invalid params"},[Rl]:{code:-32603,message:"Internal error"},[Gf]:{code:-32e3,message:"Server error"}},$f=Gf;function tB(r){return r<=Pl[0]&&r>=Pl[1]}function Cl(r){return sg.includes(r)}function w8(r){return typeof r=="number"}function Ol(r){return Object.keys(pa).includes(r)?pa[r]:pa[$f]}function Nl(r){let e=Object.values(pa).find(t=>t.code===r);return e||pa[$f]}function rB(r){if(typeof r.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof r.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!w8(r.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${r.error.code}`};if(Cl(r.error.code)){let e=Nl(r.error.code);if(e.message!==pa[$f].message&&r.error.message===e.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${r.error.code}`}}return{valid:!0}}function Jf(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var Xr={};Lr(Xr,{isNodeJs:()=>C8});var P8=wt(ug());xi(Xr,wt(ug()));var C8=P8.isNode;xi(Er,Xr);function Xn(r=3){let e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function vn(r=6){return BigInt(Xn(r))}function Ri(r,e,t){return{id:t||Xn(),jsonrpc:"2.0",method:r,params:e}}function ba(r,e){return{id:r,jsonrpc:"2.0",result:e}}function Us(r,e,t){return{id:r,jsonrpc:"2.0",error:O8(e,t)}}function O8(r,e){return typeof r>"u"?Ol(Rl):(typeof r=="string"&&(r=Object.assign(Object.assign({},Ol(Gf)),{message:r})),typeof e<"u"&&(r.data=e),Cl(r.code)&&(r=Nl(r.code)),r)}function AB(r){return r.includes("*")?ql(r):!/\W/g.test(r)}function Ll(r){return r==="*"}function ql(r){return Ll(r)?!0:!(!r.includes("*")||r.split("*").length!==2||r.split("*").filter(e=>e.trim()==="").length!==1)}function SB(r){return!Ll(r)&&ql(r)&&!r.split("*")[0].trim()}function IB(r){return!Ll(r)&&ql(r)&&!r.split("*")[1].trim()}var Yf=class{},hg=class extends Yf{constructor(e){super()}},Bl=class extends Yf{constructor(){super()}},Qf=class extends Bl{constructor(e){super()}};var MB="^https?:",DB="^wss?:";function RB(r){let e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function N8(r,e){let t=RB(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function Fl(r){return N8(r,MB)}function Ul(r){return N8(r,DB)}function lg(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function dg(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function yc(r){return dg(r)&&"method"in r}function ma(r){return dg(r)&&(Pi(r)||Hr(r))}function Pi(r){return"result"in r}function Hr(r){return"error"in r}function PB(r){return"error"in r&&r.valid===!1}var Zr=class extends Qf{constructor(e){super(e),this.events=new T8.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(){return L(this,arguments,function*(e=this.connection){yield this.open(e)})}disconnect(){return L(this,null,function*(){yield this.close()})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){return L(this,null,function*(){return this.requestStrict(Ri(e.method,e.params||[],e.id||vn().toString()),t)})}requestStrict(e,t){return L(this,null,function*(){return new Promise((i,n)=>L(this,null,function*(){if(!this.connection.connected)try{yield this.open()}catch(a){n(a)}this.events.on(`${e.id}`,a=>{Hr(a)?n(a.error):i(a.result)});try{yield this.connection.send(e,t)}catch(a){n(a)}}))})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ma(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(){return L(this,arguments,function*(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(yield this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),yield this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))})}close(){return L(this,null,function*(){yield this.connection.close()})}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};var U8=wt(ws());var CB=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:q8(),OB=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",B8=r=>r.split("?")[0],F8=10,NB=CB(),zl=class{constructor(e){if(this.url=e,this.events=new U8.EventEmitter,this.registering=!1,!Ul(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return L(this,arguments,function*(e=this.url){yield this.register(e)})}close(){return L(this,null,function*(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})})}send(e){return L(this,null,function*(){typeof this.socket>"u"&&(this.socket=yield this.register());try{this.socket.send(Jr(e))}catch(t){this.onError(e.id,t)}})}register(e=this.url){if(!Ul(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,n)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),n(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{let n=new URLSearchParams(e).get("origin"),a=(0,Er.isReactNative)()?{headers:{origin:n}}:{rejectUnauthorized:!lg(e)},c=new NB(e,[],a);OB()?c.onerror=u=>{let p=u;i(this.emitError(p.error))}:c.on("error",u=>{i(this.emitError(u))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t=typeof e.data=="string"?Gi(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let i=this.parseError(t),n=i.message||i.toString(),a=Us(e,n);this.events.emit("payload",a)}parseError(e,t=this.url){return Jf(e,B8(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>F8&&this.events.setMaxListeners(F8)}emitError(e){let t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${B8(this.url)}`));return this.events.emit("register_error",t),t}};var k4=wt(w4());var j4="wc",H4=2,Yg="core",rs=`${j4}@2:${Yg}:`,uU={name:Yg,logger:"error"},hU={database:":memory:"},lU="crypto",_4="client_ed25519_seed",dU=Ie.ONE_DAY,pU="keychain",gU="0.3",vU="messages",bU="0.3",mU=Ie.SIX_HOURS,yU="publisher",Qg="irn",wU="error",K4="wss://relay.walletconnect.org",_U="relayer",Kr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},EU="_subscription",Qi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},xU=.1;var Mg="2.17.0";var jt={link_mode:"link_mode",relay:"relay"},AU="0.3",SU="WALLETCONNECT_CLIENT_ID",E4="WALLETCONNECT_LINK_MODE_APPS",es={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"};var IU="subscription",MU="0.3",DU=Ie.FIVE_SECONDS*1e3,RU="pairing",PU="0.3";var iu={wc_pairingDelete:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ie.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ie.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ie.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ie.ONE_DAY,prompt:!1,tag:0}}},_a={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},bn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},CU="history",OU="0.3",NU="expirer",Ci={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},TU="0.3";var LU="verify-api",qU="https://verify.walletconnect.com",V4="https://verify.walletconnect.org",xc=V4,BU=`${xc}/v3`,FU=[qU,V4],UU="echo",zU="https://echo.walletconnect.com";var mn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ts={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Xi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ea={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},xa={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Ac={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},kU=.1,jU="event-client",HU=86400,KU="https://pulse.walletconnect.org/batch";function VU(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var n=0;n<r.length;n++){var a=r.charAt(n),c=a.charCodeAt(0);if(t[c]!==255)throw new TypeError(a+" is ambiguous");t[c]=n}var u=r.length,p=r.charAt(0),g=Math.log(u)/Math.log(256),m=Math.log(256)/Math.log(u);function w(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var B=0,F=0,z=0,Y=O.length;z!==Y&&O[z]===0;)z++,B++;for(var $=(Y-z)*m+1>>>0,K=new Uint8Array($);z!==Y;){for(var X=O[z],te=0,k=$-1;(X!==0||te<F)&&k!==-1;k--,te++)X+=256*K[k]>>>0,K[k]=X%u>>>0,X=X/u>>>0;if(X!==0)throw new Error("Non-zero carry");F=te,z++}for(var U=$-F;U!==$&&K[U]===0;)U++;for(var ae=p.repeat(B);U<$;++U)ae+=r.charAt(K[U]);return ae}function R(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var B=0;if(O[B]!==" "){for(var F=0,z=0;O[B]===p;)F++,B++;for(var Y=(O.length-B)*g+1>>>0,$=new Uint8Array(Y);O[B];){var K=t[O.charCodeAt(B)];if(K===255)return;for(var X=0,te=Y-1;(K!==0||X<z)&&te!==-1;te--,X++)K+=u*$[te]>>>0,$[te]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");z=X,B++}if(O[B]!==" "){for(var k=Y-z;k!==Y&&$[k]===0;)k++;for(var U=new Uint8Array(F+(Y-k)),ae=F;k!==Y;)U[ae++]=$[k++];return U}}}function I(O){var B=R(O);if(B)return B;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:R,decode:I}}var GU=VU,$U=GU,G4=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},JU=r=>new TextEncoder().encode(r),WU=r=>new TextDecoder().decode(r),Dg=class{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Rg=class{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $4(this,e)}},Pg=class{constructor(e){this.decoders=e}or(e){return $4(this,e)}decode(e){let t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},$4=(r,e)=>new Pg(Je(Je({},r.decoders||{[r.prefix]:r}),e.decoders||{[e.prefix]:e})),Cg=class{constructor(e,t,i,n){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=n,this.encoder=new Dg(e,t,i),this.decoder=new Rg(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Xl=({name:r,prefix:e,encode:t,decode:i})=>new Cg(r,e,t,i),au=({prefix:r,name:e,alphabet:t})=>{let{encode:i,decode:n}=$U(t,e);return Xl({prefix:r,name:e,encode:i,decode:a=>G4(n(a))})},YU=(r,e,t,i)=>{let n={};for(let m=0;m<e.length;++m)n[e[m]]=m;let a=r.length;for(;r[a-1]==="=";)--a;let c=new Uint8Array(a*t/8|0),u=0,p=0,g=0;for(let m=0;m<a;++m){let w=n[r[m]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);p=p<<t|w,u+=t,u>=8&&(u-=8,c[g++]=255&p>>u)}if(u>=t||255&p<<8-u)throw new SyntaxError("Unexpected end of data");return c},QU=(r,e,t)=>{let i=e[e.length-1]==="=",n=(1<<t)-1,a="",c=0,u=0;for(let p=0;p<r.length;++p)for(u=u<<8|r[p],c+=8;c>t;)c-=t,a+=e[n&u>>c];if(c&&(a+=e[n&u<<t-c]),i)for(;a.length*t&7;)a+="=";return a},Or=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>Xl({prefix:e,name:r,encode(n){return QU(n,i,t)},decode(n){return YU(n,i,t,r)}}),XU=Xl({prefix:"\0",name:"identity",encode:r=>WU(r),decode:r=>JU(r)}),ZU=Object.freeze({__proto__:null,identity:XU}),ez=Or({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),tz=Object.freeze({__proto__:null,base2:ez}),rz=Or({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),iz=Object.freeze({__proto__:null,base8:rz}),nz=au({prefix:"9",name:"base10",alphabet:"0123456789"}),sz=Object.freeze({__proto__:null,base10:nz}),az=Or({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),oz=Or({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),cz=Object.freeze({__proto__:null,base16:az,base16upper:oz}),fz=Or({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uz=Or({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hz=Or({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lz=Or({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dz=Or({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pz=Or({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),gz=Or({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vz=Or({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bz=Or({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),mz=Object.freeze({__proto__:null,base32:fz,base32upper:uz,base32pad:hz,base32padupper:lz,base32hex:dz,base32hexupper:pz,base32hexpad:gz,base32hexpadupper:vz,base32z:bz}),yz=au({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wz=au({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),_z=Object.freeze({__proto__:null,base36:yz,base36upper:wz}),Ez=au({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xz=au({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Az=Object.freeze({__proto__:null,base58btc:Ez,base58flickr:xz}),Sz=Or({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Iz=Or({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mz=Or({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Dz=Or({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Rz=Object.freeze({__proto__:null,base64:Sz,base64pad:Iz,base64url:Mz,base64urlpad:Dz}),J4=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Pz=J4.reduce((r,e,t)=>(r[t]=e,r),[]),Cz=J4.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Oz(r){return r.reduce((e,t)=>(e+=Pz[t],e),"")}function Nz(r){let e=[];for(let t of r){let i=Cz[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}var Tz=Xl({prefix:"\u{1F680}",name:"base256emoji",encode:Oz,decode:Nz}),Lz=Object.freeze({__proto__:null,base256emoji:Tz}),qz=W4,x4=128,Bz=127,Fz=~Bz,Uz=Math.pow(2,31);function W4(r,e,t){e=e||[],t=t||0;for(var i=t;r>=Uz;)e[t++]=r&255|x4,r/=128;for(;r&Fz;)e[t++]=r&255|x4,r>>>=7;return e[t]=r|0,W4.bytes=t-i+1,e}var zz=Og,kz=128,A4=127;function Og(r,i){var t=0,i=i||0,n=0,a=i,c,u=r.length;do{if(a>=u)throw Og.bytes=0,new RangeError("Could not decode varint");c=r[a++],t+=n<28?(c&A4)<<n:(c&A4)*Math.pow(2,n),n+=7}while(c>=kz);return Og.bytes=a-i,t}var jz=Math.pow(2,7),Hz=Math.pow(2,14),Kz=Math.pow(2,21),Vz=Math.pow(2,28),Gz=Math.pow(2,35),$z=Math.pow(2,42),Jz=Math.pow(2,49),Wz=Math.pow(2,56),Yz=Math.pow(2,63),Qz=function(r){return r<jz?1:r<Hz?2:r<Kz?3:r<Vz?4:r<Gz?5:r<$z?6:r<Jz?7:r<Wz?8:r<Yz?9:10},Xz={encode:qz,decode:zz,encodingLength:Qz},Y4=Xz,S4=(r,e,t=0)=>(Y4.encode(r,e,t),e),I4=r=>Y4.encodingLength(r),Ng=(r,e)=>{let t=e.byteLength,i=I4(r),n=i+I4(t),a=new Uint8Array(n+t);return S4(r,a,0),S4(t,a,i),a.set(e,n),new Tg(r,t,e,a)},Tg=class{constructor(e,t,i,n){this.code=e,this.size=t,this.digest=i,this.bytes=n}},Q4=({name:r,code:e,encode:t})=>new Lg(r,e,t),Lg=class{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Ng(this.code,t):t.then(i=>Ng(this.code,i))}else throw Error("Unknown type, must be binary type")}},X4=r=>e=>L(void 0,null,function*(){return new Uint8Array(yield crypto.subtle.digest(r,e))}),Zz=Q4({name:"sha2-256",code:18,encode:X4("SHA-256")}),ek=Q4({name:"sha2-512",code:19,encode:X4("SHA-512")}),tk=Object.freeze({__proto__:null,sha256:Zz,sha512:ek}),Z4=0,rk="identity",e_=G4,ik=r=>Ng(Z4,e_(r)),nk={code:Z4,name:rk,encode:e_,digest:ik},sk=Object.freeze({__proto__:null,identity:nk});new TextEncoder,new TextDecoder;var M4=Je(Je(Je(Je(Je(Je(Je(Je(Je(Je({},ZU),tz),iz),sz),cz),mz),_z),Az),Rz),Lz);Je(Je({},tk),sk);function ak(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function t_(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}var D4=t_("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Sg=t_("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=ak(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),ok=Je({utf8:D4,"utf-8":D4,hex:M4.base16,latin1:Sg,ascii:Sg,binary:Sg},M4);function ck(r,e="utf8"){let t=ok[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var qg=class{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=pU,this.version=gU,this.initialized=!1,this.storagePrefix=rs,this.init=()=>L(this,null,function*(){if(!this.initialized){let i=yield this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}}),this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=(i,n)=>L(this,null,function*(){this.isInitialized(),this.keychain.set(i,n),yield this.persist()}),this.get=i=>{this.isInitialized();let n=this.keychain.get(i);if(typeof n>"u"){let{message:a}=ge("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(a)}return n},this.del=i=>L(this,null,function*(){this.isInitialized(),this.keychain.delete(i),yield this.persist()}),this.core=e,this.logger=Cr(t,this.name)}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setKeyChain(e){return L(this,null,function*(){yield this.core.storage.setItem(this.storageKey,b1(e))})}getKeyChain(){return L(this,null,function*(){let e=yield this.core.storage.getItem(this.storageKey);return typeof e<"u"?m1(e):void 0})}persist(){return L(this,null,function*(){yield this.setKeyChain(this.keychain)})}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}},Bg=class{constructor(e,t,i){this.core=e,this.logger=t,this.name=lU,this.randomSessionIdentifier=rl(),this.initialized=!1,this.init=()=>L(this,null,function*(){this.initialized||(yield this.keychain.init(),this.initialized=!0)}),this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=()=>L(this,null,function*(){this.isInitialized();let n=yield this.getClientSeed(),a=Gp(n);return Bh(a.publicKey)}),this.generateKeyPair=()=>{this.isInitialized();let n=w5();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=n=>L(this,null,function*(){this.isInitialized();let a=yield this.getClientSeed(),c=Gp(a),u=this.randomSessionIdentifier;return yield z6(u,n,dU,c)}),this.generateSharedKey=(n,a,c)=>{this.isInitialized();let u=this.getPrivateKey(n),p=_5(u,a);return this.setSymKey(p,c)},this.setSymKey=(n,a)=>L(this,null,function*(){this.isInitialized();let c=a||lc(n);return yield this.keychain.set(c,n),c}),this.deleteKeyPair=n=>L(this,null,function*(){this.isInitialized(),yield this.keychain.del(n)}),this.deleteSymKey=n=>L(this,null,function*(){this.isInitialized(),yield this.keychain.del(n)}),this.encode=(n,a,c)=>L(this,null,function*(){this.isInitialized();let u=N1(c),p=Jr(a);if(L1(u))return A5(p,c?.encoding);if(T1(u)){let R=u.senderPublicKey,I=u.receiverPublicKey;n=yield this.generateSharedKey(R,I)}let g=this.getSymKey(n),{type:m,senderPublicKey:w}=u;return x5({type:m,symKey:g,message:p,senderPublicKey:w,encoding:c?.encoding})}),this.decode=(n,a,c)=>L(this,null,function*(){this.isInitialized();let u=D5(a,c);if(L1(u)){let p=I5(a,c?.encoding);return Gi(p)}if(T1(u)){let p=u.receiverPublicKey,g=u.senderPublicKey;n=yield this.generateSharedKey(p,g)}try{let p=this.getSymKey(n),g=S5({symKey:p,encoded:a,encoding:c?.encoding});return Gi(g)}catch(p){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${yield this.getClientId()}'`),this.logger.error(p)}}),this.getPayloadType=(n,a=Yn)=>{let c=dc({encoded:n,encoding:a});return la(c.type)},this.getPayloadSenderPublicKey=(n,a=Yn)=>{let c=dc({encoded:n,encoding:a});return c.senderPublicKey?nr(c.senderPublicKey,zr):void 0},this.core=e,this.logger=Cr(t,this.name),this.keychain=i||new qg(this.core,this.logger)}get context(){return jr(this.logger)}setPrivateKey(e,t){return L(this,null,function*(){return yield this.keychain.set(e,t),e})}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){return L(this,null,function*(){let e="";try{e=this.keychain.get(_4)}catch{e=rl(),yield this.keychain.set(_4,e)}return ck(e,"base16")})}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}},Fg=class extends ml{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=vU,this.version=bU,this.initialized=!1,this.storagePrefix=rs,this.init=()=>L(this,null,function*(){if(!this.initialized){this.logger.trace("Initialized");try{let i=yield this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}}),this.set=(i,n)=>L(this,null,function*(){this.isInitialized();let a=pn(n),c=this.messages.get(i);return typeof c>"u"&&(c={}),typeof c[a]<"u"||(c[a]=n,this.messages.set(i,c),yield this.persist()),a}),this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();let a=this.get(i),c=pn(n);return typeof a[c]<"u"},this.del=i=>L(this,null,function*(){this.isInitialized(),this.messages.delete(i),yield this.persist()}),this.logger=Cr(e,this.name),this.core=t}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setRelayerMessages(e){return L(this,null,function*(){yield this.core.storage.setItem(this.storageKey,b1(e))})}getRelayerMessages(){return L(this,null,function*(){let e=yield this.core.storage.getItem(this.storageKey);return typeof e<"u"?m1(e):void 0})}persist(){return L(this,null,function*(){yield this.setRelayerMessages(this.messages)})}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}},Ug=class extends yl{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new js.EventEmitter,this.name=yU,this.queue=new Map,this.publishTimeout=(0,Ie.toMiliseconds)(Ie.ONE_MINUTE),this.failedPublishTimeout=(0,Ie.toMiliseconds)(Ie.ONE_SECOND),this.needsTransportRestart=!1,this.publish=(i,n,a)=>L(this,null,function*(){var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:a}});let u=a?.ttl||mU,p=il(a),g=a?.prompt||!1,m=a?.tag||0,w=a?.id||vn().toString(),R={topic:i,message:n,opts:{ttl:u,relay:p,prompt:g,tag:m,id:w,attestation:a?.attestation}},I=`Failed to publish payload, please try again. id:${w} tag:${m}`,O=Date.now(),B,F=1;try{for(;B===void 0;){if(Date.now()-O>this.publishTimeout)throw new Error(I);this.logger.trace({id:w,attempts:F},`publisher.publish - attempt ${F}`),B=yield yield Ya(this.rpcPublish(i,n,u,p,g,m,w,a?.attestation).catch(z=>this.logger.warn(z)),this.publishTimeout,I),F++,B||(yield new Promise(z=>setTimeout(z,this.failedPublishTimeout)))}this.relayer.events.emit(Kr.publish,R),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:w,topic:i,message:n,opts:a}})}catch(z){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(z),(c=a?.internal)!=null&&c.throwOnFailedPublish)throw z;this.queue.set(w,R)}}),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=Cr(t,this.name),this.registerEventListeners()}get context(){return jr(this.logger)}rpcPublish(e,t,i,n,a,c,u,p){var g,m,w,R;let I={method:pc(n.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:a,tag:c,attestation:p},id:u};return Rr((g=I.params)==null?void 0:g.prompt)&&((m=I.params)==null||delete m.prompt),Rr((w=I.params)==null?void 0:w.tag)&&((R=I.params)==null||delete R.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:I}),this.relayer.request(I)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(e=>L(this,null,function*(){let{topic:t,message:i,opts:n}=e;yield this.publish(t,i,n)}))}registerEventListeners(){this.relayer.core.heartbeat.on(Za.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Kr.connection_stalled);return}this.checkQueue()}),this.relayer.on(Kr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}},zg=class{constructor(){this.map=new Map,this.set=(e,t)=>{let i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let i=this.get(e);if(!this.exists(e,t))return;let n=i.filter(a=>a!==t);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}},fk=Object.defineProperty,uk=Object.defineProperties,hk=Object.getOwnPropertyDescriptors,R4=Object.getOwnPropertySymbols,lk=Object.prototype.hasOwnProperty,dk=Object.prototype.propertyIsEnumerable,P4=(r,e,t)=>e in r?fk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,nu=(r,e)=>{for(var t in e||(e={}))lk.call(e,t)&&P4(r,t,e[t]);if(R4)for(var t of R4(e))dk.call(e,t)&&P4(r,t,e[t]);return r},Ig=(r,e)=>uk(r,hk(e)),kg=class extends El{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new zg,this.events=new js.EventEmitter,this.name=IU,this.version=MU,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=rs,this.subscribeTimeout=(0,Ie.toMiliseconds)(Ie.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=()=>L(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=yield this.relayer.core.crypto.getClientId(),yield this.restore()),this.initialized=!0}),this.subscribe=(i,n)=>L(this,null,function*(){this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{let a=il(n),c={topic:i,relay:a,transportType:n?.transportType};this.pending.set(i,c);let u=yield this.rpcSubscribe(i,a,n?.transportType);return typeof u=="string"&&(this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}}),this.unsubscribe=(i,n)=>L(this,null,function*(){yield this.restartToComplete(),this.isInitialized(),typeof n?.id<"u"?yield this.unsubscribeById(i,n.id,n):yield this.unsubscribeByTopic(i,n)}),this.isSubscribed=i=>L(this,null,function*(){if(this.topics.includes(i))return!0;let n=`${this.pendingSubscriptionWatchLabel}_${i}`;return yield new Promise((a,c)=>{let u=new Ie.Watch;u.start(n);let p=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(p),u.stop(n),a(!0)),u.elapsed(n)>=DU&&(clearInterval(p),u.stop(n),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.start=()=>L(this,null,function*(){yield this.onConnect()}),this.stop=()=>L(this,null,function*(){yield this.onDisconnect()}),this.restart=()=>L(this,null,function*(){this.restartInProgress=!0,yield this.restore(),yield this.reset(),this.restartInProgress=!1}),this.relayer=e,this.logger=Cr(t,this.name),this.clientId=""}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(e,t){return L(this,null,function*(){let i=this.topicMap.get(e);yield Promise.all(i.map(n=>L(this,null,function*(){return yield this.unsubscribeById(e,n,t)})))})}unsubscribeById(e,t,i){return L(this,null,function*(){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{let n=il(i);yield this.rpcUnsubscribe(e,t,n);let a=ot("USER_DISCONNECTED",`${this.name}, ${e}`);yield this.onUnsubscribe(e,t,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}})}rpcSubscribe(n,a){return L(this,arguments,function*(e,t,i=jt.relay){i===jt.relay&&(yield this.restartToComplete());let c={method:pc(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:c});try{let u=pn(e+this.clientId);return i===jt.link_mode?(setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(c).catch(p=>this.logger.warn(p))},(0,Ie.toMiliseconds)(Ie.ONE_SECOND)),u):(yield yield Ya(this.relayer.request(c).catch(p=>this.logger.warn(p)),this.subscribeTimeout))?u:null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Kr.connection_stalled)}return null})}rpcBatchSubscribe(e){return L(this,null,function*(){if(!e.length)return;let t=e[0].relay,i={method:pc(t.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return yield yield Ya(this.relayer.request(i).catch(n=>this.logger.warn(n)),this.subscribeTimeout)}catch{this.relayer.events.emit(Kr.connection_stalled)}})}rpcBatchFetchMessages(e){return L(this,null,function*(){if(!e.length)return;let t=e[0].relay,i={method:pc(t.protocol).batchFetchMessages,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=yield yield Ya(this.relayer.request(i).catch(a=>this.logger.warn(a)),this.subscribeTimeout)}catch{this.relayer.events.emit(Kr.connection_stalled)}return n})}rpcUnsubscribe(e,t,i){let n={method:pc(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,Ig(nu({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,nu({},t)),this.pending.delete(t.topic)})}onUnsubscribe(e,t,i){return L(this,null,function*(){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),yield this.relayer.messages.del(e)})}setRelayerSubscriptions(e){return L(this,null,function*(){yield this.relayer.core.storage.setItem(this.storageKey,e)})}getRelayerSubscriptions(){return L(this,null,function*(){return yield this.relayer.core.storage.getItem(this.storageKey)})}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,nu({},t)),this.topicMap.set(t.topic,e),this.events.emit(es.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(es.deleted,Ig(nu({},i),{reason:t}))}persist(){return L(this,null,function*(){yield this.setRelayerSubscriptions(this.values),this.events.emit(es.sync)})}reset(){return L(this,null,function*(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){let i=this.cached.splice(0,this.batchSubscribeTopicsLimit);yield this.batchFetchMessages(i),yield this.batchSubscribe(i)}}this.events.emit(es.resubscribed)})}restore(){return L(this,null,function*(){try{let e=yield this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}})}batchSubscribe(e){return L(this,null,function*(){if(!e.length)return;let t=yield this.rpcBatchSubscribe(e);Di(t)&&this.onBatchSubscribe(t.map((i,n)=>Ig(nu({},e[n]),{id:i})))})}batchFetchMessages(e){return L(this,null,function*(){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let t=yield this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))})}onConnect(){return L(this,null,function*(){yield this.restart(),this.onEnable()})}onDisconnect(){this.onDisable()}checkPending(){return L(this,null,function*(){if(!this.initialized||!this.relayer.connected)return;let e=[];this.pending.forEach(t=>{e.push(t)}),yield this.batchSubscribe(e),this.pendingBatchMessages.length&&(yield this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])})}registerEventListeners(){this.relayer.core.heartbeat.on(Za.pulse,()=>L(this,null,function*(){yield this.checkPending()})),this.events.on(es.created,e=>L(this,null,function*(){let t=es.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),yield this.persist()})),this.events.on(es.deleted,e=>L(this,null,function*(){let t=es.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),yield this.persist()}))}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(){return L(this,null,function*(){!this.relayer.connected&&!this.relayer.connecting&&(yield this.relayer.transportOpen()),this.restartInProgress&&(yield new Promise(e=>{let t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)}))})}},pk=Object.defineProperty,C4=Object.getOwnPropertySymbols,gk=Object.prototype.hasOwnProperty,vk=Object.prototype.propertyIsEnumerable,O4=(r,e,t)=>e in r?pk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,bk=(r,e)=>{for(var t in e||(e={}))gk.call(e,t)&&O4(r,t,e[t]);if(C4)for(var t of C4(e))vk.call(e,t)&&O4(r,t,e[t]);return r},jg=class extends wl{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new js.EventEmitter,this.name=_U,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=(0,Ie.toMiliseconds)(Ie.THIRTY_SECONDS+Ie.ONE_SECOND),this.request=t=>L(this,null,function*(){var i,n;this.logger.debug("Publishing Request Payload");let a=t.id||vn().toString();yield this.toEstablishConnection();try{let c=this.provider.request(t);this.requestsInFlight.set(a,{promise:c,request:t}),this.logger.trace({id:a,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");let u=yield new Promise((p,g)=>L(this,null,function*(){let m=()=>{g(new Error(`relayer.request - publish interrupted, id: ${a}`))};this.provider.on(Qi.disconnect,m);let w=yield c;this.provider.off(Qi.disconnect,m),p(w)}));return this.logger.trace({id:a,method:t.method,topic:(n=t.params)==null?void 0:n.topic},"relayer.request - published"),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${a}`),c}finally{this.requestsInFlight.delete(a)}}),this.resetPingTimeout=()=>{if(Pf())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,n;(n=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null||n.terminate()},this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(Kr.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Kr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Qi.payload,this.onPayloadHandler),this.provider.on(Qi.connect,this.onConnectHandler),this.provider.on(Qi.disconnect,this.onDisconnectHandler),this.provider.on(Qi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Cr(e.logger,this.name):(0,to.default)(ro({level:e.logger||wU})),this.messages=new Fg(this.logger,e.core),this.subscriber=new kg(this,this.logger),this.publisher=new Ug(this,this.logger),this.relayUrl=e?.relayUrl||K4,this.projectId=e.projectId,this.bundleId=Aw(),this.provider={}}init(){return L(this,null,function*(){if(this.logger.trace("Initialized"),this.registerEventListeners(),yield Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{yield this.transportOpen()}catch(e){this.logger.warn(e)}})}get context(){return jr(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0}publish(e,t,i){return L(this,null,function*(){this.isInitialized(),yield this.publisher.publish(e,t,i),yield this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:jt.relay})})}subscribe(e,t){return L(this,null,function*(){var i;this.isInitialized(),t?.transportType==="relay"&&(yield this.toEstablishConnection());let n=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",a,c=u=>{u.topic===e&&(this.subscriber.off(es.created,c),a())};return yield Promise.all([new Promise(u=>{a=u,this.subscriber.on(es.created,c)}),new Promise(u=>L(this,null,function*(){n=(yield this.subscriber.subscribe(e,t))||n,u()}))]),n})}unsubscribe(e,t){return L(this,null,function*(){this.isInitialized(),yield this.subscriber.unsubscribe(e,t)})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportDisconnect(){return L(this,null,function*(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{yield Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?yield Ya(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()})}transportClose(){return L(this,null,function*(){this.transportExplicitlyClosed=!0,yield this.transportDisconnect()})}transportOpen(e){return L(this,null,function*(){yield this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,yield this.transportDisconnect()),yield this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{yield new Promise((t,i)=>L(this,null,function*(){let n=()=>{this.provider.off(Qi.disconnect,n),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Qi.disconnect,n),yield Ya(this.provider.connect(),(0,Ie.toMiliseconds)(Ie.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{i(a)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(a=>{this.logger.error(a),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,t()}))}catch(t){this.logger.error(t);let i=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw t}finally{this.connectionAttemptInProgress=!1}})}restartTransport(e){return L(this,null,function*(){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,yield this.confirmOnlineStateOrThrow(),yield this.transportClose(),yield this.transportOpen())})}confirmOnlineStateOrThrow(){return L(this,null,function*(){if(!(yield H1()))throw new Error("No internet connection detected. Please restart your network and try again.")})}handleBatchMessageEvents(e){return L(this,null,function*(){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.trace(`Batch of ${t.length} message events sorted`);for(let i of t)try{yield this.onMessageEvent(i)}catch(n){this.logger.warn(n)}this.logger.trace(`Batch of ${t.length} message events processed`)})}onLinkMessageEvent(e,t){return L(this,null,function*(){let{topic:i}=e;if(!t.sessionExists){let n=dr(Ie.FIVE_MINUTES),a={topic:i,expiry:n,relay:{protocol:"irn"},active:!1};yield this.core.pairing.pairings.set(i,a)}this.events.emit(Kr.message,e),yield this.recordMessageEvent(e)})}startPingTimeout(){var e,t,i,n,a;if(Pf())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((a=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||a.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}createProvider(){return L(this,null,function*(){this.provider.connection&&this.unregisterProviderListeners();let e=yield this.core.crypto.signJWT(this.relayUrl);this.provider=new Zr(new zl(Sw({sdkVersion:Mg,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()})}recordMessageEvent(e){return L(this,null,function*(){let{topic:t,message:i}=e;yield this.messages.set(t,i)})}shouldIgnoreMessageEvent(e){return L(this,null,function*(){let{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!(yield this.subscriber.isSubscribed(t)))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;let n=this.messages.has(t,i);return n&&this.logger.debug(`Ignoring duplicate message: ${i}`),n})}onProviderPayload(e){return L(this,null,function*(){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),yc(e)){if(!e.method.endsWith(EU))return;let t=e.params,{topic:i,message:n,publishedAt:a,attestation:c}=t.data,u={topic:i,message:n,publishedAt:a,transportType:jt.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(bk({type:"event",event:t.id},u)),this.events.emit(t.id,u),yield this.acknowledgePayload(e),yield this.onMessageEvent(u)}else ma(e)&&this.events.emit(Kr.message_ack,e)})}onMessageEvent(e){return L(this,null,function*(){(yield this.shouldIgnoreMessageEvent(e))||(this.events.emit(Kr.message,e),yield this.recordMessageEvent(e))})}acknowledgePayload(e){return L(this,null,function*(){let t=ba(e.id,!0);yield this.provider.connection.send(t)})}unregisterProviderListeners(){this.provider.off(Qi.payload,this.onPayloadHandler),this.provider.off(Qi.connect,this.onConnectHandler),this.provider.off(Qi.disconnect,this.onDisconnectHandler),this.provider.off(Qi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}registerEventListeners(){return L(this,null,function*(){let e=yield H1();G5(t=>L(this,null,function*(){e!==t&&(e=t,t?yield this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,yield this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))})}onProviderDisconnect(){return L(this,null,function*(){yield this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Kr.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(()=>L(this,null,function*(){yield this.transportOpen().catch(e=>this.logger.error(e))}),(0,Ie.toMiliseconds)(xU))))})}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}toEstablishConnection(){return L(this,null,function*(){yield this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&(yield new Promise(e=>{let t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)})),yield this.transportOpen())})}},mk=Object.defineProperty,N4=Object.getOwnPropertySymbols,yk=Object.prototype.hasOwnProperty,wk=Object.prototype.propertyIsEnumerable,T4=(r,e,t)=>e in r?mk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,L4=(r,e)=>{for(var t in e||(e={}))yk.call(e,t)&&T4(r,t,e[t]);if(N4)for(var t of N4(e))wk.call(e,t)&&T4(r,t,e[t]);return r},is=class extends _l{constructor(e,t,i,n=rs,a=void 0){super(e,t,i,n),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=AU,this.cached=[],this.initialized=!1,this.storagePrefix=rs,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=()=>L(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),yield this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Rr(c)?this.map.set(this.getKey(c),c):O5(c)?this.map.set(c.id,c):N5(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),this.set=(c,u)=>L(this,null,function*(){this.isInitialized(),this.map.has(c)?yield this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),yield this.persist())}),this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(p=>(0,k4.default)(u[p],c[p]))):this.values),this.update=(c,u)=>L(this,null,function*(){this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});let p=L4(L4({},this.getData(c)),u);this.map.set(c,p),yield this.persist()}),this.delete=(c,u)=>L(this,null,function*(){this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),this.addToRecentlyDeleted(c),yield this.persist())}),this.logger=Cr(t,this.name),this.storagePrefix=n,this.getKey=a}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}setDataStore(e){return L(this,null,function*(){yield this.core.storage.setItem(this.storageKey,e)})}getDataStore(){return L(this,null,function*(){return yield this.core.storage.getItem(this.storageKey)})}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:n}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}let{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}persist(){return L(this,null,function*(){yield this.setDataStore(this.values)})}restore(){return L(this,null,function*(){try{let e=yield this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}})}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}},Hg=class{constructor(e,t){this.core=e,this.logger=t,this.name=RU,this.version=PU,this.events=new js.default,this.initialized=!1,this.storagePrefix=rs,this.ignoredPayloadTypes=[dn],this.registeredMethods=[],this.init=()=>L(this,null,function*(){this.initialized||(yield this.pairings.init(),yield this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=i=>L(this,null,function*(){this.isInitialized();let n=rl(),a=yield this.core.crypto.setSymKey(n),c=dr(Ie.FIVE_MINUTES),u={protocol:Qg},p={topic:a,expiry:c,relay:u,active:!1,methods:i?.methods},g=B1({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:n,relay:u,expiryTimestamp:c,methods:i?.methods});return this.events.emit(_a.create,p),this.core.expirer.set(a,c),yield this.pairings.set(a,p),yield this.core.relayer.subscribe(a,{transportType:i?.transportType}),{topic:a,uri:g}}),this.pair=i=>L(this,null,function*(){this.isInitialized();let n=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[mn.pairing_started]}});this.isValidPair(i,n);let{topic:a,symKey:c,relay:u,expiryTimestamp:p,methods:g}=q1(i.uri);n.props.properties.topic=a,n.addTrace(mn.pairing_uri_validation_success),n.addTrace(mn.pairing_uri_not_expired);let m;if(this.pairings.keys.includes(a)){if(m=this.pairings.get(a),n.addTrace(mn.existing_pairing),m.active)throw n.setError(ts.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);n.addTrace(mn.pairing_not_expired)}let w=p||dr(Ie.FIVE_MINUTES),R={topic:a,relay:u,expiry:w,active:!1,methods:g};this.core.expirer.set(a,w),yield this.pairings.set(a,R),n.addTrace(mn.store_new_pairing),i.activatePairing&&(yield this.activate({topic:a})),this.events.emit(_a.create,R),n.addTrace(mn.emit_inactive_pairing),this.core.crypto.keychain.has(a)||(yield this.core.crypto.setSymKey(c,a)),n.addTrace(mn.subscribing_pairing_topic);try{yield this.core.relayer.confirmOnlineStateOrThrow()}catch{n.setError(ts.no_internet_connection)}try{yield this.core.relayer.subscribe(a,{relay:u})}catch(I){throw n.setError(ts.subscribe_pairing_topic_failure),I}return n.addTrace(mn.subscribe_pairing_topic_success),R}),this.activate=n=>L(this,[n],function*({topic:i}){this.isInitialized();let a=dr(Ie.THIRTY_DAYS);this.core.expirer.set(i,a),yield this.pairings.update(i,{active:!0,expiry:a})}),this.ping=i=>L(this,null,function*(){this.isInitialized(),yield this.isValidPing(i);let{topic:n}=i;if(this.pairings.keys.includes(n)){let a=yield this.sendRequest(n,"wc_pairingPing",{}),{done:c,resolve:u,reject:p}=Bs();this.events.once(We("pairing_ping",a),({error:g})=>{g?p(g):u()}),yield c()}}),this.updateExpiry=a=>L(this,[a],function*({topic:i,expiry:n}){this.isInitialized(),yield this.pairings.update(i,{expiry:n})}),this.updateMetadata=a=>L(this,[a],function*({topic:i,metadata:n}){this.isInitialized(),yield this.pairings.update(i,{peerMetadata:n})}),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=i=>L(this,null,function*(){this.isInitialized(),yield this.isValidDisconnect(i);let{topic:n}=i;this.pairings.keys.includes(n)&&(yield this.sendRequest(n,"wc_pairingDelete",ot("USER_DISCONNECTED")),yield this.deletePairing(n))}),this.formatUriFromPairing=i=>{this.isInitialized();let{topic:n,relay:a,expiry:c,methods:u}=i,p=this.core.crypto.keychain.get(n);return B1({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:p,relay:a,expiryTimestamp:c,methods:u})},this.sendRequest=(i,n,a)=>L(this,null,function*(){let c=Ri(n,a),u=yield this.core.crypto.encode(i,c),p=iu[n].req;return this.core.history.set(i,c),this.core.relayer.publish(i,u,p),c.id}),this.sendResult=(i,n,a)=>L(this,null,function*(){let c=ba(i,a),u=yield this.core.crypto.encode(n,c),p=yield this.core.history.get(n,i),g=iu[p.request.method].res;yield this.core.relayer.publish(n,u,g),yield this.core.history.resolve(c)}),this.sendError=(i,n,a)=>L(this,null,function*(){let c=Us(i,a),u=yield this.core.crypto.encode(n,c),p=yield this.core.history.get(n,i),g=iu[p.request.method]?iu[p.request.method].res:iu.unregistered_method.res;yield this.core.relayer.publish(n,u,g),yield this.core.history.resolve(c)}),this.deletePairing=(i,n)=>L(this,null,function*(){yield this.core.relayer.unsubscribe(i),yield Promise.all([this.pairings.delete(i,ot("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])}),this.cleanup=()=>L(this,null,function*(){let i=this.pairings.getAll().filter(n=>Jn(n.expiry));yield Promise.all(i.map(n=>this.deletePairing(n.topic)))}),this.onRelayEventRequest=i=>{let{topic:n,payload:a}=i;switch(a.method){case"wc_pairingPing":return this.onPairingPingRequest(n,a);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,a);default:return this.onUnknownRpcMethodRequest(n,a)}},this.onRelayEventResponse=i=>L(this,null,function*(){let{topic:n,payload:a}=i,c=(yield this.core.history.get(n,a.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(n,a);default:return this.onUnknownRpcMethodResponse(c)}}),this.onPairingPingRequest=(i,n)=>L(this,null,function*(){let{id:a}=n;try{this.isValidPing({topic:i}),yield this.sendResult(a,i,!0),this.events.emit(_a.ping,{id:a,topic:i})}catch(c){yield this.sendError(a,i,c),this.logger.error(c)}}),this.onPairingPingResponse=(i,n)=>{let{id:a}=n;setTimeout(()=>{Pi(n)?this.events.emit(We("pairing_ping",a),{}):Hr(n)&&this.events.emit(We("pairing_ping",a),{error:n.error})},500)},this.onPairingDeleteRequest=(i,n)=>L(this,null,function*(){let{id:a}=n;try{this.isValidDisconnect({topic:i}),yield this.deletePairing(i),this.events.emit(_a.delete,{id:a,topic:i})}catch(c){yield this.sendError(a,i,c),this.logger.error(c)}}),this.onUnknownRpcMethodRequest=(i,n)=>L(this,null,function*(){let{id:a,method:c}=n;try{if(this.registeredMethods.includes(c))return;let u=ot("WC_METHOD_UNSUPPORTED",c);yield this.sendError(a,i,u),this.logger.error(u)}catch(u){yield this.sendError(a,i,u),this.logger.error(u)}}),this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(ot("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,n)=>{var a;if(!kr(i)){let{message:u}=ge("MISSING_OR_INVALID",`pair() params: ${i}`);throw n.setError(ts.malformed_pairing_uri),new Error(u)}if(!C5(i.uri)){let{message:u}=ge("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw n.setError(ts.malformed_pairing_uri),new Error(u)}let c=q1(i?.uri);if(!((a=c?.relay)!=null&&a.protocol)){let{message:u}=ge("MISSING_OR_INVALID","pair() uri#relay-protocol");throw n.setError(ts.malformed_pairing_uri),new Error(u)}if(!(c!=null&&c.symKey)){let{message:u}=ge("MISSING_OR_INVALID","pair() uri#symKey");throw n.setError(ts.malformed_pairing_uri),new Error(u)}if(c!=null&&c.expiryTimestamp&&(0,Ie.toMiliseconds)(c?.expiryTimestamp)<Date.now()){n.setError(ts.pairing_expired);let{message:u}=ge("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}},this.isValidPing=i=>L(this,null,function*(){if(!kr(i)){let{message:a}=ge("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(a)}let{topic:n}=i;yield this.isValidPairingTopic(n)}),this.isValidDisconnect=i=>L(this,null,function*(){if(!kr(i)){let{message:a}=ge("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(a)}let{topic:n}=i;yield this.isValidPairingTopic(n)}),this.isValidPairingTopic=i=>L(this,null,function*(){if(!er(i,!1)){let{message:n}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){let{message:n}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(Jn(this.pairings.get(i).expiry)){yield this.deletePairing(i);let{message:n}=ge("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}}),this.core=e,this.logger=Cr(t,this.name),this.pairings=new is(this.core,this.logger,this.name,this.storagePrefix)}get context(){return jr(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Kr.message,e=>L(this,null,function*(){let{topic:t,message:i,transportType:n}=e;if(!this.pairings.keys.includes(t)||n===jt.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;let a=yield this.core.crypto.decode(t,i);try{yc(a)?(this.core.history.set(t,a),this.onRelayEventRequest({topic:t,payload:a})):ma(a)&&(yield this.core.history.resolve(a),yield this.onRelayEventResponse({topic:t,payload:a}),this.core.history.delete(t,a.id))}catch(c){this.logger.error(c)}}))}registerExpirerEvents(){this.core.expirer.on(Ci.expired,e=>L(this,null,function*(){let{topic:t}=el(e.target);t&&this.pairings.keys.includes(t)&&(yield this.deletePairing(t,!0),this.events.emit(_a.expire,{topic:t}))}))}},Kg=class extends bl{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new js.EventEmitter,this.name=CU,this.version=OU,this.cached=[],this.initialized=!1,this.storagePrefix=rs,this.init=()=>L(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),yield this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),this.set=(i,n,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:a}),this.records.has(n.id))return;let c={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:a,expiry:dr(Ie.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(bn.created,c)},this.resolve=i=>L(this,null,function*(){if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;let n=yield this.getRecord(i.id);typeof n.response>"u"&&(n.response=Hr(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(bn.updated,n))}),this.get=(i,n)=>L(this,null,function*(){return this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),yield this.getRecord(n)}),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(a=>{if(a.topic===i){if(typeof n<"u"&&a.id!==n)return;this.records.delete(a.id),this.events.emit(bn.deleted,a)}}),this.persist()},this.exists=(i,n)=>L(this,null,function*(){return this.isInitialized(),this.records.has(n)?(yield this.getRecord(n)).topic===i:!1}),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Cr(t,this.name)}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;let i={topic:t.topic,request:Ri(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}setJsonRpcRecords(e){return L(this,null,function*(){yield this.core.storage.setItem(this.storageKey,e)})}getJsonRpcRecords(){return L(this,null,function*(){return yield this.core.storage.getItem(this.storageKey)})}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}persist(){return L(this,null,function*(){yield this.setJsonRpcRecords(this.values),this.events.emit(bn.sync)})}restore(){return L(this,null,function*(){try{let e=yield this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}})}registerEventListeners(){this.events.on(bn.created,e=>{let t=bn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(bn.updated,e=>{let t=bn.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(bn.deleted,e=>{let t=bn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(Za.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,Ie.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(bn.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}},Vg=class extends xl{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new js.EventEmitter,this.name=NU,this.version=TU,this.cached=[],this.initialized=!1,this.storagePrefix=rs,this.init=()=>L(this,null,function*(){this.initialized||(this.logger.trace("Initialized"),yield this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),this.has=i=>{try{let n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();let a=this.formatTarget(i),c={target:a,expiry:n};this.expirations.set(a,c),this.checkExpiry(a,c),this.events.emit(Ci.created,{target:a,expiration:c})},this.get=i=>{this.isInitialized();let n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){let n=this.formatTarget(i),a=this.getExpiration(n);this.expirations.delete(n),this.events.emit(Ci.deleted,{target:n,expiration:a})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Cr(t,this.name)}get context(){return jr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Mw(e);if(typeof e=="number")return Dw(e);let{message:t}=ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}setExpirations(e){return L(this,null,function*(){yield this.core.storage.setItem(this.storageKey,e)})}getExpirations(){return L(this,null,function*(){return yield this.core.storage.getItem(this.storageKey)})}persist(){return L(this,null,function*(){yield this.setExpirations(this.values),this.events.emit(Ci.sync)})}restore(){return L(this,null,function*(){try{let e=yield this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}})}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){let{expiry:i}=t;(0,Ie.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Ci.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Za.pulse,()=>this.checkExpirations()),this.events.on(Ci.created,e=>{let t=Ci.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ci.expired,e=>{let t=Ci.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ci.deleted,e=>{let t=Ci.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.getLocalStorage=Yt.getLocalStorageOrThrow=Yt.getCrypto=Yt.getCryptoOrThrow=Yt.getLocation=Yt.getLocationOrThrow=Yt.getNavigator=Yt.getNavigatorOrThrow=r_=Yt.getDocument=Yt.getDocumentOrThrow=Yt.getFromWindowOrThrow=Yt.getFromWindow=void 0;function oo(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Yt.getFromWindow=oo;function Sc(r){let e=oo(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Yt.getFromWindowOrThrow=Sc;function _k(){return Sc("document")}Yt.getDocumentOrThrow=_k;function Ek(){return oo("document")}var r_=Yt.getDocument=Ek;function xk(){return Sc("navigator")}Yt.getNavigatorOrThrow=xk;function Ak(){return oo("navigator")}Yt.getNavigator=Ak;function Sk(){return Sc("location")}Yt.getLocationOrThrow=Sk;function Ik(){return oo("location")}Yt.getLocation=Ik;function Mk(){return Sc("crypto")}Yt.getCryptoOrThrow=Mk;function Dk(){return oo("crypto")}Yt.getCrypto=Dk;function Rk(){return Sc("localStorage")}Yt.getLocalStorageOrThrow=Rk;function Pk(){return oo("localStorage")}Yt.getLocalStorage=Pk;var Gg=class extends Al{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,this.name=LU,this.verifyUrlV3=BU,this.storagePrefix=rs,this.version=H4,this.init=()=>L(this,null,function*(){var n;this.isDevEnv||(this.publicKey=yield this.store.getItem(this.storeKey),this.publicKey&&(0,Ie.toMiliseconds)((n=this.publicKey)==null?void 0:n.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),yield this.removePublicKey()))}),this.register=n=>L(this,null,function*(){if(!sc()||this.isDevEnv)return;let a=window.location.origin,{id:c,decryptedId:u}=n,p=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${c}&decryptedId=${u}`;try{let g=r_(),m=this.startAbortTimer(Ie.ONE_SECOND*5),w=yield new Promise((R,I)=>{let O=()=>{window.removeEventListener("message",F),g.body.removeChild(B),I("attestation aborted")};this.abortController.signal.addEventListener("abort",O);let B=g.createElement("iframe");B.src=p,B.style.display="none",B.addEventListener("error",O,{signal:this.abortController.signal});let F=z=>{if(z.data&&typeof z.data=="string")try{let Y=JSON.parse(z.data);if(Y.type==="verify_attestation"){if(Yo(Y.attestation).payload.id!==c)return;clearInterval(m),g.body.removeChild(B),this.abortController.signal.removeEventListener("abort",O),window.removeEventListener("message",F),R(Y.attestation===null?"":Y.attestation)}}catch(Y){this.logger.warn(Y)}};g.body.appendChild(B),window.addEventListener("message",F,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",w),w}catch(g){this.logger.warn(g)}return""}),this.resolve=n=>L(this,null,function*(){if(this.isDevEnv)return"";let{attestationId:a,hash:c,encryptedId:u}=n;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(Yo(a).payload.id!==u)return;let g=yield this.isValidJwtAttestation(a);if(g){if(!g.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return g}}if(!c)return;let p=this.getVerifyUrl(n?.verifyUrl);return this.fetchAttestation(c,p)}),this.fetchAttestation=(n,a)=>L(this,null,function*(){this.logger.debug(`resolving attestation: ${n} from url: ${a}`);let c=this.startAbortTimer(Ie.ONE_SECOND*5),u=yield fetch(`${a}/attestation/${n}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),u.status===200?yield u.json():void 0}),this.getVerifyUrl=n=>{let a=n||xc;return FU.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${xc}`),a=xc),a},this.fetchPublicKey=()=>L(this,null,function*(){try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let n=this.startAbortTimer(Ie.FIVE_SECONDS),a=yield fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(n),yield a.json()}catch(n){this.logger.warn(n)}}),this.persistPublicKey=n=>L(this,null,function*(){this.logger.debug("persisting public key to local storage",n),yield this.store.setItem(this.storeKey,n),this.publicKey=n}),this.removePublicKey=()=>L(this,null,function*(){this.logger.debug("removing verify v2 public key from storage"),yield this.store.removeItem(this.storeKey),this.publicKey=void 0}),this.isValidJwtAttestation=n=>L(this,null,function*(){let a=yield this.getPublicKey();try{if(a)return this.validateAttestation(n,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}let c=yield this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(n,c)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}}),this.getPublicKey=()=>L(this,null,function*(){return this.publicKey?this.publicKey:yield this.fetchAndPersistPublicKey()}),this.fetchAndPersistPublicKey=()=>L(this,null,function*(){if(this.fetchPromise)return yield this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(a=>L(this,null,function*(){let c=yield this.fetchPublicKey();c&&(yield this.persistPublicKey(c),a(c))}));let n=yield this.fetchPromise;return this.fetchPromise=void 0,n}),this.validateAttestation=(n,a)=>{let c=R5(n,a.publicKey),u={hasExpired:(0,Ie.toMiliseconds)(c.exp)<Date.now(),payload:c};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}},this.logger=Cr(t,this.name),this.abortController=new AbortController,this.isDevEnv=Nf(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return jr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,Ie.toMiliseconds)(e))}},$g=class extends Sl{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=UU,this.registerDeviceToken=i=>L(this,null,function*(){let{clientId:n,token:a,notificationType:c,enableEncrypted:u=!1}=i,p=`${zU}/${this.projectId}/clients`;yield fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:c,token:a,always_raw:u})})}),this.logger=Cr(t,this.context)}},Ck=Object.defineProperty,q4=Object.getOwnPropertySymbols,Ok=Object.prototype.hasOwnProperty,Nk=Object.prototype.propertyIsEnumerable,B4=(r,e,t)=>e in r?Ck(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,su=(r,e)=>{for(var t in e||(e={}))Ok.call(e,t)&&B4(r,t,e[t]);if(q4)for(var t of q4(e))Nk.call(e,t)&&B4(r,t,e[t]);return r},Jg=class extends Il{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,this.context=jU,this.storagePrefix=rs,this.storageVersion=kU,this.events=new Map,this.shouldPersist=!1,this.init=()=>L(this,null,function*(){if(!Nf())try{let n={eventId:w1(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:yield this.core.crypto.getClientId(),user_agent:v1(this.core.relayer.protocol,this.core.relayer.version,Mg)}}};yield this.sendEvent([n])}catch(n){this.logger.warn(n)}}),this.createEvent=n=>{let{event:a="ERROR",type:c="",properties:{topic:u,trace:p}}=n,g=w1(),m=this.core.projectId||"",w=Date.now(),R=su({eventId:g,timestamp:w,props:{event:a,type:c,properties:{topic:u,trace:p}},bundleId:m,domain:this.getAppDomain()},this.setMethods(g));return this.telemetryEnabled&&(this.events.set(g,R),this.shouldPersist=!0),R},this.getEvent=n=>{let{eventId:a,topic:c}=n;if(a)return this.events.get(a);let u=Array.from(this.events.values()).find(p=>p.props.properties.topic===c);if(u)return su(su({},u),this.setMethods(u.eventId))},this.deleteEvent=n=>{let{eventId:a}=n;this.events.delete(a),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(Za.pulse,()=>L(this,null,function*(){this.shouldPersist&&(yield this.persist()),this.events.forEach(n=>{(0,Ie.fromMiliseconds)(Date.now())-(0,Ie.fromMiliseconds)(n.timestamp)>HU&&(this.events.delete(n.eventId),this.shouldPersist=!0)})}))},this.setMethods=n=>({addTrace:a=>this.addTrace(n,a),setError:a=>this.setError(n,a)}),this.addTrace=(n,a)=>{let c=this.events.get(n);c&&(c.props.properties.trace.push(a),this.events.set(n,c),this.shouldPersist=!0)},this.setError=(n,a)=>{let c=this.events.get(n);c&&(c.props.type=a,c.timestamp=Date.now(),this.events.set(n,c),this.shouldPersist=!0)},this.persist=()=>L(this,null,function*(){yield this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),this.restore=()=>L(this,null,function*(){try{let n=(yield this.core.storage.getItem(this.storageKey))||[];if(!n.length)return;n.forEach(a=>{this.events.set(a.eventId,su(su({},a),this.setMethods(a.eventId)))})}catch(n){this.logger.warn(n)}}),this.submit=()=>L(this,null,function*(){if(!this.telemetryEnabled||this.events.size===0)return;let n=[];for(let[a,c]of this.events)c.props.type&&n.push(c);if(n.length!==0)try{if((yield this.sendEvent(n)).ok)for(let a of n)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}}),this.sendEvent=n=>L(this,null,function*(){let a=this.getAppDomain()?"":"&sp=desktop";return yield fetch(`${KU}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Mg}${a}`,{method:"POST",body:JSON.stringify(n)})}),this.getAppDomain=()=>Zh().url,this.logger=Cr(t,this.context),this.telemetryEnabled=i,i?this.restore().then(()=>L(this,null,function*(){yield this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}},Tk=Object.defineProperty,F4=Object.getOwnPropertySymbols,Lk=Object.prototype.hasOwnProperty,qk=Object.prototype.propertyIsEnumerable,U4=(r,e,t)=>e in r?Tk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,z4=(r,e)=>{for(var t in e||(e={}))Lk.call(e,t)&&U4(r,t,e[t]);if(F4)for(var t of F4(e))qk.call(e,t)&&U4(r,t,e[t]);return r},Wg=class r extends vl{constructor(e){var t;super(e),this.protocol=j4,this.version=H4,this.name=Yg,this.events=new js.EventEmitter,this.initialized=!1,this.on=(c,u)=>this.events.on(c,u),this.once=(c,u)=>this.events.once(c,u),this.off=(c,u)=>this.events.off(c,u),this.removeListener=(c,u)=>this.events.removeListener(c,u),this.dispatchEnvelope=({topic:c,message:u,sessionExists:p})=>{if(!c||!u)return;let g={topic:c,message:u,publishedAt:Date.now(),transportType:jt.link_mode};this.relayer.onLinkMessageEvent(g,{sessionExists:p})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||K4,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let i=ro({level:typeof e?.logger=="string"&&e.logger?e.logger:uU.logger}),{logger:n,chunkLoggerController:a}=p8({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=a,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=()=>L(this,null,function*(){var c,u;(c=this.logChunkController)!=null&&c.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:yield this.crypto.getClientId()}))})),this.logger=Cr(n,this.name),this.heartbeat=new al,this.crypto=new Bg(this,this.logger,e?.keychain),this.history=new Kg(this,this.logger),this.expirer=new Vg(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new fl(z4(z4({},hU),e?.storageOptions)),this.relayer=new jg({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Hg(this,this.logger),this.verify=new Gg(this,this.logger,this.storage),this.echoClient=new $g(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Jg(this,this.logger,e?.telemetryEnabled)}static init(e){return L(this,null,function*(){let t=new r(e);yield t.initialize();let i=yield t.crypto.getClientId();return yield t.storage.setItem(SU,i),t})}get context(){return jr(this.logger)}start(){return L(this,null,function*(){this.initialized||(yield this.initialize())})}getLogsBlob(){return L(this,null,function*(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:yield this.crypto.getClientId()})})}addLinkModeSupportedApp(e){return L(this,null,function*(){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),yield this.storage.setItem(E4,this.linkModeSupportedApps))})}initialize(){return L(this,null,function*(){this.logger.trace("Initialized");try{yield this.crypto.init(),yield this.history.init(),yield this.expirer.init(),yield this.relayer.init(),yield this.heartbeat.init(),yield this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=(yield this.storage.getItem(E4))||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}})}},i_=Wg;var td=wt(ws()),tt=wt(Mo());var o_="wc",c_=2,f_="client",cv=`${o_}@${c_}:${f_}:`,Xg={name:f_,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"};var n_="WALLETCONNECT_DEEPLINK_CHOICE";var Bk="proposal";var fv="Proposal expired",Fk="session",Ic=tt.SEVEN_DAYS,Uk="engine",xr={wc_sessionPropose:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1104},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1106},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:tt.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1112},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:tt.ONE_DAY,prompt:!1,tag:1114},res:{ttl:tt.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:tt.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:tt.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:tt.FIVE_MINUTES,prompt:!1,tag:1119}}},Zg={min:tt.FIVE_MINUTES,max:tt.SEVEN_DAYS},ns={idle:"IDLE",active:"ACTIVE"},zk="request",kk=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],jk="wc";var Hk="auth",Kk="authKeys",Vk="pairingTopics",Gk="requests",rd=`${jk}@${1.5}:${Hk}:`,Zl=`${rd}:PUB_KEY`,$k=Object.defineProperty,Jk=Object.defineProperties,Wk=Object.getOwnPropertyDescriptors,s_=Object.getOwnPropertySymbols,Yk=Object.prototype.hasOwnProperty,Qk=Object.prototype.propertyIsEnumerable,a_=(r,e,t)=>e in r?$k(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,or=(r,e)=>{for(var t in e||(e={}))Yk.call(e,t)&&a_(r,t,e[t]);if(s_)for(var t of s_(e))Qk.call(e,t)&&a_(r,t,e[t]);return r},yn=(r,e)=>Jk(r,Wk(e)),ev=class extends Dl{constructor(e){super(e),this.name=Uk,this.events=new td.default,this.initialized=!1,this.requestQueue={state:ns.idle,queue:[]},this.sessionRequestQueue={state:ns.idle,queue:[]},this.requestQueueDelay=tt.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=()=>L(this,null,function*(){this.initialized||(yield this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),yield this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(xr)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,tt.toMiliseconds)(this.requestQueueDelay)))}),this.connect=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();let i=yn(or({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});yield this.isValidConnect(i);let{pairingTopic:n,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:u,relays:p}=i,g=n,m,w=!1;try{g&&(w=this.client.core.pairing.pairings.get(g).active)}catch(K){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),K}if(!g||!w){let{topic:K,uri:X}=yield this.client.core.pairing.create();g=K,m=X}if(!g){let{message:K}=ge("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(K)}let R=yield this.client.core.crypto.generateKeyPair(),I=xr.wc_sessionPropose.req.ttl||tt.FIVE_MINUTES,O=dr(I),B=or({requiredNamespaces:a,optionalNamespaces:c,relays:p??[{protocol:Qg}],proposer:{publicKey:R,metadata:this.client.metadata},expiryTimestamp:O,pairingTopic:g},u&&{sessionProperties:u}),{reject:F,resolve:z,done:Y}=Bs(I,fv);this.events.once(We("session_connect"),te=>L(this,[te],function*({error:K,session:X}){if(K)F(K);else if(X){X.self.publicKey=R;let k=yn(or({},X),{pairingTopic:B.pairingTopic,requiredNamespaces:B.requiredNamespaces,optionalNamespaces:B.optionalNamespaces,transportType:jt.relay});yield this.client.session.set(X.topic,k),yield this.setExpiry(X.topic,X.expiry),g&&(yield this.client.core.pairing.updateMetadata({topic:g,metadata:X.peer.metadata})),this.cleanupDuplicatePairings(k),z(k)}}));let $=yield this.sendRequest({topic:g,method:"wc_sessionPropose",params:B,throwOnFailedPublish:!0});return yield this.setProposal($,or({id:$},B)),{uri:m,approval:Y}}),this.pair=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{return yield this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}}),this.approve=t=>L(this,null,function*(){var i,n,a;let c=this.client.core.eventClient.createEvent({properties:{topic:(i=t?.id)==null?void 0:i.toString(),trace:[Xi.session_approve_started]}});try{this.isInitialized(),yield this.confirmOnlineStateOrThrow()}catch(U){throw c.setError(Ea.no_internet_connection),U}try{yield this.isValidProposalId(t?.id)}catch(U){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),c.setError(Ea.proposal_not_found),U}try{yield this.isValidApprove(t)}catch(U){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Ea.session_approve_namespace_validation_failure),U}let{id:u,relayProtocol:p,namespaces:g,sessionProperties:m,sessionConfig:w}=t,R=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:c.eventId});let{pairingTopic:I,proposer:O,requiredNamespaces:B,optionalNamespaces:F}=R,z=(n=this.client.core.eventClient)==null?void 0:n.getEvent({topic:I});z||(z=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:Xi.session_approve_started,properties:{topic:I,trace:[Xi.session_approve_started,Xi.session_namespaces_validation_success]}}));let Y=yield this.client.core.crypto.generateKeyPair(),$=O.publicKey,K=yield this.client.core.crypto.generateSharedKey(Y,$),X=or(or({relay:{protocol:p??"irn"},namespaces:g,controller:{publicKey:Y,metadata:this.client.metadata},expiry:dr(Ic)},m&&{sessionProperties:m}),w&&{sessionConfig:w}),te=jt.relay;z.addTrace(Xi.subscribing_session_topic);try{yield this.client.core.relayer.subscribe(K,{transportType:te})}catch(U){throw z.setError(Ea.subscribe_session_topic_failure),U}z.addTrace(Xi.subscribe_session_topic_success);let k=yn(or({},X),{topic:K,requiredNamespaces:B,optionalNamespaces:F,pairingTopic:I,acknowledged:!1,self:X.controller,peer:{publicKey:O.publicKey,metadata:O.metadata},controller:Y,transportType:jt.relay});yield this.client.session.set(K,k),z.addTrace(Xi.store_session);try{z.addTrace(Xi.publishing_session_settle),yield this.sendRequest({topic:K,method:"wc_sessionSettle",params:X,throwOnFailedPublish:!0}).catch(U=>{throw z?.setError(Ea.session_settle_publish_failure),U}),z.addTrace(Xi.session_settle_publish_success),z.addTrace(Xi.publishing_session_approve),yield this.sendResult({id:u,topic:I,result:{relay:{protocol:p??"irn"},responderPublicKey:Y},throwOnFailedPublish:!0}).catch(U=>{throw z?.setError(Ea.session_approve_publish_failure),U}),z.addTrace(Xi.session_approve_publish_success)}catch(U){throw this.client.logger.error(U),this.client.session.delete(K,ot("USER_DISCONNECTED")),yield this.client.core.relayer.unsubscribe(K),U}return this.client.core.eventClient.deleteEvent({eventId:z.eventId}),yield this.client.core.pairing.updateMetadata({topic:I,metadata:O.metadata}),yield this.client.proposal.delete(u,ot("USER_DISCONNECTED")),yield this.client.core.pairing.activate({topic:I}),yield this.setExpiry(K,dr(Ic)),{topic:K,acknowledged:()=>Promise.resolve(this.client.session.get(K))}}),this.reject=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidReject(t)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}let{id:i,reason:n}=t,a;try{a=this.client.proposal.get(i).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),c}a&&(yield this.sendError({id:i,topic:a,error:n,rpcOpts:xr.wc_sessionPropose.reject}),yield this.client.proposal.delete(i,ot("USER_DISCONNECTED")))}),this.update=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidUpdate(t)}catch(w){throw this.client.logger.error("update() -> isValidUpdate() failed"),w}let{topic:i,namespaces:n}=t,{done:a,resolve:c,reject:u}=Bs(),p=Xn(),g=vn().toString(),m=this.client.session.get(i).namespaces;return this.events.once(We("session_update",p),({error:w})=>{w?u(w):c()}),yield this.client.session.update(i,{namespaces:n}),yield this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:p,relayRpcId:g}).catch(w=>{this.client.logger.error(w),this.client.session.update(i,{namespaces:m}),u(w)}),{acknowledged:a}}),this.extend=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidExtend(t)}catch(p){throw this.client.logger.error("extend() -> isValidExtend() failed"),p}let{topic:i}=t,n=Xn(),{done:a,resolve:c,reject:u}=Bs();return this.events.once(We("session_extend",n),({error:p})=>{p?u(p):c()}),yield this.setExpiry(i,dr(Ic)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(p=>{u(p)}),{acknowledged:a}}),this.request=t=>L(this,null,function*(){this.isInitialized();try{yield this.isValidRequest(t)}catch(O){throw this.client.logger.error("request() -> isValidRequest() failed"),O}let{chainId:i,request:n,topic:a,expiry:c=xr.wc_sessionRequest.req.ttl}=t,u=this.client.session.get(a);u?.transportType===jt.relay&&(yield this.confirmOnlineStateOrThrow());let p=Xn(),g=vn().toString(),{done:m,resolve:w,reject:R}=Bs(c,"Request expired. Please try again.");this.events.once(We("session_request",p),({error:O,result:B})=>{O?R(O):w(B)});let I=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);return I?(yield this.sendRequest({clientRpcId:p,relayRpcId:g,topic:a,method:"wc_sessionRequest",params:{request:yn(or({},n),{expiryTimestamp:dr(c)}),chainId:i},expiry:c,throwOnFailedPublish:!0,appLink:I}).catch(O=>R(O)),this.client.events.emit("session_request_sent",{topic:a,request:n,chainId:i,id:p}),yield m()):yield Promise.all([new Promise(O=>L(this,null,function*(){yield this.sendRequest({clientRpcId:p,relayRpcId:g,topic:a,method:"wc_sessionRequest",params:{request:yn(or({},n),{expiryTimestamp:dr(c)}),chainId:i},expiry:c,throwOnFailedPublish:!0}).catch(B=>R(B)),this.client.events.emit("session_request_sent",{topic:a,request:n,chainId:i,id:p}),O()})),new Promise(O=>L(this,null,function*(){var B;if(!((B=u.sessionConfig)!=null&&B.disableDeepLink)){let F=yield Pw(this.client.core.storage,n_);yield Rw({id:p,topic:a,wcDeepLink:F})}O()})),m()]).then(O=>O[2])}),this.respond=t=>L(this,null,function*(){this.isInitialized(),yield this.isValidRespond(t);let{topic:i,response:n}=t,{id:a}=n,c=this.client.session.get(i);c.transportType===jt.relay&&(yield this.confirmOnlineStateOrThrow());let u=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);Pi(n)?yield this.sendResult({id:a,topic:i,result:n.result,throwOnFailedPublish:!0,appLink:u}):Hr(n)&&(yield this.sendError({id:a,topic:i,error:n.error,appLink:u})),this.cleanupAfterResponse(t)}),this.ping=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow();try{yield this.isValidPing(t)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}let{topic:i}=t;if(this.client.session.keys.includes(i)){let n=Xn(),a=vn().toString(),{done:c,resolve:u,reject:p}=Bs();this.events.once(We("session_ping",n),({error:g})=>{g?p(g):u()}),yield Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:a}),c()])}else this.client.core.pairing.pairings.keys.includes(i)&&(yield this.client.core.pairing.ping({topic:i}))}),this.emit=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow(),yield this.isValidEmit(t);let{topic:i,event:n,chainId:a}=t,c=vn().toString();yield this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:a},throwOnFailedPublish:!0,relayRpcId:c})}),this.disconnect=t=>L(this,null,function*(){this.isInitialized(),yield this.confirmOnlineStateOrThrow(),yield this.isValidDisconnect(t);let{topic:i}=t;if(this.client.session.keys.includes(i))yield this.sendRequest({topic:i,method:"wc_sessionDelete",params:ot("USER_DISCONNECTED"),throwOnFailedPublish:!0}),yield this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))yield this.client.core.pairing.disconnect({topic:i});else{let{message:n}=ge("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}}),this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>P5(i,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=(t,i)=>L(this,null,function*(){var n;this.isInitialized(),this.isValidAuthenticate(t);let a=i&&this.client.core.linkModeSupportedApps.includes(i)&&((n=this.client.metadata.redirect)==null?void 0:n.linkMode),c=a?jt.link_mode:jt.relay;c===jt.relay&&(yield this.confirmOnlineStateOrThrow());let{chains:u,statement:p="",uri:g,domain:m,nonce:w,type:R,exp:I,nbf:O,methods:B=[],expiry:F}=t,z=[...t.resources||[]],{topic:Y,uri:$}=yield this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:Y,uri:$}});let K=yield this.client.core.crypto.generateKeyPair(),X=lc(K);if(yield Promise.all([this.client.auth.authKeys.set(Zl,{responseTopic:X,publicKey:K}),this.client.auth.pairingTopics.set(X,{topic:X,pairingTopic:Y})]),yield this.client.core.relayer.subscribe(X,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${Y}`),B.length>0){let{namespace:A}=Ja(u[0]),v=v5(A,"request",B);qf(z)&&(v=b5(v,z.pop())),z.push(v)}let te=F&&F>xr.wc_sessionAuthenticate.req.ttl?F:xr.wc_sessionAuthenticate.req.ttl,k={authPayload:{type:R??"caip122",chains:u,statement:p,aud:g,domain:m,version:"1",nonce:w,iat:new Date().toISOString(),exp:I,nbf:O,resources:z},requester:{publicKey:K,metadata:this.client.metadata},expiryTimestamp:dr(te)},U={eip155:{chains:u,methods:[...new Set(["personal_sign",...B])],events:["chainChanged","accountsChanged"]}},ae={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:Y,proposer:{publicKey:K,metadata:this.client.metadata},expiryTimestamp:dr(xr.wc_sessionPropose.req.ttl)},{done:P,resolve:d,reject:_}=Bs(te,"Request expired"),f=x=>L(this,[x],function*({error:A,session:v}){if(this.events.off(We("session_request",b),l),A)_(A);else if(v){v.self.publicKey=K,yield this.client.session.set(v.topic,v),yield this.setExpiry(v.topic,v.expiry),Y&&(yield this.client.core.pairing.updateMetadata({topic:Y,metadata:v.peer.metadata}));let y=this.client.session.get(v.topic);yield this.deleteProposal(S),d({session:y})}}),l=A=>L(this,null,function*(){var v,x,y;if(yield this.deletePendingAuthRequest(b,{message:"fulfilled",code:0}),A.error){let J=ot("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return A.error.code===J.code?void 0:(this.events.off(We("session_connect"),f),_(A.error.message))}yield this.deleteProposal(S),this.events.off(We("session_connect"),f);let{cacaos:N,responder:Z}=A.result,ee=[],D=[];for(let J of N){(yield D1({cacao:J,projectId:this.client.core.projectId}))||(this.client.logger.error(J,"Signature verification failed"),_(ot("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:ie}=J,fe=qf(ie.resources),se=[M1(ie.iss)],ce=Lf(ie.iss);if(fe){let pe=P1(fe),ne=C1(fe);ee.push(...pe),se.push(...ne)}for(let pe of se)D.push(`${pe}:${ce}`)}let V=yield this.client.core.crypto.generateSharedKey(K,Z.publicKey),G;ee.length>0&&(G={topic:V,acknowledged:!0,self:{publicKey:K,metadata:this.client.metadata},peer:Z,controller:Z.publicKey,expiry:dr(Ic),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:Y,namespaces:F1([...new Set(ee)],[...new Set(D)]),transportType:c},yield this.client.core.relayer.subscribe(V,{transportType:c}),yield this.client.session.set(V,G),Y&&(yield this.client.core.pairing.updateMetadata({topic:Y,metadata:Z.metadata})),G=this.client.session.get(V)),(v=this.client.metadata.redirect)!=null&&v.linkMode&&(x=Z.metadata.redirect)!=null&&x.linkMode&&(y=Z.metadata.redirect)!=null&&y.universal&&i&&(this.client.core.addLinkModeSupportedApp(Z.metadata.redirect.universal),this.client.session.update(V,{transportType:jt.link_mode})),d({auths:N,session:G})}),b=Xn(),S=Xn();this.events.once(We("session_connect"),f),this.events.once(We("session_request",b),l);let M;try{if(a){let A=Ri("wc_sessionAuthenticate",k,b);this.client.core.history.set(Y,A);let v=yield this.client.core.crypto.encode("",A,{type:hc,encoding:uc});M=Ff(i,Y,v)}else yield Promise.all([this.sendRequest({topic:Y,method:"wc_sessionAuthenticate",params:k,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:b}),this.sendRequest({topic:Y,method:"wc_sessionPropose",params:ae,expiry:xr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S})])}catch(A){throw this.events.off(We("session_connect"),f),this.events.off(We("session_request",b),l),A}return yield this.setProposal(S,or({id:S},ae)),yield this.setAuthRequest(b,{request:yn(or({},k),{verifyContext:{}}),pairingTopic:Y,transportType:c}),{uri:M??$,response:P}}),this.approveSessionAuthenticate=t=>L(this,null,function*(){let{id:i,auths:n}=t,a=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[xa.authenticated_session_approve_started]}});try{this.isInitialized()}catch(F){throw a.setError(Ac.no_internet_connection),F}let c=this.getPendingAuthRequest(i);if(!c)throw a.setError(Ac.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);let u=c.transportType||jt.relay;u===jt.relay&&(yield this.confirmOnlineStateOrThrow());let p=c.requester.publicKey,g=yield this.client.core.crypto.generateKeyPair(),m=lc(p),w={type:dn,receiverPublicKey:p,senderPublicKey:g},R=[],I=[];for(let F of n){if(!(yield D1({cacao:F,projectId:this.client.core.projectId}))){a.setError(Ac.invalid_cacao);let X=ot("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw yield this.sendError({id:i,topic:m,error:X,encodeOpts:w}),new Error(X.message)}a.addTrace(xa.cacaos_verified);let{p:z}=F,Y=qf(z.resources),$=[M1(z.iss)],K=Lf(z.iss);if(Y){let X=P1(Y),te=C1(Y);R.push(...X),$.push(...te)}for(let X of $)I.push(`${X}:${K}`)}let O=yield this.client.core.crypto.generateSharedKey(g,p);a.addTrace(xa.create_authenticated_session_topic);let B;if(R?.length>0){B={topic:O,acknowledged:!0,self:{publicKey:g,metadata:this.client.metadata},peer:{publicKey:p,metadata:c.requester.metadata},controller:p,expiry:dr(Ic),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:F1([...new Set(R)],[...new Set(I)]),transportType:u},a.addTrace(xa.subscribing_authenticated_session_topic);try{yield this.client.core.relayer.subscribe(O,{transportType:u})}catch(F){throw a.setError(Ac.subscribe_authenticated_session_topic_failure),F}a.addTrace(xa.subscribe_authenticated_session_topic_success),yield this.client.session.set(O,B),a.addTrace(xa.store_authenticated_session),yield this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}a.addTrace(xa.publishing_authenticated_session_approve);try{yield this.sendResult({topic:m,id:i,result:{cacaos:n,responder:{publicKey:g,metadata:this.client.metadata}},encodeOpts:w,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,u)})}catch(F){throw a.setError(Ac.authenticated_session_approve_publish_failure),F}return yield this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),yield this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:B}}),this.rejectSessionAuthenticate=t=>L(this,null,function*(){this.isInitialized();let{id:i,reason:n}=t,a=this.getPendingAuthRequest(i);if(!a)throw new Error(`Could not find pending auth request with id ${i}`);a.transportType===jt.relay&&(yield this.confirmOnlineStateOrThrow());let c=a.requester.publicKey,u=yield this.client.core.crypto.generateKeyPair(),p=lc(c),g={type:dn,receiverPublicKey:c,senderPublicKey:u};yield this.sendError({id:i,topic:p,error:n,encodeOpts:g,rpcOpts:xr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),yield this.client.auth.requests.delete(i,{message:"rejected",code:0}),yield this.client.proposal.delete(i,ot("USER_DISCONNECTED"))}),this.formatAuthMessage=t=>{this.isInitialized();let{request:i,iss:n}=t;return R1(i,n)},this.processRelayMessageCache=()=>{setTimeout(()=>L(this,null,function*(){if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{let t=this.relayMessageCache.shift();t&&(yield this.onRelayMessage(t))}catch(t){this.client.logger.error(t)}}),50)},this.cleanupDuplicatePairings=t=>L(this,null,function*(){if(t.pairingTopic)try{let i=this.client.core.pairing.pairings.get(t.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(a=>{var c,u;return((c=a.peerMetadata)==null?void 0:c.url)&&((u=a.peerMetadata)==null?void 0:u.url)===t.peer.metadata.url&&a.topic&&a.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),yield Promise.all(n.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}}),this.deleteSession=t=>L(this,null,function*(){var i;let{topic:n,expirerHasDeleted:a=!1,emitEvent:c=!0,id:u=0}=t,{self:p}=this.client.session.get(n);yield this.client.core.relayer.unsubscribe(n),yield this.client.session.delete(n,ot("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(p.publicKey)&&(yield this.client.core.crypto.deleteKeyPair(p.publicKey)),this.client.core.crypto.keychain.has(n)&&(yield this.client.core.crypto.deleteSymKey(n)),a||this.client.core.expirer.del(n),this.client.core.storage.removeItem(n_).catch(g=>this.client.logger.warn(g)),this.getPendingSessionRequests().forEach(g=>{g.topic===n&&this.deletePendingSessionRequest(g.id,ot("USER_DISCONNECTED"))}),n===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=ns.idle),c&&this.client.events.emit("session_delete",{id:u,topic:n})}),this.deleteProposal=(t,i)=>L(this,null,function*(){if(i)try{let n=this.client.proposal.get(t);this.client.core.eventClient.getEvent({topic:n.pairingTopic})?.setError(Ea.proposal_expired)}catch{}yield Promise.all([this.client.proposal.delete(t,ot("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),this.deletePendingSessionRequest=(t,i,n=!1)=>L(this,null,function*(){yield Promise.all([this.client.pendingRequest.delete(t,i),n?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==t),n&&(this.sessionRequestQueue.state=ns.idle,this.client.events.emit("session_request_expire",{id:t}))}),this.deletePendingAuthRequest=(t,i,n=!1)=>L(this,null,function*(){yield Promise.all([this.client.auth.requests.delete(t,i),n?Promise.resolve():this.client.core.expirer.del(t)])}),this.setExpiry=(t,i)=>L(this,null,function*(){this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),yield this.client.session.update(t,{expiry:i}))}),this.setProposal=(t,i)=>L(this,null,function*(){this.client.core.expirer.set(t,dr(xr.wc_sessionPropose.req.ttl)),yield this.client.proposal.set(t,i)}),this.setAuthRequest=(t,i)=>L(this,null,function*(){let{request:n,pairingTopic:a,transportType:c=jt.relay}=i;this.client.core.expirer.set(t,n.expiryTimestamp),yield this.client.auth.requests.set(t,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:t,pairingTopic:a,verifyContext:n.verifyContext,transportType:c})}),this.setPendingSessionRequest=t=>L(this,null,function*(){let{id:i,topic:n,params:a,verifyContext:c}=t,u=a.request.expiryTimestamp||dr(xr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,u),yield this.client.pendingRequest.set(i,{id:i,topic:n,params:a,verifyContext:c})}),this.sendRequest=t=>L(this,null,function*(){let{topic:i,method:n,params:a,expiry:c,relayRpcId:u,clientRpcId:p,throwOnFailedPublish:g,appLink:m}=t,w=Ri(n,a,p),R,I=!!m;try{let F=I?uc:Yn;R=yield this.client.core.crypto.encode(i,w,{encoding:F})}catch(F){throw yield this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),F}let O;if(kk.includes(n)){let F=pn(JSON.stringify(w)),z=pn(R);O=yield this.client.core.verify.register({id:z,decryptedId:F})}let B=xr[n].req;if(B.attestation=O,c&&(B.ttl=c),u&&(B.id=u),this.client.core.history.set(i,w),I){let F=Ff(m,i,R);yield global.Linking.openURL(F,this.client.name)}else{let F=xr[n].req;c&&(F.ttl=c),u&&(F.id=u),g?(F.internal=yn(or({},F.internal),{throwOnFailedPublish:!0}),yield this.client.core.relayer.publish(i,R,F)):this.client.core.relayer.publish(i,R,F).catch(z=>this.client.logger.error(z))}return w.id}),this.sendResult=t=>L(this,null,function*(){let{id:i,topic:n,result:a,throwOnFailedPublish:c,encodeOpts:u,appLink:p}=t,g=ba(i,a),m,w=p&&typeof(global==null?void 0:global.Linking)<"u";try{let I=w?uc:Yn;m=yield this.client.core.crypto.encode(n,g,yn(or({},u||{}),{encoding:I}))}catch(I){throw yield this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),I}let R;try{R=yield this.client.core.history.get(n,i)}catch(I){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),I}if(w){let I=Ff(p,n,m);yield global.Linking.openURL(I,this.client.name)}else{let I=xr[R.request.method].res;c?(I.internal=yn(or({},I.internal),{throwOnFailedPublish:!0}),yield this.client.core.relayer.publish(n,m,I)):this.client.core.relayer.publish(n,m,I).catch(O=>this.client.logger.error(O))}yield this.client.core.history.resolve(g)}),this.sendError=t=>L(this,null,function*(){let{id:i,topic:n,error:a,encodeOpts:c,rpcOpts:u,appLink:p}=t,g=Us(i,a),m,w=p&&typeof(global==null?void 0:global.Linking)<"u";try{let I=w?uc:Yn;m=yield this.client.core.crypto.encode(n,g,yn(or({},c||{}),{encoding:I}))}catch(I){throw yield this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),I}let R;try{R=yield this.client.core.history.get(n,i)}catch(I){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),I}if(w){let I=Ff(p,n,m);yield global.Linking.openURL(I,this.client.name)}else{let I=u||xr[R.request.method].res;this.client.core.relayer.publish(n,m,I)}yield this.client.core.history.resolve(g)}),this.cleanup=()=>L(this,null,function*(){let t=[],i=[];this.client.session.getAll().forEach(n=>{let a=!1;Jn(n.expiry)&&(a=!0),this.client.core.crypto.keychain.has(n.topic)||(a=!0),a&&t.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{Jn(n.expiryTimestamp)&&i.push(n.id)}),yield Promise.all([...t.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])}),this.onRelayEventRequest=t=>L(this,null,function*(){this.requestQueue.queue.push(t),yield this.processRequestsQueue()}),this.processRequestsQueue=()=>L(this,null,function*(){if(this.requestQueue.state===ns.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ns.active;let t=this.requestQueue.queue.shift();if(t)try{yield this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=ns.idle}),this.processRequest=t=>L(this,null,function*(){let{topic:i,payload:n,attestation:a,transportType:c,encryptedId:u}=t,p=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:p}))switch(p){case"wc_sessionPropose":return yield this.onSessionProposeRequest({topic:i,payload:n,attestation:a,encryptedId:u});case"wc_sessionSettle":return yield this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return yield this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return yield this.onSessionExtendRequest(i,n);case"wc_sessionPing":return yield this.onSessionPingRequest(i,n);case"wc_sessionDelete":return yield this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return yield this.onSessionRequest({topic:i,payload:n,attestation:a,encryptedId:u,transportType:c});case"wc_sessionEvent":return yield this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return yield this.onSessionAuthenticateRequest({topic:i,payload:n,attestation:a,encryptedId:u,transportType:c});default:return this.client.logger.info(`Unsupported request method ${p}`)}}),this.onRelayEventResponse=t=>L(this,null,function*(){let{topic:i,payload:n,transportType:a}=t,c=(yield this.client.core.history.get(i,n.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n,a);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),this.onRelayEventUnknownPayload=t=>{let{topic:i}=t,{message:n}=ge("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=t=>{let{topic:i,requestMethod:n}=t,a=this.expectedPairingMethodMap.get(i);return!a||a.includes(n)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=t=>L(this,null,function*(){let{topic:i,payload:n,attestation:a,encryptedId:c}=t,{params:u,id:p}=n;try{let g=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(or({},n.params));let m=u.expiryTimestamp||dr(xr.wc_sessionPropose.req.ttl),w=or({id:p,pairingTopic:i,expiryTimestamp:m},u);yield this.setProposal(p,w);let R=yield this.getVerifyContext({attestationId:a,hash:pn(JSON.stringify(n)),encryptedId:c,metadata:w.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),g?.setError(ts.proposal_listener_not_found)),g?.addTrace(mn.emit_session_proposal),this.client.events.emit("session_proposal",{id:p,params:w,verifyContext:R})}catch(g){yield this.sendError({id:p,topic:i,error:g,rpcOpts:xr.wc_sessionPropose.autoReject}),this.client.logger.error(g)}}),this.onSessionProposeResponse=(t,i,n)=>L(this,null,function*(){let{id:a}=i;if(Pi(i)){let{result:c}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});let u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});let p=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:p});let g=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:g});let m=yield this.client.core.crypto.generateSharedKey(p,g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:m});let w=yield this.client.core.relayer.subscribe(m,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:w}),yield this.client.core.pairing.activate({topic:t})}else if(Hr(i)){yield this.client.proposal.delete(a,ot("USER_DISCONNECTED"));let c=We("session_connect");if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(We("session_connect"),{error:i.error})}}),this.onSessionSettleRequest=(t,i)=>L(this,null,function*(){let{id:n,params:a}=i;try{this.isValidSessionSettleRequest(a);let{relay:c,controller:u,expiry:p,namespaces:g,sessionProperties:m,sessionConfig:w}=i.params,R=yn(or(or({topic:t,relay:c,expiry:p,namespaces:g,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:u.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},m&&{sessionProperties:m}),w&&{sessionConfig:w}),{transportType:jt.relay}),I=We("session_connect");if(this.events.listenerCount(I)===0)throw new Error(`emitting ${I} without any listeners 997`);this.events.emit(We("session_connect"),{session:R}),yield this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(c){yield this.sendError({id:n,topic:t,error:c}),this.client.logger.error(c)}}),this.onSessionSettleResponse=(t,i)=>L(this,null,function*(){let{id:n}=i;Pi(i)?(yield this.client.session.update(t,{acknowledged:!0}),this.events.emit(We("session_approve",n),{})):Hr(i)&&(yield this.client.session.delete(t,ot("USER_DISCONNECTED")),this.events.emit(We("session_approve",n),{error:i.error}))}),this.onSessionUpdateRequest=(t,i)=>L(this,null,function*(){let{params:n,id:a}=i;try{let c=`${t}_session_update`,u=da.get(c);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.info(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:t,error:ot("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(or({topic:t},n));try{da.set(c,a),yield this.client.session.update(t,{namespaces:n.namespaces}),yield this.sendResult({id:a,topic:t,result:!0,throwOnFailedPublish:!0})}catch(p){throw da.delete(c),p}this.client.events.emit("session_update",{id:a,topic:t,params:n})}catch(c){yield this.sendError({id:a,topic:t,error:c}),this.client.logger.error(c)}}),this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{let{id:n}=i,a=We("session_update",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Pi(i)?this.events.emit(We("session_update",n),{}):Hr(i)&&this.events.emit(We("session_update",n),{error:i.error})},this.onSessionExtendRequest=(t,i)=>L(this,null,function*(){let{id:n}=i;try{this.isValidExtend({topic:t}),yield this.setExpiry(t,dr(Ic)),yield this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:t})}catch(a){yield this.sendError({id:n,topic:t,error:a}),this.client.logger.error(a)}}),this.onSessionExtendResponse=(t,i)=>{let{id:n}=i,a=We("session_extend",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Pi(i)?this.events.emit(We("session_extend",n),{}):Hr(i)&&this.events.emit(We("session_extend",n),{error:i.error})},this.onSessionPingRequest=(t,i)=>L(this,null,function*(){let{id:n}=i;try{this.isValidPing({topic:t}),yield this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:t})}catch(a){yield this.sendError({id:n,topic:t,error:a}),this.client.logger.error(a)}}),this.onSessionPingResponse=(t,i)=>{let{id:n}=i,a=We("session_ping",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);setTimeout(()=>{Pi(i)?this.events.emit(We("session_ping",n),{}):Hr(i)&&this.events.emit(We("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=(t,i)=>L(this,null,function*(){let{id:n}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(Kr.publish,()=>L(this,null,function*(){a(yield this.deleteSession({topic:t,id:n}))}))}),this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:ot("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}}),this.onSessionRequest=t=>L(this,null,function*(){var i,n,a;let{topic:c,payload:u,attestation:p,encryptedId:g,transportType:m}=t,{id:w,params:R}=u;try{yield this.isValidRequest(or({topic:c},R));let I=this.client.session.get(c),O=yield this.getVerifyContext({attestationId:p,hash:pn(JSON.stringify(Ri("wc_sessionRequest",R,w))),encryptedId:g,metadata:I.peer.metadata,transportType:m}),B={id:w,topic:c,params:R,verifyContext:O};yield this.setPendingSessionRequest(B),m===jt.link_mode&&(i=I.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((n=I.peer.metadata.redirect)==null?void 0:n.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(B):(this.addSessionRequestToSessionRequestQueue(B),this.processSessionRequestQueue())}catch(I){yield this.sendError({id:w,topic:c,error:I}),this.client.logger.error(I)}}),this.onSessionRequestResponse=(t,i)=>{let{id:n}=i,a=We("session_request",n);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);Pi(i)?this.events.emit(We("session_request",n),{result:i.result}):Hr(i)&&this.events.emit(We("session_request",n),{error:i.error})},this.onSessionEventRequest=(t,i)=>L(this,null,function*(){let{id:n,params:a}=i;try{let c=`${t}_session_event_${a.event.name}`,u=da.get(c);if(u&&this.isRequestOutOfSync(u,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(or({topic:t},a)),this.client.events.emit("session_event",{id:n,topic:t,params:a}),da.set(c,n)}catch(c){yield this.sendError({id:n,topic:t,error:c}),this.client.logger.error(c)}}),this.onSessionAuthenticateResponse=(t,i)=>{let{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),Pi(i)?this.events.emit(We("session_request",n),{result:i.result}):Hr(i)&&this.events.emit(We("session_request",n),{error:i.error})},this.onSessionAuthenticateRequest=t=>L(this,null,function*(){var i;let{topic:n,payload:a,attestation:c,encryptedId:u,transportType:p}=t;try{let{requester:g,authPayload:m,expiryTimestamp:w}=a.params,R=yield this.getVerifyContext({attestationId:c,hash:pn(JSON.stringify(a)),encryptedId:u,metadata:g.metadata,transportType:p}),I={requester:g,pairingTopic:n,id:a.id,authPayload:m,verifyContext:R,expiryTimestamp:w};yield this.setAuthRequest(a.id,{request:I,pairingTopic:n,transportType:p}),p===jt.link_mode&&(i=g.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(g.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:a.params,id:a.id,verifyContext:R})}catch(g){this.client.logger.error(g);let m=a.params.requester.publicKey,w=yield this.client.core.crypto.generateKeyPair(),R=this.getAppLinkIfEnabled(a.params.requester.metadata,p),I={type:dn,receiverPublicKey:m,senderPublicKey:w};yield this.sendError({id:a.id,topic:n,error:g,encodeOpts:I,rpcOpts:xr.wc_sessionAuthenticate.autoReject,appLink:R})}}),this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ns.idle,this.processSessionRequestQueue()},(0,tt.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:i})=>{let n=this.client.core.history.pending;n.length>0&&n.filter(a=>a.topic===t&&a.request.method==="wc_sessionRequest").forEach(a=>{let c=a.request.id,u=We("session_request",c);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(We("session_request",a.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ns.active){this.client.logger.info("session request queue is already active.");return}let t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ns.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;let i=this.client.proposal.getAll().find(n=>n.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:Ri("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=t=>L(this,null,function*(){if(!kr(t)){let{message:p}=ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(p)}let{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:a,sessionProperties:c,relays:u}=t;if(Rr(i)||(yield this.isValidPairingTopic(i)),!B5(u,!0)){let{message:p}=ge("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(p)}!Rr(n)&&Xa(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!Rr(a)&&Xa(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),Rr(c)||this.validateSessionProps(c,"sessionProperties")}),this.validateNamespaces=(t,i)=>{let n=q5(t,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=t=>L(this,null,function*(){if(!kr(t))throw new Error(ge("MISSING_OR_INVALID",`approve() params: ${t}`).message);let{id:i,namespaces:n,relayProtocol:a,sessionProperties:c}=t;this.checkRecentlyDeleted(i),yield this.isValidProposalId(i);let u=this.client.proposal.get(i),p=sl(n,"approve()");if(p)throw new Error(p.message);let g=j1(u.requiredNamespaces,n,"approve()");if(g)throw new Error(g.message);if(!er(a,!0)){let{message:m}=ge("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(m)}Rr(c)||this.validateSessionProps(c,"sessionProperties")}),this.isValidReject=t=>L(this,null,function*(){if(!kr(t)){let{message:a}=ge("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(a)}let{id:i,reason:n}=t;if(this.checkRecentlyDeleted(i),yield this.isValidProposalId(i),!U5(n)){let{message:a}=ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(a)}}),this.isValidSessionSettleRequest=t=>{if(!kr(t)){let{message:g}=ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}let{relay:i,controller:n,namespaces:a,expiry:c}=t;if(!z1(i)){let{message:g}=ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}let u=T5(n,"onSessionSettleRequest()");if(u)throw new Error(u.message);let p=sl(a,"onSessionSettleRequest()");if(p)throw new Error(p.message);if(Jn(c)){let{message:g}=ge("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=t=>L(this,null,function*(){if(!kr(t)){let{message:p}=ge("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(p)}let{topic:i,namespaces:n}=t;this.checkRecentlyDeleted(i),yield this.isValidSessionTopic(i);let a=this.client.session.get(i),c=sl(n,"update()");if(c)throw new Error(c.message);let u=j1(a.requiredNamespaces,n,"update()");if(u)throw new Error(u.message)}),this.isValidExtend=t=>L(this,null,function*(){if(!kr(t)){let{message:n}=ge("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(n)}let{topic:i}=t;this.checkRecentlyDeleted(i),yield this.isValidSessionTopic(i)}),this.isValidRequest=t=>L(this,null,function*(){if(!kr(t)){let{message:p}=ge("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(p)}let{topic:i,request:n,chainId:a,expiry:c}=t;this.checkRecentlyDeleted(i),yield this.isValidSessionTopic(i);let{namespaces:u}=this.client.session.get(i);if(!k1(u,a)){let{message:p}=ge("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(p)}if(!z5(n)){let{message:p}=ge("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(p)}if(!H5(u,a,n.method)){let{message:p}=ge("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(p)}if(c&&!V5(c,Zg)){let{message:p}=ge("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Zg.min} and ${Zg.max}`);throw new Error(p)}}),this.isValidRespond=t=>L(this,null,function*(){var i;if(!kr(t)){let{message:c}=ge("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}let{topic:n,response:a}=t;try{yield this.isValidSessionTopic(n)}catch(c){throw(i=t?.response)!=null&&i.id&&this.cleanupAfterResponse(t),c}if(!k5(a)){let{message:c}=ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(c)}}),this.isValidPing=t=>L(this,null,function*(){if(!kr(t)){let{message:n}=ge("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(n)}let{topic:i}=t;yield this.isValidSessionOrPairingTopic(i)}),this.isValidEmit=t=>L(this,null,function*(){if(!kr(t)){let{message:u}=ge("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(u)}let{topic:i,event:n,chainId:a}=t;yield this.isValidSessionTopic(i);let{namespaces:c}=this.client.session.get(i);if(!k1(c,a)){let{message:u}=ge("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!j5(n)){let{message:u}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(u)}if(!K5(c,a,n.name)){let{message:u}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(u)}}),this.isValidDisconnect=t=>L(this,null,function*(){if(!kr(t)){let{message:n}=ge("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(n)}let{topic:i}=t;yield this.isValidSessionOrPairingTopic(i)}),this.isValidAuthenticate=t=>{let{chains:i,uri:n,domain:a,nonce:c}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!er(n,!1))throw new Error("uri is required parameter");if(!er(a,!1))throw new Error("domain is required parameter");if(!er(c,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(p=>Ja(p).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:u}=Ja(i[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=t=>L(this,null,function*(){let{attestationId:i,hash:n,encryptedId:a,metadata:c,transportType:u}=t,p={verified:{verifyUrl:c.verifyUrl||xc,validation:"UNKNOWN",origin:c.url||""}};try{if(u===jt.link_mode){let m=this.getAppLinkIfEnabled(c,u);return p.verified.validation=m&&new URL(m).origin===new URL(c.url).origin?"VALID":"INVALID",p}let g=yield this.client.core.verify.resolve({attestationId:i,hash:n,encryptedId:a,verifyUrl:c.verifyUrl});g&&(p.verified.origin=g.origin,p.verified.isScam=g.isScam,p.verified.validation=g.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(g){this.client.logger.warn(g)}return this.client.logger.debug(`Verify context: ${JSON.stringify(p)}`),p}),this.validateSessionProps=(t,i)=>{Object.values(t).forEach(n=>{if(!er(n,!1)){let{message:a}=ge("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(a)}})},this.getPendingAuthRequest=t=>{let i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0,a=this.recentlyDeletedLimit/2;for(let c of this.recentlyDeletedMap.keys()){if(n++>=a)break;this.recentlyDeletedMap.delete(c)}}},this.checkRecentlyDeleted=t=>{let i=this.recentlyDeletedMap.get(t);if(i){let{message:n}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(n)}},this.isLinkModeEnabled=(t,i)=>{var n,a,c,u,p,g,m,w,R;return!t||i!==jt.link_mode?!1:((a=(n=this.client.metadata)==null?void 0:n.redirect)==null?void 0:a.linkMode)===!0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==void 0&&((g=(p=this.client.metadata)==null?void 0:p.redirect)==null?void 0:g.universal)!==""&&((m=t?.redirect)==null?void 0:m.universal)!==void 0&&((w=t?.redirect)==null?void 0:w.universal)!==""&&((R=t?.redirect)==null?void 0:R.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(t,i)=>{var n;return this.isLinkModeEnabled(t,i)?(n=t?.redirect)==null?void 0:n.universal:void 0},this.handleLinkModeMessage=({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;let i=y1(t,"topic")||"",n=decodeURIComponent(y1(t,"wc_ev")||""),a=this.client.session.keys.includes(i);a&&this.client.session.update(i,{transportType:jt.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:n,sessionExists:a})},this.registerLinkModeListeners=()=>L(this,null,function*(){var t;if(Nf()||Wa()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){let i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);let n=yield i.getInitialURL();n&&setTimeout(()=>{this.handleLinkModeMessage({url:n})},50)}}})}isInitialized(){if(!this.initialized){let{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}confirmOnlineStateOrThrow(){return L(this,null,function*(){yield this.client.core.relayer.confirmOnlineStateOrThrow()})}registerRelayerEvents(){this.client.core.relayer.on(Kr.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}onRelayMessage(e){return L(this,null,function*(){let{topic:t,message:i,attestation:n,transportType:a}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(Zl)?this.client.auth.authKeys.get(Zl):{responseTopic:void 0,publicKey:void 0},u=yield this.client.core.crypto.decode(t,i,{receiverPublicKey:c,encoding:a===jt.link_mode?uc:Yn});try{yc(u)?(this.client.core.history.set(t,u),this.onRelayEventRequest({topic:t,payload:u,attestation:n,transportType:a,encryptedId:pn(i)})):ma(u)?(yield this.client.core.history.resolve(u),yield this.onRelayEventResponse({topic:t,payload:u,transportType:a}),this.client.core.history.delete(t,u.id)):this.onRelayEventUnknownPayload({topic:t,payload:u,transportType:a})}catch(p){this.client.logger.error(p)}})}registerExpirerEvents(){this.client.core.expirer.on(Ci.expired,e=>L(this,null,function*(){let{topic:t,id:i}=el(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return yield this.deletePendingSessionRequest(i,ge("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return yield this.deletePendingAuthRequest(i,ge("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(yield this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(yield this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))}))}registerPairingEvents(){this.client.core.pairing.events.on(_a.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(_a.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!er(e,!1)){let{message:t}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Jn(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=ge("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){return L(this,null,function*(){if(!er(e,!1)){let{message:t}=ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Jn(this.client.session.get(e).expiry)){yield this.deleteSession({topic:e});let{message:t}=ge("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=ge("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw yield this.deleteSession({topic:e}),new Error(t)}})}isValidSessionOrPairingTopic(e){return L(this,null,function*(){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))yield this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(er(e,!1)){let{message:t}=ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{let{message:t}=ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}})}isValidProposalId(e){return L(this,null,function*(){if(!F5(e)){let{message:t}=ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Jn(this.client.proposal.get(e).expiryTimestamp)){yield this.deleteProposal(e);let{message:t}=ge("EXPIRED",`proposal id: ${e}`);throw new Error(t)}})}},tv=class extends is{constructor(e,t){super(e,t,Bk,cv),this.core=e,this.logger=t}},rv=class extends is{constructor(e,t){super(e,t,Fk,cv),this.core=e,this.logger=t}},iv=class extends is{constructor(e,t){super(e,t,zk,cv,i=>i.id),this.core=e,this.logger=t}},nv=class extends is{constructor(e,t){super(e,t,Kk,rd,()=>Zl),this.core=e,this.logger=t}},sv=class extends is{constructor(e,t){super(e,t,Vk,rd),this.core=e,this.logger=t}},av=class extends is{constructor(e,t){super(e,t,Gk,rd,i=>i.id),this.core=e,this.logger=t}},ov=class{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new nv(this.core,this.logger),this.pairingTopics=new sv(this.core,this.logger),this.requests=new av(this.core,this.logger)}init(){return L(this,null,function*(){yield this.authKeys.init(),yield this.pairingTopics.init(),yield this.requests.init()})}},ed=class r extends Ml{constructor(e){super(e),this.protocol=o_,this.version=c_,this.name=Xg.name,this.events=new td.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=i=>L(this,null,function*(){try{return yield this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}}),this.pair=i=>L(this,null,function*(){try{return yield this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}}),this.approve=i=>L(this,null,function*(){try{return yield this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}}),this.reject=i=>L(this,null,function*(){try{return yield this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}}),this.update=i=>L(this,null,function*(){try{return yield this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}}),this.extend=i=>L(this,null,function*(){try{return yield this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}}),this.request=i=>L(this,null,function*(){try{return yield this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}}),this.respond=i=>L(this,null,function*(){try{return yield this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}}),this.ping=i=>L(this,null,function*(){try{return yield this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}}),this.emit=i=>L(this,null,function*(){try{return yield this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}}),this.disconnect=i=>L(this,null,function*(){try{return yield this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}}),this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=(i,n)=>L(this,null,function*(){try{return yield this.engine.authenticate(i,n)}catch(a){throw this.logger.error(a.message),a}}),this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=i=>L(this,null,function*(){try{return yield this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}}),this.rejectSessionAuthenticate=i=>L(this,null,function*(){try{return yield this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}}),this.name=e?.name||Xg.name,this.metadata=e?.metadata||Zh(),this.signConfig=e?.signConfig;let t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:(0,to.default)(ro({level:e?.logger||Xg.logger}));this.core=e?.core||new i_(e),this.logger=Cr(t,this.name),this.session=new rv(this.core,this.logger),this.proposal=new tv(this.core,this.logger),this.pendingRequest=new iv(this.core,this.logger),this.engine=new ev(this),this.auth=new ov(this.core,this.logger)}static init(e){return L(this,null,function*(){let t=new r(e);return yield t.initialize(),t})}get context(){return jr(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){return L(this,null,function*(){this.logger.trace("Initialized");try{yield this.core.start(),yield this.session.init(),yield this.proposal.init(),yield this.pendingRequest.init(),yield this.auth.init(),yield this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}})}};var y_=wt(ws()),uv=wt(l_());var Xk=Object.defineProperty,Zk=Object.defineProperties,ej=Object.getOwnPropertyDescriptors,d_=Object.getOwnPropertySymbols,tj=Object.prototype.hasOwnProperty,rj=Object.prototype.propertyIsEnumerable,p_=(r,e,t)=>e in r?Xk(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g_=(r,e)=>{for(var t in e||(e={}))tj.call(e,t)&&p_(r,t,e[t]);if(d_)for(var t of d_(e))rj.call(e,t)&&p_(r,t,e[t]);return r},v_=(r,e)=>Zk(r,ej(e)),ij={Accept:"application/json","Content-Type":"application/json"},nj="POST",b_={headers:ij,method:nj},m_=10,vi=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new y_.EventEmitter,this.isAvailable=!1,this.registering=!1,!Fl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return L(this,arguments,function*(e=this.url){yield this.register(e)})}close(){return L(this,null,function*(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()})}send(e){return L(this,null,function*(){this.isAvailable||(yield this.register());try{let t=Jr(e),i=yield(yield(0,uv.default)(this.url,v_(g_({},b_),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}})}register(){return L(this,arguments,function*(e=this.url){if(!Fl(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,n)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),n(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=Jr({id:1,jsonrpc:"2.0",method:"test",params:[]});yield(0,uv.default)(e,v_(g_({},b_),{body:t}))}this.onOpen()}catch(t){let i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}})}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t=typeof e.data=="string"?Gi(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let i=this.parseError(t),n=i.message||i.toString(),a=Us(e,n);this.events.emit("payload",a)}parseError(e,t=this.url){return Jf(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>m_&&this.events.setMaxListeners(m_)}};var O_=wt(ws());var w_="error",sj="wss://relay.walletconnect.org",aj="wc",oj="universal_provider",__=`${aj}@2:${oj}:`,N_="https://rpc.walletconnect.org/v1/",Dc="generic",cj=`${N_}bundler`,_n={DEFAULT_CHAIN_CHANGED:"default_chain_changed"},ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gv={exports:{}};(function(r,e){(function(){var t,i="4.17.21",n=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",g=500,m="__lodash_placeholder__",w=1,R=2,I=4,O=1,B=2,F=1,z=2,Y=4,$=8,K=16,X=32,te=64,k=128,U=256,ae=512,P=30,d="...",_=800,f=16,l=1,b=2,S=3,M=1/0,A=9007199254740991,v=17976931348623157e292,x=NaN,y=4294967295,N=y-1,Z=y>>>1,ee=[["ary",k],["bind",F],["bindKey",z],["curry",$],["curryRight",K],["flip",ae],["partial",X],["partialRight",te],["rearg",U]],D="[object Arguments]",V="[object Array]",G="[object AsyncFunction]",J="[object Boolean]",ie="[object Date]",fe="[object DOMException]",se="[object Error]",ce="[object Function]",pe="[object GeneratorFunction]",ne="[object Map]",de="[object Number]",_t="[object Null]",_e="[object Object]",vt="[object Promise]",Et="[object Proxy]",xe="[object RegExp]",Ve="[object Set]",nt="[object String]",Ae="[object Symbol]",xt="[object Undefined]",st="[object WeakMap]",Le="[object WeakSet]",at="[object ArrayBuffer]",rt="[object DataView]",Me="[object Float32Array]",ct="[object Float64Array]",ft="[object Int8Array]",De="[object Int16Array]",ut="[object Int32Array]",ht="[object Uint8Array]",Re="[object Uint8ClampedArray]",lt="[object Uint16Array]",dt="[object Uint32Array]",qe=/\b__p \+= '';/g,At=/\b(__p \+=) '' \+/g,St=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ne=/&(?:amp|lt|gt|quot|#39);/g,bt=/[&<>"']/g,It=RegExp(Ne.source),Be=RegExp(bt.source),Mt=/<%-([\s\S]+?)%>/g,Dt=/<%([\s\S]+?)%>/g,Te=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Fe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pt=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(pt.source),Pe=/^\s+/,Ot=/\s/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,Lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ze=/[()=,{}\[\]\/\s]/,qt=/\\(\\)?/g,mt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gt=/\w*$/,ei=/^[-+]0x[0-9a-f]+$/i,ti=/^0b[01]+$/i,ri=/^\[object .+?Constructor\]$/,ii=/^0o[0-7]+$/i,ni=/^(?:0|[1-9]\d*)$/,si=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oi=/($^)/,ss=/['\n\r\u2028\u2029\\]/g,Ni="\\ud800-\\udfff",as="\\u0300-\\u036f",os="\\ufe20-\\ufe2f",cs="\\u20d0-\\u20ff",En=as+os+cs,xn="\\u2700-\\u27bf",An="a-z\\xdf-\\xf6\\xf8-\\xff",fs="\\xac\\xb1\\xd7\\xf7",us="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pc="\\u2000-\\u206f",Cc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cv="A-Z\\xc0-\\xd6\\xd8-\\xde",Ov="\\ufe0e\\ufe0f",Nv=fs+us+Pc+Cc,cd="['\u2019]",z_="["+Ni+"]",Tv="["+Nv+"]",cu="["+En+"]",Lv="\\d+",k_="["+xn+"]",qv="["+An+"]",Bv="[^"+Ni+Nv+Lv+xn+An+Cv+"]",fd="\\ud83c[\\udffb-\\udfff]",j_="(?:"+cu+"|"+fd+")",Fv="[^"+Ni+"]",ud="(?:\\ud83c[\\udde6-\\uddff]){2}",hd="[\\ud800-\\udbff][\\udc00-\\udfff]",fo="["+Cv+"]",Uv="\\u200d",zv="(?:"+qv+"|"+Bv+")",H_="(?:"+fo+"|"+Bv+")",kv="(?:"+cd+"(?:d|ll|m|re|s|t|ve))?",jv="(?:"+cd+"(?:D|LL|M|RE|S|T|VE))?",Hv=j_+"?",Kv="["+Ov+"]?",K_="(?:"+Uv+"(?:"+[Fv,ud,hd].join("|")+")"+Kv+Hv+")*",V_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",G_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vv=Kv+Hv+K_,$_="(?:"+[k_,ud,hd].join("|")+")"+Vv,J_="(?:"+[Fv+cu+"?",cu,ud,hd,z_].join("|")+")",W_=RegExp(cd,"g"),Y_=RegExp(cu,"g"),ld=RegExp(fd+"(?="+fd+")|"+J_+Vv,"g"),Q_=RegExp([fo+"?"+qv+"+"+kv+"(?="+[Tv,fo,"$"].join("|")+")",H_+"+"+jv+"(?="+[Tv,fo+zv,"$"].join("|")+")",fo+"?"+zv+"+"+kv,fo+"+"+jv,G_,V_,Lv,$_].join("|"),"g"),X_=RegExp("["+Uv+Ni+En+Ov+"]"),Z_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,e7=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],t7=-1,Jt={};Jt[Me]=Jt[ct]=Jt[ft]=Jt[De]=Jt[ut]=Jt[ht]=Jt[Re]=Jt[lt]=Jt[dt]=!0,Jt[D]=Jt[V]=Jt[at]=Jt[J]=Jt[rt]=Jt[ie]=Jt[se]=Jt[ce]=Jt[ne]=Jt[de]=Jt[_e]=Jt[xe]=Jt[Ve]=Jt[nt]=Jt[st]=!1;var Vt={};Vt[D]=Vt[V]=Vt[at]=Vt[rt]=Vt[J]=Vt[ie]=Vt[Me]=Vt[ct]=Vt[ft]=Vt[De]=Vt[ut]=Vt[ne]=Vt[de]=Vt[_e]=Vt[xe]=Vt[Ve]=Vt[nt]=Vt[Ae]=Vt[ht]=Vt[Re]=Vt[lt]=Vt[dt]=!0,Vt[se]=Vt[ce]=Vt[st]=!1;var r7={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},i7={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n7={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},s7={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},a7=parseFloat,o7=parseInt,Gv=typeof ou=="object"&&ou&&ou.Object===Object&&ou,c7=typeof self=="object"&&self&&self.Object===Object&&self,Ar=Gv||c7||Function("return this")(),dd=e&&!e.nodeType&&e,Aa=dd&&!0&&r&&!r.nodeType&&r,$v=Aa&&Aa.exports===dd,pd=$v&&Gv.process,Ti=function(){try{var W=Aa&&Aa.require&&Aa.require("util").types;return W||pd&&pd.binding&&pd.binding("util")}catch{}}(),Jv=Ti&&Ti.isArrayBuffer,Wv=Ti&&Ti.isDate,Yv=Ti&&Ti.isMap,Qv=Ti&&Ti.isRegExp,Xv=Ti&&Ti.isSet,Zv=Ti&&Ti.isTypedArray;function bi(W,oe,re){switch(re.length){case 0:return W.call(oe);case 1:return W.call(oe,re[0]);case 2:return W.call(oe,re[0],re[1]);case 3:return W.call(oe,re[0],re[1],re[2])}return W.apply(oe,re)}function f7(W,oe,re,ye){for(var ke=-1,yt=W==null?0:W.length;++ke<yt;){var pr=W[ke];oe(ye,pr,re(pr),W)}return ye}function Li(W,oe){for(var re=-1,ye=W==null?0:W.length;++re<ye&&oe(W[re],re,W)!==!1;);return W}function u7(W,oe){for(var re=W==null?0:W.length;re--&&oe(W[re],re,W)!==!1;);return W}function eb(W,oe){for(var re=-1,ye=W==null?0:W.length;++re<ye;)if(!oe(W[re],re,W))return!1;return!0}function Ks(W,oe){for(var re=-1,ye=W==null?0:W.length,ke=0,yt=[];++re<ye;){var pr=W[re];oe(pr,re,W)&&(yt[ke++]=pr)}return yt}function fu(W,oe){var re=W==null?0:W.length;return!!re&&uo(W,oe,0)>-1}function gd(W,oe,re){for(var ye=-1,ke=W==null?0:W.length;++ye<ke;)if(re(oe,W[ye]))return!0;return!1}function Qt(W,oe){for(var re=-1,ye=W==null?0:W.length,ke=Array(ye);++re<ye;)ke[re]=oe(W[re],re,W);return ke}function Vs(W,oe){for(var re=-1,ye=oe.length,ke=W.length;++re<ye;)W[ke+re]=oe[re];return W}function vd(W,oe,re,ye){var ke=-1,yt=W==null?0:W.length;for(ye&&yt&&(re=W[++ke]);++ke<yt;)re=oe(re,W[ke],ke,W);return re}function h7(W,oe,re,ye){var ke=W==null?0:W.length;for(ye&&ke&&(re=W[--ke]);ke--;)re=oe(re,W[ke],ke,W);return re}function bd(W,oe){for(var re=-1,ye=W==null?0:W.length;++re<ye;)if(oe(W[re],re,W))return!0;return!1}var l7=md("length");function d7(W){return W.split("")}function p7(W){return W.match(Lt)||[]}function tb(W,oe,re){var ye;return re(W,function(ke,yt,pr){if(oe(ke,yt,pr))return ye=yt,!1}),ye}function uu(W,oe,re,ye){for(var ke=W.length,yt=re+(ye?1:-1);ye?yt--:++yt<ke;)if(oe(W[yt],yt,W))return yt;return-1}function uo(W,oe,re){return oe===oe?I7(W,oe,re):uu(W,rb,re)}function g7(W,oe,re,ye){for(var ke=re-1,yt=W.length;++ke<yt;)if(ye(W[ke],oe))return ke;return-1}function rb(W){return W!==W}function ib(W,oe){var re=W==null?0:W.length;return re?wd(W,oe)/re:x}function md(W){return function(oe){return oe==null?t:oe[W]}}function yd(W){return function(oe){return W==null?t:W[oe]}}function nb(W,oe,re,ye,ke){return ke(W,function(yt,pr,Ht){re=ye?(ye=!1,yt):oe(re,yt,pr,Ht)}),re}function v7(W,oe){var re=W.length;for(W.sort(oe);re--;)W[re]=W[re].value;return W}function wd(W,oe){for(var re,ye=-1,ke=W.length;++ye<ke;){var yt=oe(W[ye]);yt!==t&&(re=re===t?yt:re+yt)}return re}function _d(W,oe){for(var re=-1,ye=Array(W);++re<W;)ye[re]=oe(re);return ye}function b7(W,oe){return Qt(oe,function(re){return[re,W[re]]})}function sb(W){return W&&W.slice(0,fb(W)+1).replace(Pe,"")}function mi(W){return function(oe){return W(oe)}}function Ed(W,oe){return Qt(oe,function(re){return W[re]})}function Oc(W,oe){return W.has(oe)}function ab(W,oe){for(var re=-1,ye=W.length;++re<ye&&uo(oe,W[re],0)>-1;);return re}function ob(W,oe){for(var re=W.length;re--&&uo(oe,W[re],0)>-1;);return re}function m7(W,oe){for(var re=W.length,ye=0;re--;)W[re]===oe&&++ye;return ye}var y7=yd(r7),w7=yd(i7);function _7(W){return"\\"+s7[W]}function E7(W,oe){return W==null?t:W[oe]}function ho(W){return X_.test(W)}function x7(W){return Z_.test(W)}function A7(W){for(var oe,re=[];!(oe=W.next()).done;)re.push(oe.value);return re}function xd(W){var oe=-1,re=Array(W.size);return W.forEach(function(ye,ke){re[++oe]=[ke,ye]}),re}function cb(W,oe){return function(re){return W(oe(re))}}function Gs(W,oe){for(var re=-1,ye=W.length,ke=0,yt=[];++re<ye;){var pr=W[re];(pr===oe||pr===m)&&(W[re]=m,yt[ke++]=re)}return yt}function hu(W){var oe=-1,re=Array(W.size);return W.forEach(function(ye){re[++oe]=ye}),re}function S7(W){var oe=-1,re=Array(W.size);return W.forEach(function(ye){re[++oe]=[ye,ye]}),re}function I7(W,oe,re){for(var ye=re-1,ke=W.length;++ye<ke;)if(W[ye]===oe)return ye;return-1}function M7(W,oe,re){for(var ye=re+1;ye--;)if(W[ye]===oe)return ye;return ye}function lo(W){return ho(W)?R7(W):l7(W)}function Zi(W){return ho(W)?P7(W):d7(W)}function fb(W){for(var oe=W.length;oe--&&Ot.test(W.charAt(oe)););return oe}var D7=yd(n7);function R7(W){for(var oe=ld.lastIndex=0;ld.test(W);)++oe;return oe}function P7(W){return W.match(ld)||[]}function C7(W){return W.match(Q_)||[]}var O7=function W(oe){oe=oe==null?Ar:po.defaults(Ar.Object(),oe,po.pick(Ar,e7));var re=oe.Array,ye=oe.Date,ke=oe.Error,yt=oe.Function,pr=oe.Math,Ht=oe.Object,Ad=oe.RegExp,N7=oe.String,qi=oe.TypeError,lu=re.prototype,T7=yt.prototype,go=Ht.prototype,du=oe["__core-js_shared__"],pu=T7.toString,zt=go.hasOwnProperty,L7=0,ub=function(){var s=/[^.]+$/.exec(du&&du.keys&&du.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),gu=go.toString,q7=pu.call(Ht),B7=Ar._,F7=Ad("^"+pu.call(zt).replace(pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vu=$v?oe.Buffer:t,$s=oe.Symbol,bu=oe.Uint8Array,hb=vu?vu.allocUnsafe:t,mu=cb(Ht.getPrototypeOf,Ht),lb=Ht.create,db=go.propertyIsEnumerable,yu=lu.splice,pb=$s?$s.isConcatSpreadable:t,Nc=$s?$s.iterator:t,Sa=$s?$s.toStringTag:t,wu=function(){try{var s=Pa(Ht,"defineProperty");return s({},"",{}),s}catch{}}(),U7=oe.clearTimeout!==Ar.clearTimeout&&oe.clearTimeout,z7=ye&&ye.now!==Ar.Date.now&&ye.now,k7=oe.setTimeout!==Ar.setTimeout&&oe.setTimeout,_u=pr.ceil,Eu=pr.floor,Sd=Ht.getOwnPropertySymbols,j7=vu?vu.isBuffer:t,gb=oe.isFinite,H7=lu.join,K7=cb(Ht.keys,Ht),gr=pr.max,Nr=pr.min,V7=ye.now,G7=oe.parseInt,vb=pr.random,$7=lu.reverse,Id=Pa(oe,"DataView"),Tc=Pa(oe,"Map"),Md=Pa(oe,"Promise"),vo=Pa(oe,"Set"),Lc=Pa(oe,"WeakMap"),qc=Pa(Ht,"create"),xu=Lc&&new Lc,bo={},J7=Ca(Id),W7=Ca(Tc),Y7=Ca(Md),Q7=Ca(vo),X7=Ca(Lc),Au=$s?$s.prototype:t,Bc=Au?Au.valueOf:t,bb=Au?Au.toString:t;function T(s){if(tr(s)&&!je(s)&&!(s instanceof Xe)){if(s instanceof Bi)return s;if(zt.call(s,"__wrapped__"))return mm(s)}return new Bi(s)}var mo=function(){function s(){}return function(o){if(!Zt(o))return{};if(lb)return lb(o);s.prototype=o;var h=new s;return s.prototype=t,h}}();function Su(){}function Bi(s,o){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}T.templateSettings={escape:Mt,evaluate:Dt,interpolate:Te,variable:"",imports:{_:T}},T.prototype=Su.prototype,T.prototype.constructor=T,Bi.prototype=mo(Su.prototype),Bi.prototype.constructor=Bi;function Xe(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function Z7(){var s=new Xe(this.__wrapped__);return s.__actions__=ai(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=ai(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=ai(this.__views__),s}function e9(){if(this.__filtered__){var s=new Xe(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function t9(){var s=this.__wrapped__.value(),o=this.__dir__,h=je(s),E=o<0,C=h?s.length:0,q=dE(0,C,this.__views__),j=q.start,H=q.end,Q=H-j,ue=E?H:j-1,he=this.__iteratees__,le=he.length,be=0,we=Nr(Q,this.__takeCount__);if(!h||!E&&C==Q&&we==Q)return kb(s,this.__actions__);var Ce=[];e:for(;Q--&&be<we;){ue+=o;for(var Ge=-1,Oe=s[ue];++Ge<le;){var Qe=he[Ge],it=Qe.iteratee,_i=Qe.type,$r=it(Oe);if(_i==b)Oe=$r;else if(!$r){if(_i==l)continue e;break e}}Ce[be++]=Oe}return Ce}Xe.prototype=mo(Su.prototype),Xe.prototype.constructor=Xe;function Ia(s){var o=-1,h=s==null?0:s.length;for(this.clear();++o<h;){var E=s[o];this.set(E[0],E[1])}}function r9(){this.__data__=qc?qc(null):{},this.size=0}function i9(s){var o=this.has(s)&&delete this.__data__[s];return this.size-=o?1:0,o}function n9(s){var o=this.__data__;if(qc){var h=o[s];return h===p?t:h}return zt.call(o,s)?o[s]:t}function s9(s){var o=this.__data__;return qc?o[s]!==t:zt.call(o,s)}function a9(s,o){var h=this.__data__;return this.size+=this.has(s)?0:1,h[s]=qc&&o===t?p:o,this}Ia.prototype.clear=r9,Ia.prototype.delete=i9,Ia.prototype.get=n9,Ia.prototype.has=s9,Ia.prototype.set=a9;function hs(s){var o=-1,h=s==null?0:s.length;for(this.clear();++o<h;){var E=s[o];this.set(E[0],E[1])}}function o9(){this.__data__=[],this.size=0}function c9(s){var o=this.__data__,h=Iu(o,s);if(h<0)return!1;var E=o.length-1;return h==E?o.pop():yu.call(o,h,1),--this.size,!0}function f9(s){var o=this.__data__,h=Iu(o,s);return h<0?t:o[h][1]}function u9(s){return Iu(this.__data__,s)>-1}function h9(s,o){var h=this.__data__,E=Iu(h,s);return E<0?(++this.size,h.push([s,o])):h[E][1]=o,this}hs.prototype.clear=o9,hs.prototype.delete=c9,hs.prototype.get=f9,hs.prototype.has=u9,hs.prototype.set=h9;function ls(s){var o=-1,h=s==null?0:s.length;for(this.clear();++o<h;){var E=s[o];this.set(E[0],E[1])}}function l9(){this.size=0,this.__data__={hash:new Ia,map:new(Tc||hs),string:new Ia}}function d9(s){var o=Fu(this,s).delete(s);return this.size-=o?1:0,o}function p9(s){return Fu(this,s).get(s)}function g9(s){return Fu(this,s).has(s)}function v9(s,o){var h=Fu(this,s),E=h.size;return h.set(s,o),this.size+=h.size==E?0:1,this}ls.prototype.clear=l9,ls.prototype.delete=d9,ls.prototype.get=p9,ls.prototype.has=g9,ls.prototype.set=v9;function Ma(s){var o=-1,h=s==null?0:s.length;for(this.__data__=new ls;++o<h;)this.add(s[o])}function b9(s){return this.__data__.set(s,p),this}function m9(s){return this.__data__.has(s)}Ma.prototype.add=Ma.prototype.push=b9,Ma.prototype.has=m9;function en(s){var o=this.__data__=new hs(s);this.size=o.size}function y9(){this.__data__=new hs,this.size=0}function w9(s){var o=this.__data__,h=o.delete(s);return this.size=o.size,h}function _9(s){return this.__data__.get(s)}function E9(s){return this.__data__.has(s)}function x9(s,o){var h=this.__data__;if(h instanceof hs){var E=h.__data__;if(!Tc||E.length<n-1)return E.push([s,o]),this.size=++h.size,this;h=this.__data__=new ls(E)}return h.set(s,o),this.size=h.size,this}en.prototype.clear=y9,en.prototype.delete=w9,en.prototype.get=_9,en.prototype.has=E9,en.prototype.set=x9;function mb(s,o){var h=je(s),E=!h&&Oa(s),C=!h&&!E&&Xs(s),q=!h&&!E&&!C&&Eo(s),j=h||E||C||q,H=j?_d(s.length,N7):[],Q=H.length;for(var ue in s)(o||zt.call(s,ue))&&!(j&&(ue=="length"||C&&(ue=="offset"||ue=="parent")||q&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||vs(ue,Q)))&&H.push(ue);return H}function yb(s){var o=s.length;return o?s[Fd(0,o-1)]:t}function A9(s,o){return Uu(ai(s),Da(o,0,s.length))}function S9(s){return Uu(ai(s))}function Dd(s,o,h){(h!==t&&!tn(s[o],h)||h===t&&!(o in s))&&ds(s,o,h)}function Fc(s,o,h){var E=s[o];(!(zt.call(s,o)&&tn(E,h))||h===t&&!(o in s))&&ds(s,o,h)}function Iu(s,o){for(var h=s.length;h--;)if(tn(s[h][0],o))return h;return-1}function I9(s,o,h,E){return Js(s,function(C,q,j){o(E,C,h(C),j)}),E}function wb(s,o){return s&&In(o,br(o),s)}function M9(s,o){return s&&In(o,ci(o),s)}function ds(s,o,h){o=="__proto__"&&wu?wu(s,o,{configurable:!0,enumerable:!0,value:h,writable:!0}):s[o]=h}function Rd(s,o){for(var h=-1,E=o.length,C=re(E),q=s==null;++h<E;)C[h]=q?t:f0(s,o[h]);return C}function Da(s,o,h){return s===s&&(h!==t&&(s=s<=h?s:h),o!==t&&(s=s>=o?s:o)),s}function Fi(s,o,h,E,C,q){var j,H=o&w,Q=o&R,ue=o&I;if(h&&(j=C?h(s,E,C,q):h(s)),j!==t)return j;if(!Zt(s))return s;var he=je(s);if(he){if(j=gE(s),!H)return ai(s,j)}else{var le=Tr(s),be=le==ce||le==pe;if(Xs(s))return Kb(s,H);if(le==_e||le==D||be&&!C){if(j=Q||be?{}:fm(s),!H)return Q?nE(s,M9(j,s)):iE(s,wb(j,s))}else{if(!Vt[le])return C?s:{};j=vE(s,le,H)}}q||(q=new en);var we=q.get(s);if(we)return we;q.set(s,j),Fm(s)?s.forEach(function(Oe){j.add(Fi(Oe,o,h,Oe,s,q))}):qm(s)&&s.forEach(function(Oe,Qe){j.set(Qe,Fi(Oe,o,h,Qe,s,q))});var Ce=ue?Q?Wd:Jd:Q?ci:br,Ge=he?t:Ce(s);return Li(Ge||s,function(Oe,Qe){Ge&&(Qe=Oe,Oe=s[Qe]),Fc(j,Qe,Fi(Oe,o,h,Qe,s,q))}),j}function D9(s){var o=br(s);return function(h){return _b(h,s,o)}}function _b(s,o,h){var E=h.length;if(s==null)return!E;for(s=Ht(s);E--;){var C=h[E],q=o[C],j=s[C];if(j===t&&!(C in s)||!q(j))return!1}return!0}function Eb(s,o,h){if(typeof s!="function")throw new qi(c);return Vc(function(){s.apply(t,h)},o)}function Uc(s,o,h,E){var C=-1,q=fu,j=!0,H=s.length,Q=[],ue=o.length;if(!H)return Q;h&&(o=Qt(o,mi(h))),E?(q=gd,j=!1):o.length>=n&&(q=Oc,j=!1,o=new Ma(o));e:for(;++C<H;){var he=s[C],le=h==null?he:h(he);if(he=E||he!==0?he:0,j&&le===le){for(var be=ue;be--;)if(o[be]===le)continue e;Q.push(he)}else q(o,le,E)||Q.push(he)}return Q}var Js=Wb(Sn),xb=Wb(Cd,!0);function R9(s,o){var h=!0;return Js(s,function(E,C,q){return h=!!o(E,C,q),h}),h}function Mu(s,o,h){for(var E=-1,C=s.length;++E<C;){var q=s[E],j=o(q);if(j!=null&&(H===t?j===j&&!wi(j):h(j,H)))var H=j,Q=q}return Q}function P9(s,o,h,E){var C=s.length;for(h=Ke(h),h<0&&(h=-h>C?0:C+h),E=E===t||E>C?C:Ke(E),E<0&&(E+=C),E=h>E?0:zm(E);h<E;)s[h++]=o;return s}function Ab(s,o){var h=[];return Js(s,function(E,C,q){o(E,C,q)&&h.push(E)}),h}function Sr(s,o,h,E,C){var q=-1,j=s.length;for(h||(h=mE),C||(C=[]);++q<j;){var H=s[q];o>0&&h(H)?o>1?Sr(H,o-1,h,E,C):Vs(C,H):E||(C[C.length]=H)}return C}var Pd=Yb(),Sb=Yb(!0);function Sn(s,o){return s&&Pd(s,o,br)}function Cd(s,o){return s&&Sb(s,o,br)}function Du(s,o){return Ks(o,function(h){return bs(s[h])})}function Ra(s,o){o=Ys(o,s);for(var h=0,E=o.length;s!=null&&h<E;)s=s[Mn(o[h++])];return h&&h==E?s:t}function Ib(s,o,h){var E=o(s);return je(s)?E:Vs(E,h(s))}function Vr(s){return s==null?s===t?xt:_t:Sa&&Sa in Ht(s)?lE(s):SE(s)}function Od(s,o){return s>o}function C9(s,o){return s!=null&&zt.call(s,o)}function O9(s,o){return s!=null&&o in Ht(s)}function N9(s,o,h){return s>=Nr(o,h)&&s<gr(o,h)}function Nd(s,o,h){for(var E=h?gd:fu,C=s[0].length,q=s.length,j=q,H=re(q),Q=1/0,ue=[];j--;){var he=s[j];j&&o&&(he=Qt(he,mi(o))),Q=Nr(he.length,Q),H[j]=!h&&(o||C>=120&&he.length>=120)?new Ma(j&&he):t}he=s[0];var le=-1,be=H[0];e:for(;++le<C&&ue.length<Q;){var we=he[le],Ce=o?o(we):we;if(we=h||we!==0?we:0,!(be?Oc(be,Ce):E(ue,Ce,h))){for(j=q;--j;){var Ge=H[j];if(!(Ge?Oc(Ge,Ce):E(s[j],Ce,h)))continue e}be&&be.push(Ce),ue.push(we)}}return ue}function T9(s,o,h,E){return Sn(s,function(C,q,j){o(E,h(C),q,j)}),E}function zc(s,o,h){o=Ys(o,s),s=dm(s,o);var E=s==null?s:s[Mn(zi(o))];return E==null?t:bi(E,s,h)}function Mb(s){return tr(s)&&Vr(s)==D}function L9(s){return tr(s)&&Vr(s)==at}function q9(s){return tr(s)&&Vr(s)==ie}function kc(s,o,h,E,C){return s===o?!0:s==null||o==null||!tr(s)&&!tr(o)?s!==s&&o!==o:B9(s,o,h,E,kc,C)}function B9(s,o,h,E,C,q){var j=je(s),H=je(o),Q=j?V:Tr(s),ue=H?V:Tr(o);Q=Q==D?_e:Q,ue=ue==D?_e:ue;var he=Q==_e,le=ue==_e,be=Q==ue;if(be&&Xs(s)){if(!Xs(o))return!1;j=!0,he=!1}if(be&&!he)return q||(q=new en),j||Eo(s)?am(s,o,h,E,C,q):uE(s,o,Q,h,E,C,q);if(!(h&O)){var we=he&&zt.call(s,"__wrapped__"),Ce=le&&zt.call(o,"__wrapped__");if(we||Ce){var Ge=we?s.value():s,Oe=Ce?o.value():o;return q||(q=new en),C(Ge,Oe,h,E,q)}}return be?(q||(q=new en),hE(s,o,h,E,C,q)):!1}function F9(s){return tr(s)&&Tr(s)==ne}function Td(s,o,h,E){var C=h.length,q=C,j=!E;if(s==null)return!q;for(s=Ht(s);C--;){var H=h[C];if(j&&H[2]?H[1]!==s[H[0]]:!(H[0]in s))return!1}for(;++C<q;){H=h[C];var Q=H[0],ue=s[Q],he=H[1];if(j&&H[2]){if(ue===t&&!(Q in s))return!1}else{var le=new en;if(E)var be=E(ue,he,Q,s,o,le);if(!(be===t?kc(he,ue,O|B,E,le):be))return!1}}return!0}function Db(s){if(!Zt(s)||wE(s))return!1;var o=bs(s)?F7:ri;return o.test(Ca(s))}function U9(s){return tr(s)&&Vr(s)==xe}function z9(s){return tr(s)&&Tr(s)==Ve}function k9(s){return tr(s)&&Vu(s.length)&&!!Jt[Vr(s)]}function Rb(s){return typeof s=="function"?s:s==null?fi:typeof s=="object"?je(s)?Ob(s[0],s[1]):Cb(s):Qm(s)}function Ld(s){if(!Kc(s))return K7(s);var o=[];for(var h in Ht(s))zt.call(s,h)&&h!="constructor"&&o.push(h);return o}function j9(s){if(!Zt(s))return AE(s);var o=Kc(s),h=[];for(var E in s)E=="constructor"&&(o||!zt.call(s,E))||h.push(E);return h}function qd(s,o){return s<o}function Pb(s,o){var h=-1,E=oi(s)?re(s.length):[];return Js(s,function(C,q,j){E[++h]=o(C,q,j)}),E}function Cb(s){var o=Qd(s);return o.length==1&&o[0][2]?hm(o[0][0],o[0][1]):function(h){return h===s||Td(h,s,o)}}function Ob(s,o){return Zd(s)&&um(o)?hm(Mn(s),o):function(h){var E=f0(h,s);return E===t&&E===o?u0(h,s):kc(o,E,O|B)}}function Ru(s,o,h,E,C){s!==o&&Pd(o,function(q,j){if(C||(C=new en),Zt(q))H9(s,o,j,h,Ru,E,C);else{var H=E?E(t0(s,j),q,j+"",s,o,C):t;H===t&&(H=q),Dd(s,j,H)}},ci)}function H9(s,o,h,E,C,q,j){var H=t0(s,h),Q=t0(o,h),ue=j.get(Q);if(ue){Dd(s,h,ue);return}var he=q?q(H,Q,h+"",s,o,j):t,le=he===t;if(le){var be=je(Q),we=!be&&Xs(Q),Ce=!be&&!we&&Eo(Q);he=Q,be||we||Ce?je(H)?he=H:cr(H)?he=ai(H):we?(le=!1,he=Kb(Q,!0)):Ce?(le=!1,he=Vb(Q,!0)):he=[]:Gc(Q)||Oa(Q)?(he=H,Oa(H)?he=km(H):(!Zt(H)||bs(H))&&(he=fm(Q))):le=!1}le&&(j.set(Q,he),C(he,Q,E,q,j),j.delete(Q)),Dd(s,h,he)}function Nb(s,o){var h=s.length;if(h)return o+=o<0?h:0,vs(o,h)?s[o]:t}function Tb(s,o,h){o.length?o=Qt(o,function(q){return je(q)?function(j){return Ra(j,q.length===1?q[0]:q)}:q}):o=[fi];var E=-1;o=Qt(o,mi(Se()));var C=Pb(s,function(q,j,H){var Q=Qt(o,function(ue){return ue(q)});return{criteria:Q,index:++E,value:q}});return v7(C,function(q,j){return rE(q,j,h)})}function K9(s,o){return Lb(s,o,function(h,E){return u0(s,E)})}function Lb(s,o,h){for(var E=-1,C=o.length,q={};++E<C;){var j=o[E],H=Ra(s,j);h(H,j)&&jc(q,Ys(j,s),H)}return q}function V9(s){return function(o){return Ra(o,s)}}function Bd(s,o,h,E){var C=E?g7:uo,q=-1,j=o.length,H=s;for(s===o&&(o=ai(o)),h&&(H=Qt(s,mi(h)));++q<j;)for(var Q=0,ue=o[q],he=h?h(ue):ue;(Q=C(H,he,Q,E))>-1;)H!==s&&yu.call(H,Q,1),yu.call(s,Q,1);return s}function qb(s,o){for(var h=s?o.length:0,E=h-1;h--;){var C=o[h];if(h==E||C!==q){var q=C;vs(C)?yu.call(s,C,1):kd(s,C)}}return s}function Fd(s,o){return s+Eu(vb()*(o-s+1))}function G9(s,o,h,E){for(var C=-1,q=gr(_u((o-s)/(h||1)),0),j=re(q);q--;)j[E?q:++C]=s,s+=h;return j}function Ud(s,o){var h="";if(!s||o<1||o>A)return h;do o%2&&(h+=s),o=Eu(o/2),o&&(s+=s);while(o);return h}function $e(s,o){return r0(lm(s,o,fi),s+"")}function $9(s){return yb(xo(s))}function J9(s,o){var h=xo(s);return Uu(h,Da(o,0,h.length))}function jc(s,o,h,E){if(!Zt(s))return s;o=Ys(o,s);for(var C=-1,q=o.length,j=q-1,H=s;H!=null&&++C<q;){var Q=Mn(o[C]),ue=h;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return s;if(C!=j){var he=H[Q];ue=E?E(he,Q,H):t,ue===t&&(ue=Zt(he)?he:vs(o[C+1])?[]:{})}Fc(H,Q,ue),H=H[Q]}return s}var Bb=xu?function(s,o){return xu.set(s,o),s}:fi,W9=wu?function(s,o){return wu(s,"toString",{configurable:!0,enumerable:!1,value:l0(o),writable:!0})}:fi;function Y9(s){return Uu(xo(s))}function Ui(s,o,h){var E=-1,C=s.length;o<0&&(o=-o>C?0:C+o),h=h>C?C:h,h<0&&(h+=C),C=o>h?0:h-o>>>0,o>>>=0;for(var q=re(C);++E<C;)q[E]=s[E+o];return q}function Q9(s,o){var h;return Js(s,function(E,C,q){return h=o(E,C,q),!h}),!!h}function Pu(s,o,h){var E=0,C=s==null?E:s.length;if(typeof o=="number"&&o===o&&C<=Z){for(;E<C;){var q=E+C>>>1,j=s[q];j!==null&&!wi(j)&&(h?j<=o:j<o)?E=q+1:C=q}return C}return zd(s,o,fi,h)}function zd(s,o,h,E){var C=0,q=s==null?0:s.length;if(q===0)return 0;o=h(o);for(var j=o!==o,H=o===null,Q=wi(o),ue=o===t;C<q;){var he=Eu((C+q)/2),le=h(s[he]),be=le!==t,we=le===null,Ce=le===le,Ge=wi(le);if(j)var Oe=E||Ce;else ue?Oe=Ce&&(E||be):H?Oe=Ce&&be&&(E||!we):Q?Oe=Ce&&be&&!we&&(E||!Ge):we||Ge?Oe=!1:Oe=E?le<=o:le<o;Oe?C=he+1:q=he}return Nr(q,N)}function Fb(s,o){for(var h=-1,E=s.length,C=0,q=[];++h<E;){var j=s[h],H=o?o(j):j;if(!h||!tn(H,Q)){var Q=H;q[C++]=j===0?0:j}}return q}function Ub(s){return typeof s=="number"?s:wi(s)?x:+s}function yi(s){if(typeof s=="string")return s;if(je(s))return Qt(s,yi)+"";if(wi(s))return bb?bb.call(s):"";var o=s+"";return o=="0"&&1/s==-M?"-0":o}function Ws(s,o,h){var E=-1,C=fu,q=s.length,j=!0,H=[],Q=H;if(h)j=!1,C=gd;else if(q>=n){var ue=o?null:cE(s);if(ue)return hu(ue);j=!1,C=Oc,Q=new Ma}else Q=o?[]:H;e:for(;++E<q;){var he=s[E],le=o?o(he):he;if(he=h||he!==0?he:0,j&&le===le){for(var be=Q.length;be--;)if(Q[be]===le)continue e;o&&Q.push(le),H.push(he)}else C(Q,le,h)||(Q!==H&&Q.push(le),H.push(he))}return H}function kd(s,o){return o=Ys(o,s),s=dm(s,o),s==null||delete s[Mn(zi(o))]}function zb(s,o,h,E){return jc(s,o,h(Ra(s,o)),E)}function Cu(s,o,h,E){for(var C=s.length,q=E?C:-1;(E?q--:++q<C)&&o(s[q],q,s););return h?Ui(s,E?0:q,E?q+1:C):Ui(s,E?q+1:0,E?C:q)}function kb(s,o){var h=s;return h instanceof Xe&&(h=h.value()),vd(o,function(E,C){return C.func.apply(C.thisArg,Vs([E],C.args))},h)}function jd(s,o,h){var E=s.length;if(E<2)return E?Ws(s[0]):[];for(var C=-1,q=re(E);++C<E;)for(var j=s[C],H=-1;++H<E;)H!=C&&(q[C]=Uc(q[C]||j,s[H],o,h));return Ws(Sr(q,1),o,h)}function jb(s,o,h){for(var E=-1,C=s.length,q=o.length,j={};++E<C;){var H=E<q?o[E]:t;h(j,s[E],H)}return j}function Hd(s){return cr(s)?s:[]}function Kd(s){return typeof s=="function"?s:fi}function Ys(s,o){return je(s)?s:Zd(s,o)?[s]:bm(Bt(s))}var X9=$e;function Qs(s,o,h){var E=s.length;return h=h===t?E:h,!o&&h>=E?s:Ui(s,o,h)}var Hb=U7||function(s){return Ar.clearTimeout(s)};function Kb(s,o){if(o)return s.slice();var h=s.length,E=hb?hb(h):new s.constructor(h);return s.copy(E),E}function Vd(s){var o=new s.constructor(s.byteLength);return new bu(o).set(new bu(s)),o}function Z9(s,o){var h=o?Vd(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.byteLength)}function eE(s){var o=new s.constructor(s.source,gt.exec(s));return o.lastIndex=s.lastIndex,o}function tE(s){return Bc?Ht(Bc.call(s)):{}}function Vb(s,o){var h=o?Vd(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.length)}function Gb(s,o){if(s!==o){var h=s!==t,E=s===null,C=s===s,q=wi(s),j=o!==t,H=o===null,Q=o===o,ue=wi(o);if(!H&&!ue&&!q&&s>o||q&&j&&Q&&!H&&!ue||E&&j&&Q||!h&&Q||!C)return 1;if(!E&&!q&&!ue&&s<o||ue&&h&&C&&!E&&!q||H&&h&&C||!j&&C||!Q)return-1}return 0}function rE(s,o,h){for(var E=-1,C=s.criteria,q=o.criteria,j=C.length,H=h.length;++E<j;){var Q=Gb(C[E],q[E]);if(Q){if(E>=H)return Q;var ue=h[E];return Q*(ue=="desc"?-1:1)}}return s.index-o.index}function $b(s,o,h,E){for(var C=-1,q=s.length,j=h.length,H=-1,Q=o.length,ue=gr(q-j,0),he=re(Q+ue),le=!E;++H<Q;)he[H]=o[H];for(;++C<j;)(le||C<q)&&(he[h[C]]=s[C]);for(;ue--;)he[H++]=s[C++];return he}function Jb(s,o,h,E){for(var C=-1,q=s.length,j=-1,H=h.length,Q=-1,ue=o.length,he=gr(q-H,0),le=re(he+ue),be=!E;++C<he;)le[C]=s[C];for(var we=C;++Q<ue;)le[we+Q]=o[Q];for(;++j<H;)(be||C<q)&&(le[we+h[j]]=s[C++]);return le}function ai(s,o){var h=-1,E=s.length;for(o||(o=re(E));++h<E;)o[h]=s[h];return o}function In(s,o,h,E){var C=!h;h||(h={});for(var q=-1,j=o.length;++q<j;){var H=o[q],Q=E?E(h[H],s[H],H,h,s):t;Q===t&&(Q=s[H]),C?ds(h,H,Q):Fc(h,H,Q)}return h}function iE(s,o){return In(s,Xd(s),o)}function nE(s,o){return In(s,om(s),o)}function Ou(s,o){return function(h,E){var C=je(h)?f7:I9,q=o?o():{};return C(h,s,Se(E,2),q)}}function yo(s){return $e(function(o,h){var E=-1,C=h.length,q=C>1?h[C-1]:t,j=C>2?h[2]:t;for(q=s.length>3&&typeof q=="function"?(C--,q):t,j&&Gr(h[0],h[1],j)&&(q=C<3?t:q,C=1),o=Ht(o);++E<C;){var H=h[E];H&&s(o,H,E,q)}return o})}function Wb(s,o){return function(h,E){if(h==null)return h;if(!oi(h))return s(h,E);for(var C=h.length,q=o?C:-1,j=Ht(h);(o?q--:++q<C)&&E(j[q],q,j)!==!1;);return h}}function Yb(s){return function(o,h,E){for(var C=-1,q=Ht(o),j=E(o),H=j.length;H--;){var Q=j[s?H:++C];if(h(q[Q],Q,q)===!1)break}return o}}function sE(s,o,h){var E=o&F,C=Hc(s);function q(){var j=this&&this!==Ar&&this instanceof q?C:s;return j.apply(E?h:this,arguments)}return q}function Qb(s){return function(o){o=Bt(o);var h=ho(o)?Zi(o):t,E=h?h[0]:o.charAt(0),C=h?Qs(h,1).join(""):o.slice(1);return E[s]()+C}}function wo(s){return function(o){return vd(Wm(Jm(o).replace(W_,"")),s,"")}}function Hc(s){return function(){var o=arguments;switch(o.length){case 0:return new s;case 1:return new s(o[0]);case 2:return new s(o[0],o[1]);case 3:return new s(o[0],o[1],o[2]);case 4:return new s(o[0],o[1],o[2],o[3]);case 5:return new s(o[0],o[1],o[2],o[3],o[4]);case 6:return new s(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new s(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var h=mo(s.prototype),E=s.apply(h,o);return Zt(E)?E:h}}function aE(s,o,h){var E=Hc(s);function C(){for(var q=arguments.length,j=re(q),H=q,Q=_o(C);H--;)j[H]=arguments[H];var ue=q<3&&j[0]!==Q&&j[q-1]!==Q?[]:Gs(j,Q);if(q-=ue.length,q<h)return rm(s,o,Nu,C.placeholder,t,j,ue,t,t,h-q);var he=this&&this!==Ar&&this instanceof C?E:s;return bi(he,this,j)}return C}function Xb(s){return function(o,h,E){var C=Ht(o);if(!oi(o)){var q=Se(h,3);o=br(o),h=function(H){return q(C[H],H,C)}}var j=s(o,h,E);return j>-1?C[q?o[j]:j]:t}}function Zb(s){return gs(function(o){var h=o.length,E=h,C=Bi.prototype.thru;for(s&&o.reverse();E--;){var q=o[E];if(typeof q!="function")throw new qi(c);if(C&&!j&&Bu(q)=="wrapper")var j=new Bi([],!0)}for(E=j?E:h;++E<h;){q=o[E];var H=Bu(q),Q=H=="wrapper"?Yd(q):t;Q&&e0(Q[0])&&Q[1]==(k|$|X|U)&&!Q[4].length&&Q[9]==1?j=j[Bu(Q[0])].apply(j,Q[3]):j=q.length==1&&e0(q)?j[H]():j.thru(q)}return function(){var ue=arguments,he=ue[0];if(j&&ue.length==1&&je(he))return j.plant(he).value();for(var le=0,be=h?o[le].apply(this,ue):he;++le<h;)be=o[le].call(this,be);return be}})}function Nu(s,o,h,E,C,q,j,H,Q,ue){var he=o&k,le=o&F,be=o&z,we=o&($|K),Ce=o&ae,Ge=be?t:Hc(s);function Oe(){for(var Qe=arguments.length,it=re(Qe),_i=Qe;_i--;)it[_i]=arguments[_i];if(we)var $r=_o(Oe),Ei=m7(it,$r);if(E&&(it=$b(it,E,C,we)),q&&(it=Jb(it,q,j,we)),Qe-=Ei,we&&Qe<ue){var fr=Gs(it,$r);return rm(s,o,Nu,Oe.placeholder,h,it,fr,H,Q,ue-Qe)}var rn=le?h:this,ys=be?rn[s]:s;return Qe=it.length,H?it=IE(it,H):Ce&&Qe>1&&it.reverse(),he&&Q<Qe&&(it.length=Q),this&&this!==Ar&&this instanceof Oe&&(ys=Ge||Hc(ys)),ys.apply(rn,it)}return Oe}function em(s,o){return function(h,E){return T9(h,s,o(E),{})}}function Tu(s,o){return function(h,E){var C;if(h===t&&E===t)return o;if(h!==t&&(C=h),E!==t){if(C===t)return E;typeof h=="string"||typeof E=="string"?(h=yi(h),E=yi(E)):(h=Ub(h),E=Ub(E)),C=s(h,E)}return C}}function Gd(s){return gs(function(o){return o=Qt(o,mi(Se())),$e(function(h){var E=this;return s(o,function(C){return bi(C,E,h)})})})}function Lu(s,o){o=o===t?" ":yi(o);var h=o.length;if(h<2)return h?Ud(o,s):o;var E=Ud(o,_u(s/lo(o)));return ho(o)?Qs(Zi(E),0,s).join(""):E.slice(0,s)}function oE(s,o,h,E){var C=o&F,q=Hc(s);function j(){for(var H=-1,Q=arguments.length,ue=-1,he=E.length,le=re(he+Q),be=this&&this!==Ar&&this instanceof j?q:s;++ue<he;)le[ue]=E[ue];for(;Q--;)le[ue++]=arguments[++H];return bi(be,C?h:this,le)}return j}function tm(s){return function(o,h,E){return E&&typeof E!="number"&&Gr(o,h,E)&&(h=E=t),o=ms(o),h===t?(h=o,o=0):h=ms(h),E=E===t?o<h?1:-1:ms(E),G9(o,h,E,s)}}function qu(s){return function(o,h){return typeof o=="string"&&typeof h=="string"||(o=ki(o),h=ki(h)),s(o,h)}}function rm(s,o,h,E,C,q,j,H,Q,ue){var he=o&$,le=he?j:t,be=he?t:j,we=he?q:t,Ce=he?t:q;o|=he?X:te,o&=~(he?te:X),o&Y||(o&=~(F|z));var Ge=[s,o,C,we,le,Ce,be,H,Q,ue],Oe=h.apply(t,Ge);return e0(s)&&pm(Oe,Ge),Oe.placeholder=E,gm(Oe,s,o)}function $d(s){var o=pr[s];return function(h,E){if(h=ki(h),E=E==null?0:Nr(Ke(E),292),E&&gb(h)){var C=(Bt(h)+"e").split("e"),q=o(C[0]+"e"+(+C[1]+E));return C=(Bt(q)+"e").split("e"),+(C[0]+"e"+(+C[1]-E))}return o(h)}}var cE=vo&&1/hu(new vo([,-0]))[1]==M?function(s){return new vo(s)}:g0;function im(s){return function(o){var h=Tr(o);return h==ne?xd(o):h==Ve?S7(o):b7(o,s(o))}}function ps(s,o,h,E,C,q,j,H){var Q=o&z;if(!Q&&typeof s!="function")throw new qi(c);var ue=E?E.length:0;if(ue||(o&=~(X|te),E=C=t),j=j===t?j:gr(Ke(j),0),H=H===t?H:Ke(H),ue-=C?C.length:0,o&te){var he=E,le=C;E=C=t}var be=Q?t:Yd(s),we=[s,o,h,E,C,he,le,q,j,H];if(be&&xE(we,be),s=we[0],o=we[1],h=we[2],E=we[3],C=we[4],H=we[9]=we[9]===t?Q?0:s.length:gr(we[9]-ue,0),!H&&o&($|K)&&(o&=~($|K)),!o||o==F)var Ce=sE(s,o,h);else o==$||o==K?Ce=aE(s,o,H):(o==X||o==(F|X))&&!C.length?Ce=oE(s,o,h,E):Ce=Nu.apply(t,we);var Ge=be?Bb:pm;return gm(Ge(Ce,we),s,o)}function nm(s,o,h,E){return s===t||tn(s,go[h])&&!zt.call(E,h)?o:s}function sm(s,o,h,E,C,q){return Zt(s)&&Zt(o)&&(q.set(o,s),Ru(s,o,t,sm,q),q.delete(o)),s}function fE(s){return Gc(s)?t:s}function am(s,o,h,E,C,q){var j=h&O,H=s.length,Q=o.length;if(H!=Q&&!(j&&Q>H))return!1;var ue=q.get(s),he=q.get(o);if(ue&&he)return ue==o&&he==s;var le=-1,be=!0,we=h&B?new Ma:t;for(q.set(s,o),q.set(o,s);++le<H;){var Ce=s[le],Ge=o[le];if(E)var Oe=j?E(Ge,Ce,le,o,s,q):E(Ce,Ge,le,s,o,q);if(Oe!==t){if(Oe)continue;be=!1;break}if(we){if(!bd(o,function(Qe,it){if(!Oc(we,it)&&(Ce===Qe||C(Ce,Qe,h,E,q)))return we.push(it)})){be=!1;break}}else if(!(Ce===Ge||C(Ce,Ge,h,E,q))){be=!1;break}}return q.delete(s),q.delete(o),be}function uE(s,o,h,E,C,q,j){switch(h){case rt:if(s.byteLength!=o.byteLength||s.byteOffset!=o.byteOffset)return!1;s=s.buffer,o=o.buffer;case at:return!(s.byteLength!=o.byteLength||!q(new bu(s),new bu(o)));case J:case ie:case de:return tn(+s,+o);case se:return s.name==o.name&&s.message==o.message;case xe:case nt:return s==o+"";case ne:var H=xd;case Ve:var Q=E&O;if(H||(H=hu),s.size!=o.size&&!Q)return!1;var ue=j.get(s);if(ue)return ue==o;E|=B,j.set(s,o);var he=am(H(s),H(o),E,C,q,j);return j.delete(s),he;case Ae:if(Bc)return Bc.call(s)==Bc.call(o)}return!1}function hE(s,o,h,E,C,q){var j=h&O,H=Jd(s),Q=H.length,ue=Jd(o),he=ue.length;if(Q!=he&&!j)return!1;for(var le=Q;le--;){var be=H[le];if(!(j?be in o:zt.call(o,be)))return!1}var we=q.get(s),Ce=q.get(o);if(we&&Ce)return we==o&&Ce==s;var Ge=!0;q.set(s,o),q.set(o,s);for(var Oe=j;++le<Q;){be=H[le];var Qe=s[be],it=o[be];if(E)var _i=j?E(it,Qe,be,o,s,q):E(Qe,it,be,s,o,q);if(!(_i===t?Qe===it||C(Qe,it,h,E,q):_i)){Ge=!1;break}Oe||(Oe=be=="constructor")}if(Ge&&!Oe){var $r=s.constructor,Ei=o.constructor;$r!=Ei&&"constructor"in s&&"constructor"in o&&!(typeof $r=="function"&&$r instanceof $r&&typeof Ei=="function"&&Ei instanceof Ei)&&(Ge=!1)}return q.delete(s),q.delete(o),Ge}function gs(s){return r0(lm(s,t,_m),s+"")}function Jd(s){return Ib(s,br,Xd)}function Wd(s){return Ib(s,ci,om)}var Yd=xu?function(s){return xu.get(s)}:g0;function Bu(s){for(var o=s.name+"",h=bo[o],E=zt.call(bo,o)?h.length:0;E--;){var C=h[E],q=C.func;if(q==null||q==s)return C.name}return o}function _o(s){var o=zt.call(T,"placeholder")?T:s;return o.placeholder}function Se(){var s=T.iteratee||d0;return s=s===d0?Rb:s,arguments.length?s(arguments[0],arguments[1]):s}function Fu(s,o){var h=s.__data__;return yE(o)?h[typeof o=="string"?"string":"hash"]:h.map}function Qd(s){for(var o=br(s),h=o.length;h--;){var E=o[h],C=s[E];o[h]=[E,C,um(C)]}return o}function Pa(s,o){var h=E7(s,o);return Db(h)?h:t}function lE(s){var o=zt.call(s,Sa),h=s[Sa];try{s[Sa]=t;var E=!0}catch{}var C=gu.call(s);return E&&(o?s[Sa]=h:delete s[Sa]),C}var Xd=Sd?function(s){return s==null?[]:(s=Ht(s),Ks(Sd(s),function(o){return db.call(s,o)}))}:v0,om=Sd?function(s){for(var o=[];s;)Vs(o,Xd(s)),s=mu(s);return o}:v0,Tr=Vr;(Id&&Tr(new Id(new ArrayBuffer(1)))!=rt||Tc&&Tr(new Tc)!=ne||Md&&Tr(Md.resolve())!=vt||vo&&Tr(new vo)!=Ve||Lc&&Tr(new Lc)!=st)&&(Tr=function(s){var o=Vr(s),h=o==_e?s.constructor:t,E=h?Ca(h):"";if(E)switch(E){case J7:return rt;case W7:return ne;case Y7:return vt;case Q7:return Ve;case X7:return st}return o});function dE(s,o,h){for(var E=-1,C=h.length;++E<C;){var q=h[E],j=q.size;switch(q.type){case"drop":s+=j;break;case"dropRight":o-=j;break;case"take":o=Nr(o,s+j);break;case"takeRight":s=gr(s,o-j);break}}return{start:s,end:o}}function pE(s){var o=s.match(Ue);return o?o[1].split(Tt):[]}function cm(s,o,h){o=Ys(o,s);for(var E=-1,C=o.length,q=!1;++E<C;){var j=Mn(o[E]);if(!(q=s!=null&&h(s,j)))break;s=s[j]}return q||++E!=C?q:(C=s==null?0:s.length,!!C&&Vu(C)&&vs(j,C)&&(je(s)||Oa(s)))}function gE(s){var o=s.length,h=new s.constructor(o);return o&&typeof s[0]=="string"&&zt.call(s,"index")&&(h.index=s.index,h.input=s.input),h}function fm(s){return typeof s.constructor=="function"&&!Kc(s)?mo(mu(s)):{}}function vE(s,o,h){var E=s.constructor;switch(o){case at:return Vd(s);case J:case ie:return new E(+s);case rt:return Z9(s,h);case Me:case ct:case ft:case De:case ut:case ht:case Re:case lt:case dt:return Vb(s,h);case ne:return new E;case de:case nt:return new E(s);case xe:return eE(s);case Ve:return new E;case Ae:return tE(s)}}function bE(s,o){var h=o.length;if(!h)return s;var E=h-1;return o[E]=(h>1?"& ":"")+o[E],o=o.join(h>2?", ":" "),s.replace(Nt,`{
/* [wrapped with `+o+`] */
`)}function mE(s){return je(s)||Oa(s)||!!(pb&&s&&s[pb])}function vs(s,o){var h=typeof s;return o=o??A,!!o&&(h=="number"||h!="symbol"&&ni.test(s))&&s>-1&&s%1==0&&s<o}function Gr(s,o,h){if(!Zt(h))return!1;var E=typeof o;return(E=="number"?oi(h)&&vs(o,h.length):E=="string"&&o in h)?tn(h[o],s):!1}function Zd(s,o){if(je(s))return!1;var h=typeof s;return h=="number"||h=="symbol"||h=="boolean"||s==null||wi(s)?!0:Pt.test(s)||!Rt.test(s)||o!=null&&s in Ht(o)}function yE(s){var o=typeof s;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?s!=="__proto__":s===null}function e0(s){var o=Bu(s),h=T[o];if(typeof h!="function"||!(o in Xe.prototype))return!1;if(s===h)return!0;var E=Yd(h);return!!E&&s===E[0]}function wE(s){return!!ub&&ub in s}var _E=du?bs:b0;function Kc(s){var o=s&&s.constructor,h=typeof o=="function"&&o.prototype||go;return s===h}function um(s){return s===s&&!Zt(s)}function hm(s,o){return function(h){return h==null?!1:h[s]===o&&(o!==t||s in Ht(h))}}function EE(s){var o=Hu(s,function(E){return h.size===g&&h.clear(),E}),h=o.cache;return o}function xE(s,o){var h=s[1],E=o[1],C=h|E,q=C<(F|z|k),j=E==k&&h==$||E==k&&h==U&&s[7].length<=o[8]||E==(k|U)&&o[7].length<=o[8]&&h==$;if(!(q||j))return s;E&F&&(s[2]=o[2],C|=h&F?0:Y);var H=o[3];if(H){var Q=s[3];s[3]=Q?$b(Q,H,o[4]):H,s[4]=Q?Gs(s[3],m):o[4]}return H=o[5],H&&(Q=s[5],s[5]=Q?Jb(Q,H,o[6]):H,s[6]=Q?Gs(s[5],m):o[6]),H=o[7],H&&(s[7]=H),E&k&&(s[8]=s[8]==null?o[8]:Nr(s[8],o[8])),s[9]==null&&(s[9]=o[9]),s[0]=o[0],s[1]=C,s}function AE(s){var o=[];if(s!=null)for(var h in Ht(s))o.push(h);return o}function SE(s){return gu.call(s)}function lm(s,o,h){return o=gr(o===t?s.length-1:o,0),function(){for(var E=arguments,C=-1,q=gr(E.length-o,0),j=re(q);++C<q;)j[C]=E[o+C];C=-1;for(var H=re(o+1);++C<o;)H[C]=E[C];return H[o]=h(j),bi(s,this,H)}}function dm(s,o){return o.length<2?s:Ra(s,Ui(o,0,-1))}function IE(s,o){for(var h=s.length,E=Nr(o.length,h),C=ai(s);E--;){var q=o[E];s[E]=vs(q,h)?C[q]:t}return s}function t0(s,o){if(!(o==="constructor"&&typeof s[o]=="function")&&o!="__proto__")return s[o]}var pm=vm(Bb),Vc=k7||function(s,o){return Ar.setTimeout(s,o)},r0=vm(W9);function gm(s,o,h){var E=o+"";return r0(s,bE(E,ME(pE(E),h)))}function vm(s){var o=0,h=0;return function(){var E=V7(),C=f-(E-h);if(h=E,C>0){if(++o>=_)return arguments[0]}else o=0;return s.apply(t,arguments)}}function Uu(s,o){var h=-1,E=s.length,C=E-1;for(o=o===t?E:o;++h<o;){var q=Fd(h,C),j=s[q];s[q]=s[h],s[h]=j}return s.length=o,s}var bm=EE(function(s){var o=[];return s.charCodeAt(0)===46&&o.push(""),s.replace(Fe,function(h,E,C,q){o.push(C?q.replace(qt,"$1"):E||h)}),o});function Mn(s){if(typeof s=="string"||wi(s))return s;var o=s+"";return o=="0"&&1/s==-M?"-0":o}function Ca(s){if(s!=null){try{return pu.call(s)}catch{}try{return s+""}catch{}}return""}function ME(s,o){return Li(ee,function(h){var E="_."+h[0];o&h[1]&&!fu(s,E)&&s.push(E)}),s.sort()}function mm(s){if(s instanceof Xe)return s.clone();var o=new Bi(s.__wrapped__,s.__chain__);return o.__actions__=ai(s.__actions__),o.__index__=s.__index__,o.__values__=s.__values__,o}function DE(s,o,h){(h?Gr(s,o,h):o===t)?o=1:o=gr(Ke(o),0);var E=s==null?0:s.length;if(!E||o<1)return[];for(var C=0,q=0,j=re(_u(E/o));C<E;)j[q++]=Ui(s,C,C+=o);return j}function RE(s){for(var o=-1,h=s==null?0:s.length,E=0,C=[];++o<h;){var q=s[o];q&&(C[E++]=q)}return C}function PE(){var s=arguments.length;if(!s)return[];for(var o=re(s-1),h=arguments[0],E=s;E--;)o[E-1]=arguments[E];return Vs(je(h)?ai(h):[h],Sr(o,1))}var CE=$e(function(s,o){return cr(s)?Uc(s,Sr(o,1,cr,!0)):[]}),OE=$e(function(s,o){var h=zi(o);return cr(h)&&(h=t),cr(s)?Uc(s,Sr(o,1,cr,!0),Se(h,2)):[]}),NE=$e(function(s,o){var h=zi(o);return cr(h)&&(h=t),cr(s)?Uc(s,Sr(o,1,cr,!0),t,h):[]});function TE(s,o,h){var E=s==null?0:s.length;return E?(o=h||o===t?1:Ke(o),Ui(s,o<0?0:o,E)):[]}function LE(s,o,h){var E=s==null?0:s.length;return E?(o=h||o===t?1:Ke(o),o=E-o,Ui(s,0,o<0?0:o)):[]}function qE(s,o){return s&&s.length?Cu(s,Se(o,3),!0,!0):[]}function BE(s,o){return s&&s.length?Cu(s,Se(o,3),!0):[]}function FE(s,o,h,E){var C=s==null?0:s.length;return C?(h&&typeof h!="number"&&Gr(s,o,h)&&(h=0,E=C),P9(s,o,h,E)):[]}function ym(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var C=h==null?0:Ke(h);return C<0&&(C=gr(E+C,0)),uu(s,Se(o,3),C)}function wm(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var C=E-1;return h!==t&&(C=Ke(h),C=h<0?gr(E+C,0):Nr(C,E-1)),uu(s,Se(o,3),C,!0)}function _m(s){var o=s==null?0:s.length;return o?Sr(s,1):[]}function UE(s){var o=s==null?0:s.length;return o?Sr(s,M):[]}function zE(s,o){var h=s==null?0:s.length;return h?(o=o===t?1:Ke(o),Sr(s,o)):[]}function kE(s){for(var o=-1,h=s==null?0:s.length,E={};++o<h;){var C=s[o];E[C[0]]=C[1]}return E}function Em(s){return s&&s.length?s[0]:t}function jE(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var C=h==null?0:Ke(h);return C<0&&(C=gr(E+C,0)),uo(s,o,C)}function HE(s){var o=s==null?0:s.length;return o?Ui(s,0,-1):[]}var KE=$e(function(s){var o=Qt(s,Hd);return o.length&&o[0]===s[0]?Nd(o):[]}),VE=$e(function(s){var o=zi(s),h=Qt(s,Hd);return o===zi(h)?o=t:h.pop(),h.length&&h[0]===s[0]?Nd(h,Se(o,2)):[]}),GE=$e(function(s){var o=zi(s),h=Qt(s,Hd);return o=typeof o=="function"?o:t,o&&h.pop(),h.length&&h[0]===s[0]?Nd(h,t,o):[]});function $E(s,o){return s==null?"":H7.call(s,o)}function zi(s){var o=s==null?0:s.length;return o?s[o-1]:t}function JE(s,o,h){var E=s==null?0:s.length;if(!E)return-1;var C=E;return h!==t&&(C=Ke(h),C=C<0?gr(E+C,0):Nr(C,E-1)),o===o?M7(s,o,C):uu(s,rb,C,!0)}function WE(s,o){return s&&s.length?Nb(s,Ke(o)):t}var YE=$e(xm);function xm(s,o){return s&&s.length&&o&&o.length?Bd(s,o):s}function QE(s,o,h){return s&&s.length&&o&&o.length?Bd(s,o,Se(h,2)):s}function XE(s,o,h){return s&&s.length&&o&&o.length?Bd(s,o,t,h):s}var ZE=gs(function(s,o){var h=s==null?0:s.length,E=Rd(s,o);return qb(s,Qt(o,function(C){return vs(C,h)?+C:C}).sort(Gb)),E});function ex(s,o){var h=[];if(!(s&&s.length))return h;var E=-1,C=[],q=s.length;for(o=Se(o,3);++E<q;){var j=s[E];o(j,E,s)&&(h.push(j),C.push(E))}return qb(s,C),h}function i0(s){return s==null?s:$7.call(s)}function tx(s,o,h){var E=s==null?0:s.length;return E?(h&&typeof h!="number"&&Gr(s,o,h)?(o=0,h=E):(o=o==null?0:Ke(o),h=h===t?E:Ke(h)),Ui(s,o,h)):[]}function rx(s,o){return Pu(s,o)}function ix(s,o,h){return zd(s,o,Se(h,2))}function nx(s,o){var h=s==null?0:s.length;if(h){var E=Pu(s,o);if(E<h&&tn(s[E],o))return E}return-1}function sx(s,o){return Pu(s,o,!0)}function ax(s,o,h){return zd(s,o,Se(h,2),!0)}function ox(s,o){var h=s==null?0:s.length;if(h){var E=Pu(s,o,!0)-1;if(tn(s[E],o))return E}return-1}function cx(s){return s&&s.length?Fb(s):[]}function fx(s,o){return s&&s.length?Fb(s,Se(o,2)):[]}function ux(s){var o=s==null?0:s.length;return o?Ui(s,1,o):[]}function hx(s,o,h){return s&&s.length?(o=h||o===t?1:Ke(o),Ui(s,0,o<0?0:o)):[]}function lx(s,o,h){var E=s==null?0:s.length;return E?(o=h||o===t?1:Ke(o),o=E-o,Ui(s,o<0?0:o,E)):[]}function dx(s,o){return s&&s.length?Cu(s,Se(o,3),!1,!0):[]}function px(s,o){return s&&s.length?Cu(s,Se(o,3)):[]}var gx=$e(function(s){return Ws(Sr(s,1,cr,!0))}),vx=$e(function(s){var o=zi(s);return cr(o)&&(o=t),Ws(Sr(s,1,cr,!0),Se(o,2))}),bx=$e(function(s){var o=zi(s);return o=typeof o=="function"?o:t,Ws(Sr(s,1,cr,!0),t,o)});function mx(s){return s&&s.length?Ws(s):[]}function yx(s,o){return s&&s.length?Ws(s,Se(o,2)):[]}function wx(s,o){return o=typeof o=="function"?o:t,s&&s.length?Ws(s,t,o):[]}function n0(s){if(!(s&&s.length))return[];var o=0;return s=Ks(s,function(h){if(cr(h))return o=gr(h.length,o),!0}),_d(o,function(h){return Qt(s,md(h))})}function Am(s,o){if(!(s&&s.length))return[];var h=n0(s);return o==null?h:Qt(h,function(E){return bi(o,t,E)})}var _x=$e(function(s,o){return cr(s)?Uc(s,o):[]}),Ex=$e(function(s){return jd(Ks(s,cr))}),xx=$e(function(s){var o=zi(s);return cr(o)&&(o=t),jd(Ks(s,cr),Se(o,2))}),Ax=$e(function(s){var o=zi(s);return o=typeof o=="function"?o:t,jd(Ks(s,cr),t,o)}),Sx=$e(n0);function Ix(s,o){return jb(s||[],o||[],Fc)}function Mx(s,o){return jb(s||[],o||[],jc)}var Dx=$e(function(s){var o=s.length,h=o>1?s[o-1]:t;return h=typeof h=="function"?(s.pop(),h):t,Am(s,h)});function Sm(s){var o=T(s);return o.__chain__=!0,o}function Rx(s,o){return o(s),s}function zu(s,o){return o(s)}var Px=gs(function(s){var o=s.length,h=o?s[0]:0,E=this.__wrapped__,C=function(q){return Rd(q,s)};return o>1||this.__actions__.length||!(E instanceof Xe)||!vs(h)?this.thru(C):(E=E.slice(h,+h+(o?1:0)),E.__actions__.push({func:zu,args:[C],thisArg:t}),new Bi(E,this.__chain__).thru(function(q){return o&&!q.length&&q.push(t),q}))});function Cx(){return Sm(this)}function Ox(){return new Bi(this.value(),this.__chain__)}function Nx(){this.__values__===t&&(this.__values__=Um(this.value()));var s=this.__index__>=this.__values__.length,o=s?t:this.__values__[this.__index__++];return{done:s,value:o}}function Tx(){return this}function Lx(s){for(var o,h=this;h instanceof Su;){var E=mm(h);E.__index__=0,E.__values__=t,o?C.__wrapped__=E:o=E;var C=E;h=h.__wrapped__}return C.__wrapped__=s,o}function qx(){var s=this.__wrapped__;if(s instanceof Xe){var o=s;return this.__actions__.length&&(o=new Xe(this)),o=o.reverse(),o.__actions__.push({func:zu,args:[i0],thisArg:t}),new Bi(o,this.__chain__)}return this.thru(i0)}function Bx(){return kb(this.__wrapped__,this.__actions__)}var Fx=Ou(function(s,o,h){zt.call(s,h)?++s[h]:ds(s,h,1)});function Ux(s,o,h){var E=je(s)?eb:R9;return h&&Gr(s,o,h)&&(o=t),E(s,Se(o,3))}function zx(s,o){var h=je(s)?Ks:Ab;return h(s,Se(o,3))}var kx=Xb(ym),jx=Xb(wm);function Hx(s,o){return Sr(ku(s,o),1)}function Kx(s,o){return Sr(ku(s,o),M)}function Vx(s,o,h){return h=h===t?1:Ke(h),Sr(ku(s,o),h)}function Im(s,o){var h=je(s)?Li:Js;return h(s,Se(o,3))}function Mm(s,o){var h=je(s)?u7:xb;return h(s,Se(o,3))}var Gx=Ou(function(s,o,h){zt.call(s,h)?s[h].push(o):ds(s,h,[o])});function $x(s,o,h,E){s=oi(s)?s:xo(s),h=h&&!E?Ke(h):0;var C=s.length;return h<0&&(h=gr(C+h,0)),Gu(s)?h<=C&&s.indexOf(o,h)>-1:!!C&&uo(s,o,h)>-1}var Jx=$e(function(s,o,h){var E=-1,C=typeof o=="function",q=oi(s)?re(s.length):[];return Js(s,function(j){q[++E]=C?bi(o,j,h):zc(j,o,h)}),q}),Wx=Ou(function(s,o,h){ds(s,h,o)});function ku(s,o){var h=je(s)?Qt:Pb;return h(s,Se(o,3))}function Yx(s,o,h,E){return s==null?[]:(je(o)||(o=o==null?[]:[o]),h=E?t:h,je(h)||(h=h==null?[]:[h]),Tb(s,o,h))}var Qx=Ou(function(s,o,h){s[h?0:1].push(o)},function(){return[[],[]]});function Xx(s,o,h){var E=je(s)?vd:nb,C=arguments.length<3;return E(s,Se(o,4),h,C,Js)}function Zx(s,o,h){var E=je(s)?h7:nb,C=arguments.length<3;return E(s,Se(o,4),h,C,xb)}function eA(s,o){var h=je(s)?Ks:Ab;return h(s,Ku(Se(o,3)))}function tA(s){var o=je(s)?yb:$9;return o(s)}function rA(s,o,h){(h?Gr(s,o,h):o===t)?o=1:o=Ke(o);var E=je(s)?A9:J9;return E(s,o)}function iA(s){var o=je(s)?S9:Y9;return o(s)}function nA(s){if(s==null)return 0;if(oi(s))return Gu(s)?lo(s):s.length;var o=Tr(s);return o==ne||o==Ve?s.size:Ld(s).length}function sA(s,o,h){var E=je(s)?bd:Q9;return h&&Gr(s,o,h)&&(o=t),E(s,Se(o,3))}var aA=$e(function(s,o){if(s==null)return[];var h=o.length;return h>1&&Gr(s,o[0],o[1])?o=[]:h>2&&Gr(o[0],o[1],o[2])&&(o=[o[0]]),Tb(s,Sr(o,1),[])}),ju=z7||function(){return Ar.Date.now()};function oA(s,o){if(typeof o!="function")throw new qi(c);return s=Ke(s),function(){if(--s<1)return o.apply(this,arguments)}}function Dm(s,o,h){return o=h?t:o,o=s&&o==null?s.length:o,ps(s,k,t,t,t,t,o)}function Rm(s,o){var h;if(typeof o!="function")throw new qi(c);return s=Ke(s),function(){return--s>0&&(h=o.apply(this,arguments)),s<=1&&(o=t),h}}var s0=$e(function(s,o,h){var E=F;if(h.length){var C=Gs(h,_o(s0));E|=X}return ps(s,E,o,h,C)}),Pm=$e(function(s,o,h){var E=F|z;if(h.length){var C=Gs(h,_o(Pm));E|=X}return ps(o,E,s,h,C)});function Cm(s,o,h){o=h?t:o;var E=ps(s,$,t,t,t,t,t,o);return E.placeholder=Cm.placeholder,E}function Om(s,o,h){o=h?t:o;var E=ps(s,K,t,t,t,t,t,o);return E.placeholder=Om.placeholder,E}function Nm(s,o,h){var E,C,q,j,H,Q,ue=0,he=!1,le=!1,be=!0;if(typeof s!="function")throw new qi(c);o=ki(o)||0,Zt(h)&&(he=!!h.leading,le="maxWait"in h,q=le?gr(ki(h.maxWait)||0,o):q,be="trailing"in h?!!h.trailing:be);function we(fr){var rn=E,ys=C;return E=C=t,ue=fr,j=s.apply(ys,rn),j}function Ce(fr){return ue=fr,H=Vc(Qe,o),he?we(fr):j}function Ge(fr){var rn=fr-Q,ys=fr-ue,Xm=o-rn;return le?Nr(Xm,q-ys):Xm}function Oe(fr){var rn=fr-Q,ys=fr-ue;return Q===t||rn>=o||rn<0||le&&ys>=q}function Qe(){var fr=ju();if(Oe(fr))return it(fr);H=Vc(Qe,Ge(fr))}function it(fr){return H=t,be&&E?we(fr):(E=C=t,j)}function _i(){H!==t&&Hb(H),ue=0,E=Q=C=H=t}function $r(){return H===t?j:it(ju())}function Ei(){var fr=ju(),rn=Oe(fr);if(E=arguments,C=this,Q=fr,rn){if(H===t)return Ce(Q);if(le)return Hb(H),H=Vc(Qe,o),we(Q)}return H===t&&(H=Vc(Qe,o)),j}return Ei.cancel=_i,Ei.flush=$r,Ei}var cA=$e(function(s,o){return Eb(s,1,o)}),fA=$e(function(s,o,h){return Eb(s,ki(o)||0,h)});function uA(s){return ps(s,ae)}function Hu(s,o){if(typeof s!="function"||o!=null&&typeof o!="function")throw new qi(c);var h=function(){var E=arguments,C=o?o.apply(this,E):E[0],q=h.cache;if(q.has(C))return q.get(C);var j=s.apply(this,E);return h.cache=q.set(C,j)||q,j};return h.cache=new(Hu.Cache||ls),h}Hu.Cache=ls;function Ku(s){if(typeof s!="function")throw new qi(c);return function(){var o=arguments;switch(o.length){case 0:return!s.call(this);case 1:return!s.call(this,o[0]);case 2:return!s.call(this,o[0],o[1]);case 3:return!s.call(this,o[0],o[1],o[2])}return!s.apply(this,o)}}function hA(s){return Rm(2,s)}var lA=X9(function(s,o){o=o.length==1&&je(o[0])?Qt(o[0],mi(Se())):Qt(Sr(o,1),mi(Se()));var h=o.length;return $e(function(E){for(var C=-1,q=Nr(E.length,h);++C<q;)E[C]=o[C].call(this,E[C]);return bi(s,this,E)})}),a0=$e(function(s,o){var h=Gs(o,_o(a0));return ps(s,X,t,o,h)}),Tm=$e(function(s,o){var h=Gs(o,_o(Tm));return ps(s,te,t,o,h)}),dA=gs(function(s,o){return ps(s,U,t,t,t,o)});function pA(s,o){if(typeof s!="function")throw new qi(c);return o=o===t?o:Ke(o),$e(s,o)}function gA(s,o){if(typeof s!="function")throw new qi(c);return o=o==null?0:gr(Ke(o),0),$e(function(h){var E=h[o],C=Qs(h,0,o);return E&&Vs(C,E),bi(s,this,C)})}function vA(s,o,h){var E=!0,C=!0;if(typeof s!="function")throw new qi(c);return Zt(h)&&(E="leading"in h?!!h.leading:E,C="trailing"in h?!!h.trailing:C),Nm(s,o,{leading:E,maxWait:o,trailing:C})}function bA(s){return Dm(s,1)}function mA(s,o){return a0(Kd(o),s)}function yA(){if(!arguments.length)return[];var s=arguments[0];return je(s)?s:[s]}function wA(s){return Fi(s,I)}function _A(s,o){return o=typeof o=="function"?o:t,Fi(s,I,o)}function EA(s){return Fi(s,w|I)}function xA(s,o){return o=typeof o=="function"?o:t,Fi(s,w|I,o)}function AA(s,o){return o==null||_b(s,o,br(o))}function tn(s,o){return s===o||s!==s&&o!==o}var SA=qu(Od),IA=qu(function(s,o){return s>=o}),Oa=Mb(function(){return arguments}())?Mb:function(s){return tr(s)&&zt.call(s,"callee")&&!db.call(s,"callee")},je=re.isArray,MA=Jv?mi(Jv):L9;function oi(s){return s!=null&&Vu(s.length)&&!bs(s)}function cr(s){return tr(s)&&oi(s)}function DA(s){return s===!0||s===!1||tr(s)&&Vr(s)==J}var Xs=j7||b0,RA=Wv?mi(Wv):q9;function PA(s){return tr(s)&&s.nodeType===1&&!Gc(s)}function CA(s){if(s==null)return!0;if(oi(s)&&(je(s)||typeof s=="string"||typeof s.splice=="function"||Xs(s)||Eo(s)||Oa(s)))return!s.length;var o=Tr(s);if(o==ne||o==Ve)return!s.size;if(Kc(s))return!Ld(s).length;for(var h in s)if(zt.call(s,h))return!1;return!0}function OA(s,o){return kc(s,o)}function NA(s,o,h){h=typeof h=="function"?h:t;var E=h?h(s,o):t;return E===t?kc(s,o,t,h):!!E}function o0(s){if(!tr(s))return!1;var o=Vr(s);return o==se||o==fe||typeof s.message=="string"&&typeof s.name=="string"&&!Gc(s)}function TA(s){return typeof s=="number"&&gb(s)}function bs(s){if(!Zt(s))return!1;var o=Vr(s);return o==ce||o==pe||o==G||o==Et}function Lm(s){return typeof s=="number"&&s==Ke(s)}function Vu(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=A}function Zt(s){var o=typeof s;return s!=null&&(o=="object"||o=="function")}function tr(s){return s!=null&&typeof s=="object"}var qm=Yv?mi(Yv):F9;function LA(s,o){return s===o||Td(s,o,Qd(o))}function qA(s,o,h){return h=typeof h=="function"?h:t,Td(s,o,Qd(o),h)}function BA(s){return Bm(s)&&s!=+s}function FA(s){if(_E(s))throw new ke(a);return Db(s)}function UA(s){return s===null}function zA(s){return s==null}function Bm(s){return typeof s=="number"||tr(s)&&Vr(s)==de}function Gc(s){if(!tr(s)||Vr(s)!=_e)return!1;var o=mu(s);if(o===null)return!0;var h=zt.call(o,"constructor")&&o.constructor;return typeof h=="function"&&h instanceof h&&pu.call(h)==q7}var c0=Qv?mi(Qv):U9;function kA(s){return Lm(s)&&s>=-A&&s<=A}var Fm=Xv?mi(Xv):z9;function Gu(s){return typeof s=="string"||!je(s)&&tr(s)&&Vr(s)==nt}function wi(s){return typeof s=="symbol"||tr(s)&&Vr(s)==Ae}var Eo=Zv?mi(Zv):k9;function jA(s){return s===t}function HA(s){return tr(s)&&Tr(s)==st}function KA(s){return tr(s)&&Vr(s)==Le}var VA=qu(qd),GA=qu(function(s,o){return s<=o});function Um(s){if(!s)return[];if(oi(s))return Gu(s)?Zi(s):ai(s);if(Nc&&s[Nc])return A7(s[Nc]());var o=Tr(s),h=o==ne?xd:o==Ve?hu:xo;return h(s)}function ms(s){if(!s)return s===0?s:0;if(s=ki(s),s===M||s===-M){var o=s<0?-1:1;return o*v}return s===s?s:0}function Ke(s){var o=ms(s),h=o%1;return o===o?h?o-h:o:0}function zm(s){return s?Da(Ke(s),0,y):0}function ki(s){if(typeof s=="number")return s;if(wi(s))return x;if(Zt(s)){var o=typeof s.valueOf=="function"?s.valueOf():s;s=Zt(o)?o+"":o}if(typeof s!="string")return s===0?s:+s;s=sb(s);var h=ti.test(s);return h||ii.test(s)?o7(s.slice(2),h?2:8):ei.test(s)?x:+s}function km(s){return In(s,ci(s))}function $A(s){return s?Da(Ke(s),-A,A):s===0?s:0}function Bt(s){return s==null?"":yi(s)}var JA=yo(function(s,o){if(Kc(o)||oi(o)){In(o,br(o),s);return}for(var h in o)zt.call(o,h)&&Fc(s,h,o[h])}),jm=yo(function(s,o){In(o,ci(o),s)}),$u=yo(function(s,o,h,E){In(o,ci(o),s,E)}),WA=yo(function(s,o,h,E){In(o,br(o),s,E)}),YA=gs(Rd);function QA(s,o){var h=mo(s);return o==null?h:wb(h,o)}var XA=$e(function(s,o){s=Ht(s);var h=-1,E=o.length,C=E>2?o[2]:t;for(C&&Gr(o[0],o[1],C)&&(E=1);++h<E;)for(var q=o[h],j=ci(q),H=-1,Q=j.length;++H<Q;){var ue=j[H],he=s[ue];(he===t||tn(he,go[ue])&&!zt.call(s,ue))&&(s[ue]=q[ue])}return s}),ZA=$e(function(s){return s.push(t,sm),bi(Hm,t,s)});function eS(s,o){return tb(s,Se(o,3),Sn)}function tS(s,o){return tb(s,Se(o,3),Cd)}function rS(s,o){return s==null?s:Pd(s,Se(o,3),ci)}function iS(s,o){return s==null?s:Sb(s,Se(o,3),ci)}function nS(s,o){return s&&Sn(s,Se(o,3))}function sS(s,o){return s&&Cd(s,Se(o,3))}function aS(s){return s==null?[]:Du(s,br(s))}function oS(s){return s==null?[]:Du(s,ci(s))}function f0(s,o,h){var E=s==null?t:Ra(s,o);return E===t?h:E}function cS(s,o){return s!=null&&cm(s,o,C9)}function u0(s,o){return s!=null&&cm(s,o,O9)}var fS=em(function(s,o,h){o!=null&&typeof o.toString!="function"&&(o=gu.call(o)),s[o]=h},l0(fi)),uS=em(function(s,o,h){o!=null&&typeof o.toString!="function"&&(o=gu.call(o)),zt.call(s,o)?s[o].push(h):s[o]=[h]},Se),hS=$e(zc);function br(s){return oi(s)?mb(s):Ld(s)}function ci(s){return oi(s)?mb(s,!0):j9(s)}function lS(s,o){var h={};return o=Se(o,3),Sn(s,function(E,C,q){ds(h,o(E,C,q),E)}),h}function dS(s,o){var h={};return o=Se(o,3),Sn(s,function(E,C,q){ds(h,C,o(E,C,q))}),h}var pS=yo(function(s,o,h){Ru(s,o,h)}),Hm=yo(function(s,o,h,E){Ru(s,o,h,E)}),gS=gs(function(s,o){var h={};if(s==null)return h;var E=!1;o=Qt(o,function(q){return q=Ys(q,s),E||(E=q.length>1),q}),In(s,Wd(s),h),E&&(h=Fi(h,w|R|I,fE));for(var C=o.length;C--;)kd(h,o[C]);return h});function vS(s,o){return Km(s,Ku(Se(o)))}var bS=gs(function(s,o){return s==null?{}:K9(s,o)});function Km(s,o){if(s==null)return{};var h=Qt(Wd(s),function(E){return[E]});return o=Se(o),Lb(s,h,function(E,C){return o(E,C[0])})}function mS(s,o,h){o=Ys(o,s);var E=-1,C=o.length;for(C||(C=1,s=t);++E<C;){var q=s==null?t:s[Mn(o[E])];q===t&&(E=C,q=h),s=bs(q)?q.call(s):q}return s}function yS(s,o,h){return s==null?s:jc(s,o,h)}function wS(s,o,h,E){return E=typeof E=="function"?E:t,s==null?s:jc(s,o,h,E)}var Vm=im(br),Gm=im(ci);function _S(s,o,h){var E=je(s),C=E||Xs(s)||Eo(s);if(o=Se(o,4),h==null){var q=s&&s.constructor;C?h=E?new q:[]:Zt(s)?h=bs(q)?mo(mu(s)):{}:h={}}return(C?Li:Sn)(s,function(j,H,Q){return o(h,j,H,Q)}),h}function ES(s,o){return s==null?!0:kd(s,o)}function xS(s,o,h){return s==null?s:zb(s,o,Kd(h))}function AS(s,o,h,E){return E=typeof E=="function"?E:t,s==null?s:zb(s,o,Kd(h),E)}function xo(s){return s==null?[]:Ed(s,br(s))}function SS(s){return s==null?[]:Ed(s,ci(s))}function IS(s,o,h){return h===t&&(h=o,o=t),h!==t&&(h=ki(h),h=h===h?h:0),o!==t&&(o=ki(o),o=o===o?o:0),Da(ki(s),o,h)}function MS(s,o,h){return o=ms(o),h===t?(h=o,o=0):h=ms(h),s=ki(s),N9(s,o,h)}function DS(s,o,h){if(h&&typeof h!="boolean"&&Gr(s,o,h)&&(o=h=t),h===t&&(typeof o=="boolean"?(h=o,o=t):typeof s=="boolean"&&(h=s,s=t)),s===t&&o===t?(s=0,o=1):(s=ms(s),o===t?(o=s,s=0):o=ms(o)),s>o){var E=s;s=o,o=E}if(h||s%1||o%1){var C=vb();return Nr(s+C*(o-s+a7("1e-"+((C+"").length-1))),o)}return Fd(s,o)}var RS=wo(function(s,o,h){return o=o.toLowerCase(),s+(h?$m(o):o)});function $m(s){return h0(Bt(s).toLowerCase())}function Jm(s){return s=Bt(s),s&&s.replace(si,y7).replace(Y_,"")}function PS(s,o,h){s=Bt(s),o=yi(o);var E=s.length;h=h===t?E:Da(Ke(h),0,E);var C=h;return h-=o.length,h>=0&&s.slice(h,C)==o}function CS(s){return s=Bt(s),s&&Be.test(s)?s.replace(bt,w7):s}function OS(s){return s=Bt(s),s&&Ct.test(s)?s.replace(pt,"\\$&"):s}var NS=wo(function(s,o,h){return s+(h?"-":"")+o.toLowerCase()}),TS=wo(function(s,o,h){return s+(h?" ":"")+o.toLowerCase()}),LS=Qb("toLowerCase");function qS(s,o,h){s=Bt(s),o=Ke(o);var E=o?lo(s):0;if(!o||E>=o)return s;var C=(o-E)/2;return Lu(Eu(C),h)+s+Lu(_u(C),h)}function BS(s,o,h){s=Bt(s),o=Ke(o);var E=o?lo(s):0;return o&&E<o?s+Lu(o-E,h):s}function FS(s,o,h){s=Bt(s),o=Ke(o);var E=o?lo(s):0;return o&&E<o?Lu(o-E,h)+s:s}function US(s,o,h){return h||o==null?o=0:o&&(o=+o),G7(Bt(s).replace(Pe,""),o||0)}function zS(s,o,h){return(h?Gr(s,o,h):o===t)?o=1:o=Ke(o),Ud(Bt(s),o)}function kS(){var s=arguments,o=Bt(s[0]);return s.length<3?o:o.replace(s[1],s[2])}var jS=wo(function(s,o,h){return s+(h?"_":"")+o.toLowerCase()});function HS(s,o,h){return h&&typeof h!="number"&&Gr(s,o,h)&&(o=h=t),h=h===t?y:h>>>0,h?(s=Bt(s),s&&(typeof o=="string"||o!=null&&!c0(o))&&(o=yi(o),!o&&ho(s))?Qs(Zi(s),0,h):s.split(o,h)):[]}var KS=wo(function(s,o,h){return s+(h?" ":"")+h0(o)});function VS(s,o,h){return s=Bt(s),h=h==null?0:Da(Ke(h),0,s.length),o=yi(o),s.slice(h,h+o.length)==o}function GS(s,o,h){var E=T.templateSettings;h&&Gr(s,o,h)&&(o=t),s=Bt(s),o=$u({},o,E,nm);var C=$u({},o.imports,E.imports,nm),q=br(C),j=Ed(C,q),H,Q,ue=0,he=o.interpolate||Oi,le="__p += '",be=Ad((o.escape||Oi).source+"|"+he.source+"|"+(he===Te?mt:Oi).source+"|"+(o.evaluate||Oi).source+"|$","g"),we="//# sourceURL="+(zt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++t7+"]")+`
`;s.replace(be,function(Oe,Qe,it,_i,$r,Ei){return it||(it=_i),le+=s.slice(ue,Ei).replace(ss,_7),Qe&&(H=!0,le+=`' +
__e(`+Qe+`) +
'`),$r&&(Q=!0,le+=`';
`+$r+`;
__p += '`),it&&(le+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),ue=Ei+Oe.length,Oe}),le+=`';
`;var Ce=zt.call(o,"variable")&&o.variable;if(!Ce)le=`with (obj) {
`+le+`
}
`;else if(ze.test(Ce))throw new ke(u);le=(Q?le.replace(qe,""):le).replace(At,"$1").replace(St,"$1;"),le="function("+(Ce||"obj")+`) {
`+(Ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+le+`return __p
}`;var Ge=Ym(function(){return yt(q,we+"return "+le).apply(t,j)});if(Ge.source=le,o0(Ge))throw Ge;return Ge}function $S(s){return Bt(s).toLowerCase()}function JS(s){return Bt(s).toUpperCase()}function WS(s,o,h){if(s=Bt(s),s&&(h||o===t))return sb(s);if(!s||!(o=yi(o)))return s;var E=Zi(s),C=Zi(o),q=ab(E,C),j=ob(E,C)+1;return Qs(E,q,j).join("")}function YS(s,o,h){if(s=Bt(s),s&&(h||o===t))return s.slice(0,fb(s)+1);if(!s||!(o=yi(o)))return s;var E=Zi(s),C=ob(E,Zi(o))+1;return Qs(E,0,C).join("")}function QS(s,o,h){if(s=Bt(s),s&&(h||o===t))return s.replace(Pe,"");if(!s||!(o=yi(o)))return s;var E=Zi(s),C=ab(E,Zi(o));return Qs(E,C).join("")}function XS(s,o){var h=P,E=d;if(Zt(o)){var C="separator"in o?o.separator:C;h="length"in o?Ke(o.length):h,E="omission"in o?yi(o.omission):E}s=Bt(s);var q=s.length;if(ho(s)){var j=Zi(s);q=j.length}if(h>=q)return s;var H=h-lo(E);if(H<1)return E;var Q=j?Qs(j,0,H).join(""):s.slice(0,H);if(C===t)return Q+E;if(j&&(H+=Q.length-H),c0(C)){if(s.slice(H).search(C)){var ue,he=Q;for(C.global||(C=Ad(C.source,Bt(gt.exec(C))+"g")),C.lastIndex=0;ue=C.exec(he);)var le=ue.index;Q=Q.slice(0,le===t?H:le)}}else if(s.indexOf(yi(C),H)!=H){var be=Q.lastIndexOf(C);be>-1&&(Q=Q.slice(0,be))}return Q+E}function ZS(s){return s=Bt(s),s&&It.test(s)?s.replace(Ne,D7):s}var eI=wo(function(s,o,h){return s+(h?" ":"")+o.toUpperCase()}),h0=Qb("toUpperCase");function Wm(s,o,h){return s=Bt(s),o=h?t:o,o===t?x7(s)?C7(s):p7(s):s.match(o)||[]}var Ym=$e(function(s,o){try{return bi(s,t,o)}catch(h){return o0(h)?h:new ke(h)}}),tI=gs(function(s,o){return Li(o,function(h){h=Mn(h),ds(s,h,s0(s[h],s))}),s});function rI(s){var o=s==null?0:s.length,h=Se();return s=o?Qt(s,function(E){if(typeof E[1]!="function")throw new qi(c);return[h(E[0]),E[1]]}):[],$e(function(E){for(var C=-1;++C<o;){var q=s[C];if(bi(q[0],this,E))return bi(q[1],this,E)}})}function iI(s){return D9(Fi(s,w))}function l0(s){return function(){return s}}function nI(s,o){return s==null||s!==s?o:s}var sI=Zb(),aI=Zb(!0);function fi(s){return s}function d0(s){return Rb(typeof s=="function"?s:Fi(s,w))}function oI(s){return Cb(Fi(s,w))}function cI(s,o){return Ob(s,Fi(o,w))}var fI=$e(function(s,o){return function(h){return zc(h,s,o)}}),uI=$e(function(s,o){return function(h){return zc(s,h,o)}});function p0(s,o,h){var E=br(o),C=Du(o,E);h==null&&!(Zt(o)&&(C.length||!E.length))&&(h=o,o=s,s=this,C=Du(o,br(o)));var q=!(Zt(h)&&"chain"in h)||!!h.chain,j=bs(s);return Li(C,function(H){var Q=o[H];s[H]=Q,j&&(s.prototype[H]=function(){var ue=this.__chain__;if(q||ue){var he=s(this.__wrapped__),le=he.__actions__=ai(this.__actions__);return le.push({func:Q,args:arguments,thisArg:s}),he.__chain__=ue,he}return Q.apply(s,Vs([this.value()],arguments))})}),s}function hI(){return Ar._===this&&(Ar._=B7),this}function g0(){}function lI(s){return s=Ke(s),$e(function(o){return Nb(o,s)})}var dI=Gd(Qt),pI=Gd(eb),gI=Gd(bd);function Qm(s){return Zd(s)?md(Mn(s)):V9(s)}function vI(s){return function(o){return s==null?t:Ra(s,o)}}var bI=tm(),mI=tm(!0);function v0(){return[]}function b0(){return!1}function yI(){return{}}function wI(){return""}function _I(){return!0}function EI(s,o){if(s=Ke(s),s<1||s>A)return[];var h=y,E=Nr(s,y);o=Se(o),s-=y;for(var C=_d(E,o);++h<s;)o(h);return C}function xI(s){return je(s)?Qt(s,Mn):wi(s)?[s]:ai(bm(Bt(s)))}function AI(s){var o=++L7;return Bt(s)+o}var SI=Tu(function(s,o){return s+o},0),II=$d("ceil"),MI=Tu(function(s,o){return s/o},1),DI=$d("floor");function RI(s){return s&&s.length?Mu(s,fi,Od):t}function PI(s,o){return s&&s.length?Mu(s,Se(o,2),Od):t}function CI(s){return ib(s,fi)}function OI(s,o){return ib(s,Se(o,2))}function NI(s){return s&&s.length?Mu(s,fi,qd):t}function TI(s,o){return s&&s.length?Mu(s,Se(o,2),qd):t}var LI=Tu(function(s,o){return s*o},1),qI=$d("round"),BI=Tu(function(s,o){return s-o},0);function FI(s){return s&&s.length?wd(s,fi):0}function UI(s,o){return s&&s.length?wd(s,Se(o,2)):0}return T.after=oA,T.ary=Dm,T.assign=JA,T.assignIn=jm,T.assignInWith=$u,T.assignWith=WA,T.at=YA,T.before=Rm,T.bind=s0,T.bindAll=tI,T.bindKey=Pm,T.castArray=yA,T.chain=Sm,T.chunk=DE,T.compact=RE,T.concat=PE,T.cond=rI,T.conforms=iI,T.constant=l0,T.countBy=Fx,T.create=QA,T.curry=Cm,T.curryRight=Om,T.debounce=Nm,T.defaults=XA,T.defaultsDeep=ZA,T.defer=cA,T.delay=fA,T.difference=CE,T.differenceBy=OE,T.differenceWith=NE,T.drop=TE,T.dropRight=LE,T.dropRightWhile=qE,T.dropWhile=BE,T.fill=FE,T.filter=zx,T.flatMap=Hx,T.flatMapDeep=Kx,T.flatMapDepth=Vx,T.flatten=_m,T.flattenDeep=UE,T.flattenDepth=zE,T.flip=uA,T.flow=sI,T.flowRight=aI,T.fromPairs=kE,T.functions=aS,T.functionsIn=oS,T.groupBy=Gx,T.initial=HE,T.intersection=KE,T.intersectionBy=VE,T.intersectionWith=GE,T.invert=fS,T.invertBy=uS,T.invokeMap=Jx,T.iteratee=d0,T.keyBy=Wx,T.keys=br,T.keysIn=ci,T.map=ku,T.mapKeys=lS,T.mapValues=dS,T.matches=oI,T.matchesProperty=cI,T.memoize=Hu,T.merge=pS,T.mergeWith=Hm,T.method=fI,T.methodOf=uI,T.mixin=p0,T.negate=Ku,T.nthArg=lI,T.omit=gS,T.omitBy=vS,T.once=hA,T.orderBy=Yx,T.over=dI,T.overArgs=lA,T.overEvery=pI,T.overSome=gI,T.partial=a0,T.partialRight=Tm,T.partition=Qx,T.pick=bS,T.pickBy=Km,T.property=Qm,T.propertyOf=vI,T.pull=YE,T.pullAll=xm,T.pullAllBy=QE,T.pullAllWith=XE,T.pullAt=ZE,T.range=bI,T.rangeRight=mI,T.rearg=dA,T.reject=eA,T.remove=ex,T.rest=pA,T.reverse=i0,T.sampleSize=rA,T.set=yS,T.setWith=wS,T.shuffle=iA,T.slice=tx,T.sortBy=aA,T.sortedUniq=cx,T.sortedUniqBy=fx,T.split=HS,T.spread=gA,T.tail=ux,T.take=hx,T.takeRight=lx,T.takeRightWhile=dx,T.takeWhile=px,T.tap=Rx,T.throttle=vA,T.thru=zu,T.toArray=Um,T.toPairs=Vm,T.toPairsIn=Gm,T.toPath=xI,T.toPlainObject=km,T.transform=_S,T.unary=bA,T.union=gx,T.unionBy=vx,T.unionWith=bx,T.uniq=mx,T.uniqBy=yx,T.uniqWith=wx,T.unset=ES,T.unzip=n0,T.unzipWith=Am,T.update=xS,T.updateWith=AS,T.values=xo,T.valuesIn=SS,T.without=_x,T.words=Wm,T.wrap=mA,T.xor=Ex,T.xorBy=xx,T.xorWith=Ax,T.zip=Sx,T.zipObject=Ix,T.zipObjectDeep=Mx,T.zipWith=Dx,T.entries=Vm,T.entriesIn=Gm,T.extend=jm,T.extendWith=$u,p0(T,T),T.add=SI,T.attempt=Ym,T.camelCase=RS,T.capitalize=$m,T.ceil=II,T.clamp=IS,T.clone=wA,T.cloneDeep=EA,T.cloneDeepWith=xA,T.cloneWith=_A,T.conformsTo=AA,T.deburr=Jm,T.defaultTo=nI,T.divide=MI,T.endsWith=PS,T.eq=tn,T.escape=CS,T.escapeRegExp=OS,T.every=Ux,T.find=kx,T.findIndex=ym,T.findKey=eS,T.findLast=jx,T.findLastIndex=wm,T.findLastKey=tS,T.floor=DI,T.forEach=Im,T.forEachRight=Mm,T.forIn=rS,T.forInRight=iS,T.forOwn=nS,T.forOwnRight=sS,T.get=f0,T.gt=SA,T.gte=IA,T.has=cS,T.hasIn=u0,T.head=Em,T.identity=fi,T.includes=$x,T.indexOf=jE,T.inRange=MS,T.invoke=hS,T.isArguments=Oa,T.isArray=je,T.isArrayBuffer=MA,T.isArrayLike=oi,T.isArrayLikeObject=cr,T.isBoolean=DA,T.isBuffer=Xs,T.isDate=RA,T.isElement=PA,T.isEmpty=CA,T.isEqual=OA,T.isEqualWith=NA,T.isError=o0,T.isFinite=TA,T.isFunction=bs,T.isInteger=Lm,T.isLength=Vu,T.isMap=qm,T.isMatch=LA,T.isMatchWith=qA,T.isNaN=BA,T.isNative=FA,T.isNil=zA,T.isNull=UA,T.isNumber=Bm,T.isObject=Zt,T.isObjectLike=tr,T.isPlainObject=Gc,T.isRegExp=c0,T.isSafeInteger=kA,T.isSet=Fm,T.isString=Gu,T.isSymbol=wi,T.isTypedArray=Eo,T.isUndefined=jA,T.isWeakMap=HA,T.isWeakSet=KA,T.join=$E,T.kebabCase=NS,T.last=zi,T.lastIndexOf=JE,T.lowerCase=TS,T.lowerFirst=LS,T.lt=VA,T.lte=GA,T.max=RI,T.maxBy=PI,T.mean=CI,T.meanBy=OI,T.min=NI,T.minBy=TI,T.stubArray=v0,T.stubFalse=b0,T.stubObject=yI,T.stubString=wI,T.stubTrue=_I,T.multiply=LI,T.nth=WE,T.noConflict=hI,T.noop=g0,T.now=ju,T.pad=qS,T.padEnd=BS,T.padStart=FS,T.parseInt=US,T.random=DS,T.reduce=Xx,T.reduceRight=Zx,T.repeat=zS,T.replace=kS,T.result=mS,T.round=qI,T.runInContext=W,T.sample=tA,T.size=nA,T.snakeCase=jS,T.some=sA,T.sortedIndex=rx,T.sortedIndexBy=ix,T.sortedIndexOf=nx,T.sortedLastIndex=sx,T.sortedLastIndexBy=ax,T.sortedLastIndexOf=ox,T.startCase=KS,T.startsWith=VS,T.subtract=BI,T.sum=FI,T.sumBy=UI,T.template=GS,T.times=EI,T.toFinite=ms,T.toInteger=Ke,T.toLength=zm,T.toLower=$S,T.toNumber=ki,T.toSafeInteger=$A,T.toString=Bt,T.toUpper=JS,T.trim=WS,T.trimEnd=YS,T.trimStart=QS,T.truncate=XS,T.unescape=ZS,T.uniqueId=AI,T.upperCase=eI,T.upperFirst=h0,T.each=Im,T.eachRight=Mm,T.first=Em,p0(T,function(){var s={};return Sn(T,function(o,h){zt.call(T.prototype,h)||(s[h]=o)}),s}(),{chain:!1}),T.VERSION=i,Li(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),Li(["drop","take"],function(s,o){Xe.prototype[s]=function(h){h=h===t?1:gr(Ke(h),0);var E=this.__filtered__&&!o?new Xe(this):this.clone();return E.__filtered__?E.__takeCount__=Nr(h,E.__takeCount__):E.__views__.push({size:Nr(h,y),type:s+(E.__dir__<0?"Right":"")}),E},Xe.prototype[s+"Right"]=function(h){return this.reverse()[s](h).reverse()}}),Li(["filter","map","takeWhile"],function(s,o){var h=o+1,E=h==l||h==S;Xe.prototype[s]=function(C){var q=this.clone();return q.__iteratees__.push({iteratee:Se(C,3),type:h}),q.__filtered__=q.__filtered__||E,q}}),Li(["head","last"],function(s,o){var h="take"+(o?"Right":"");Xe.prototype[s]=function(){return this[h](1).value()[0]}}),Li(["initial","tail"],function(s,o){var h="drop"+(o?"":"Right");Xe.prototype[s]=function(){return this.__filtered__?new Xe(this):this[h](1)}}),Xe.prototype.compact=function(){return this.filter(fi)},Xe.prototype.find=function(s){return this.filter(s).head()},Xe.prototype.findLast=function(s){return this.reverse().find(s)},Xe.prototype.invokeMap=$e(function(s,o){return typeof s=="function"?new Xe(this):this.map(function(h){return zc(h,s,o)})}),Xe.prototype.reject=function(s){return this.filter(Ku(Se(s)))},Xe.prototype.slice=function(s,o){s=Ke(s);var h=this;return h.__filtered__&&(s>0||o<0)?new Xe(h):(s<0?h=h.takeRight(-s):s&&(h=h.drop(s)),o!==t&&(o=Ke(o),h=o<0?h.dropRight(-o):h.take(o-s)),h)},Xe.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Xe.prototype.toArray=function(){return this.take(y)},Sn(Xe.prototype,function(s,o){var h=/^(?:filter|find|map|reject)|While$/.test(o),E=/^(?:head|last)$/.test(o),C=T[E?"take"+(o=="last"?"Right":""):o],q=E||/^find/.test(o);C&&(T.prototype[o]=function(){var j=this.__wrapped__,H=E?[1]:arguments,Q=j instanceof Xe,ue=H[0],he=Q||je(j),le=function(Qe){var it=C.apply(T,Vs([Qe],H));return E&&be?it[0]:it};he&&h&&typeof ue=="function"&&ue.length!=1&&(Q=he=!1);var be=this.__chain__,we=!!this.__actions__.length,Ce=q&&!be,Ge=Q&&!we;if(!q&&he){j=Ge?j:new Xe(this);var Oe=s.apply(j,H);return Oe.__actions__.push({func:zu,args:[le],thisArg:t}),new Bi(Oe,be)}return Ce&&Ge?s.apply(this,H):(Oe=this.thru(le),Ce?E?Oe.value()[0]:Oe.value():Oe)})}),Li(["pop","push","shift","sort","splice","unshift"],function(s){var o=lu[s],h=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",E=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var C=arguments;if(E&&!this.__chain__){var q=this.value();return o.apply(je(q)?q:[],C)}return this[h](function(j){return o.apply(je(j)?j:[],C)})}}),Sn(Xe.prototype,function(s,o){var h=T[o];if(h){var E=h.name+"";zt.call(bo,E)||(bo[E]=[]),bo[E].push({name:o,func:h})}}),bo[Nu(t,z).name]=[{name:"wrapper",func:t}],Xe.prototype.clone=Z7,Xe.prototype.reverse=e9,Xe.prototype.value=t9,T.prototype.at=Px,T.prototype.chain=Cx,T.prototype.commit=Ox,T.prototype.next=Nx,T.prototype.plant=Lx,T.prototype.reverse=qx,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=Bx,T.prototype.first=T.prototype.head,Nc&&(T.prototype[Nc]=Tx),T},po=O7();Aa?((Aa.exports=po)._=po,dd._=po):Ar._=po}).call(ou)})(gv,gv.exports);var fj=Object.defineProperty,uj=Object.defineProperties,hj=Object.getOwnPropertyDescriptors,E_=Object.getOwnPropertySymbols,lj=Object.prototype.hasOwnProperty,dj=Object.prototype.propertyIsEnumerable,x_=(r,e,t)=>e in r?fj(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,nd=(r,e)=>{for(var t in e||(e={}))lj.call(e,t)&&x_(r,t,e[t]);if(E_)for(var t of E_(e))dj.call(e,t)&&x_(r,t,e[t]);return r},pj=(r,e)=>uj(r,hj(e));function wn(r,e,t){var i;let n=Ja(r);return((i=e.rpcMap)==null?void 0:i[n.reference])||`${N_}?chainId=${n.namespace}:${n.reference}&projectId=${t}`}function co(r){return r.includes(":")?r.split(":")[1]:r}function T_(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function gj(r,e){let t=Object.keys(e.namespaces).filter(n=>n.includes(r));if(!t.length)return[];let i=[];return t.forEach(n=>{let a=e.namespaces[n].accounts;i.push(...a)}),i}function hv(r={},e={}){let t=A_(r),i=A_(e);return gv.exports.merge(t,i)}function A_(r){var e,t,i,n;let a={};if(!Xa(r))return a;for(let[c,u]of Object.entries(r)){let p=nl(c)?[c]:u.chains,g=u.methods||[],m=u.events||[],w=u.rpcMap||{},R=vc(c);a[R]=pj(nd(nd({},a[R]),u),{chains:Of(p,(e=a[R])==null?void 0:e.chains),methods:Of(g,(t=a[R])==null?void 0:t.methods),events:Of(m,(i=a[R])==null?void 0:i.events),rpcMap:nd(nd({},w),(n=a[R])==null?void 0:n.rpcMap)})}return a}function vj(r){return r.includes(":")?r.split(":")[2]:r}function S_(r){let e={};for(let[t,i]of Object.entries(r)){let n=i.methods||[],a=i.events||[],c=i.accounts||[],u=nl(t)?[t]:i.chains?i.chains:T_(i.accounts);e[t]={chains:u,methods:n,events:a,accounts:c}}return e}function lv(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}var L_={},Ut=r=>L_[r],dv=(r,e)=>{L_[r]=e},vv=class{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let n=co(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}},bj=Object.defineProperty,mj=Object.defineProperties,yj=Object.getOwnPropertyDescriptors,I_=Object.getOwnPropertySymbols,wj=Object.prototype.hasOwnProperty,_j=Object.prototype.propertyIsEnumerable,M_=(r,e,t)=>e in r?bj(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,D_=(r,e)=>{for(var t in e||(e={}))wj.call(e,t)&&M_(r,t,e[t]);if(I_)for(var t of I_(e))_j.call(e,t)&&M_(r,t,e[t]);return r},R_=(r,e)=>mj(r,yj(e)),bv=class{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(e){return L(this,null,function*(){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return yield this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return yield this.getCapabilities(e);case"wallet_getCallsStatus":return yield this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?yield this.client.request(e):this.getHttpProvider().request(e.request)})}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let i=t||wn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let n=parseInt(co(t));e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){return L(this,null,function*(){var t,i;let n=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;let a=parseInt(n,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))yield this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null})}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}getCapabilities(e){return L(this,null,function*(){var t,i,n;let a=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");let c=this.client.session.get(e.topic),u=((n=c?.sessionProperties)==null?void 0:n.capabilities)||{};if(u!=null&&u[a])return u?.[a];let p=yield this.client.request(e);try{yield this.client.session.update(e.topic,{sessionProperties:R_(D_({},c.sessionProperties||{}),{capabilities:R_(D_({},u||{}),{[a]:p})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return p})}getCallStatus(e){return L(this,null,function*(){var t,i;let n=this.client.session.get(e.topic),a=(t=n.sessionProperties)==null?void 0:t.bundler_name;if(a){let u=this.getBundlerUrl(e.chainId,a);try{return yield this.getUserOperationReceipt(u,e)}catch(p){console.warn("Failed to fetch call status from bundler",p,u)}}let c=(i=n.sessionProperties)==null?void 0:i.bundler_url;if(c)try{return yield this.getUserOperationReceipt(c,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,c)}if(this.namespace.methods.includes(e.request.method))return yield this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")})}getUserOperationReceipt(e,t){return L(this,null,function*(){var i;let n=new URL(e),a=yield fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ri("eth_getUserOperationReceipt",[(i=t.request.params)==null?void 0:i[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return yield a.json()})}getBundlerUrl(e,t){return`${cj}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}},mv=class{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let n=co(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}},yv=class{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let n=co(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}},wv=class{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let i=t||wn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new Zr(new vi(i,Ut("disableProviderPing")))}},_v=class{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let i=this.getCardanoRPCUrl(t),n=co(t);e[n]=this.createHttpProvider(n,i)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}},Ev=class{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let n=co(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}},xv=class{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;let n=co(t);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}},Av=class{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let i=t||wn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace);return typeof i>"u"?void 0:new Zr(new vi(i,Ut("disableProviderPing")))}},Sv=class{constructor(e){this.name=Dc,this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_n.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;let i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(n=>{let a=Ja(n);i[`${a.namespace}:${a.reference}`]=this.createHttpProvider(n)}),i}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){let i=t||wn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zr(new vi(i,Ut("disableProviderPing")))}},Ej=Object.defineProperty,xj=Object.defineProperties,Aj=Object.getOwnPropertyDescriptors,P_=Object.getOwnPropertySymbols,Sj=Object.prototype.hasOwnProperty,Ij=Object.prototype.propertyIsEnumerable,C_=(r,e,t)=>e in r?Ej(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,sd=(r,e)=>{for(var t in e||(e={}))Sj.call(e,t)&&C_(r,t,e[t]);if(P_)for(var t of P_(e))Ij.call(e,t)&&C_(r,t,e[t]);return r},pv=(r,e)=>xj(r,Aj(e)),Iv=class r{constructor(e){this.events=new O_.default,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:(0,to.default)(ro({level:e?.logger||w_})),this.disableProviderPing=e?.disableProviderPing||!1}static init(e){return L(this,null,function*(){let t=new r(e);return yield t.initialize(),t})}request(e,t,i){return L(this,null,function*(){let[n,a]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return yield this.getProvider(n).request({request:sd({},e),chainId:`${n}:${a}`,topic:this.session.topic,expiry:i})})}sendAsync(e,t,i,n){let a=new Date().getTime();this.request(e,i,n).then(c=>t(null,ba(a,c))).catch(c=>t(c,void 0))}enable(){return L(this,null,function*(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||(yield this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties})),yield this.requestAccounts()})}disconnect(){return L(this,null,function*(){var e;if(!this.session)throw new Error("Please call connect() before enable()");yield this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:ot("USER_DISCONNECTED")}),yield this.cleanup()})}connect(e){return L(this,null,function*(){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),yield this.cleanupPendingPairings(),!e.skipPairing)return yield this.pair(e.pairingTopic)})}authenticate(e,t){return L(this,null,function*(){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),yield this.cleanupPendingPairings();let{uri:i,response:n}=yield this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));let a=yield n();if(this.session=a.session,this.session){let c=S_(this.session.namespaces);this.namespaces=hv(this.namespaces,c),this.persist("namespaces",this.namespaces),this.onConnect()}return a})}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){return L(this,null,function*(){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");let{uri:i,approval:n}=yield this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),yield n().then(a=>{this.session=a;let c=S_(a.namespaces);this.namespaces=hv(this.namespaces,c),this.persist("namespaces",this.namespaces)}).catch(a=>{if(a.message!==fv)throw a;t++})}while(!this.session);return this.onConnect(),this.session})}setDefaultChain(e,t){try{if(!this.session)return;let[i,n]=this.validateChain(e),a=this.getProvider(i);a.name===Dc?a.setDefaultChain(`${i}:${n}`,t):a.setDefaultChain(n,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}cleanupPendingPairings(){return L(this,arguments,function*(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(Di(t)){for(let i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):yield this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}})}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}checkStorage(){return L(this,null,function*(){if(this.namespaces=yield this.getFromStore("namespaces"),this.optionalNamespaces=(yield this.getFromStore("optionalNamespaces"))||{},this.client.session.length){let e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}})}initialize(){return L(this,null,function*(){this.logger.trace("Initialized"),yield this.createClient(),yield this.checkStorage(),this.registerEventListeners()})}createClient(){return L(this,null,function*(){this.client=this.providerOpts.client||(yield ed.init({core:this.providerOpts.core,logger:this.providerOpts.logger||w_,relayUrl:this.providerOpts.relayUrl||sj,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled})),this.logger.trace("SignClient Initialized")})}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(t=>vc(t)))];dv("client",this.client),dv("events",this.events),dv("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;let i=gj(t,this.session),n=T_(i),a=hv(this.namespaces,this.optionalNamespaces),c=pv(sd({},a[t]),{accounts:i,chains:n});switch(t){case"eip155":this.rpcProviders[t]=new bv({namespace:c});break;case"algorand":this.rpcProviders[t]=new wv({namespace:c});break;case"solana":this.rpcProviders[t]=new mv({namespace:c});break;case"cosmos":this.rpcProviders[t]=new yv({namespace:c});break;case"polkadot":this.rpcProviders[t]=new vv({namespace:c});break;case"cip34":this.rpcProviders[t]=new _v({namespace:c});break;case"elrond":this.rpcProviders[t]=new Ev({namespace:c});break;case"multiversx":this.rpcProviders[t]=new xv({namespace:c});break;case"near":this.rpcProviders[t]=new Av({namespace:c});break;default:this.rpcProviders[Dc]?this.rpcProviders[Dc].updateNamespace(c):this.rpcProviders[Dc]=new Sv({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{let{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){let n=i.data;n&&Di(n)&&this.events.emit("accountsChanged",n.map(vj))}else if(i.name==="chainChanged"){let n=t.chainId,a=t.event.data,c=vc(n),u=lv(n)!==lv(a)?`${c}:${lv(a)}`:n;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;let{namespaces:n}=t,a=(i=this.client)==null?void 0:i.session.get(e);this.session=pv(sd({},a),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",e=>L(this,null,function*(){yield this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",pv(sd({},ot("USER_DISCONNECTED")),{data:e.topic}))})),this.on(_n.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Dc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:i,sessionProperties:n}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=n,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){let[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(c=>vc(c)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];let n=vc(Object.keys(this.namespaces)[0]),a=this.rpcProviders[n].getDefaultChain();return[n,a]}requestAccounts(){return L(this,null,function*(){let[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()})}onChainChanged(e,t=!1){if(!this.namespaces)return;let[i,n]=this.validateChain(e);n&&(t||this.getProvider(i).setDefaultChain(n),this.namespaces[i]?this.namespaces[i].defaultChain=n:this.namespaces[`${i}:${n}`]?this.namespaces[`${i}:${n}`].defaultChain=n:this.namespaces[`${i}:${n}`]={defaultChain:n},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){return L(this,null,function*(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),yield this.cleanupPendingPairings({deletePairings:!0})})}persist(e,t){this.client.core.storage.setItem(`${__}/${e}`,t)}getFromStore(e){return L(this,null,function*(){return yield this.client.core.storage.getItem(`${__}/${e}`)})}},q_=Iv;var Mj="wc",Dj="ethereum_provider",Rj=`${Mj}@2:${Dj}:`,Pj="https://rpc.walletconnect.org/v1/",Dv=["eth_sendTransaction","personal_sign"],Cj=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Rv=["chainChanged","accountsChanged"],Oj=["chainChanged","accountsChanged","message","disconnect","connect"],Nj=Object.defineProperty,Tj=Object.defineProperties,Lj=Object.getOwnPropertyDescriptors,B_=Object.getOwnPropertySymbols,qj=Object.prototype.hasOwnProperty,Bj=Object.prototype.propertyIsEnumerable,F_=(r,e,t)=>e in r?Nj(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Rc=(r,e)=>{for(var t in e||(e={}))qj.call(e,t)&&F_(r,t,e[t]);if(B_)for(var t of B_(e))Bj.call(e,t)&&F_(r,t,e[t]);return r},Mv=(r,e)=>Tj(r,Lj(e));function od(r){return Number(r[0].split(":")[1])}function ad(r){return`0x${r.toString(16)}`}function Fj(r){let{chains:e,optionalChains:t,methods:i,optionalMethods:n,events:a,optionalEvents:c,rpcMap:u}=r;if(!Di(e))throw new Error("Invalid chains");let p={chains:e,methods:i||Dv,events:a||Rv,rpcMap:Rc({},e.length?{[od(e)]:u[od(e)]}:{})},g=a?.filter(I=>!Rv.includes(I)),m=i?.filter(I=>!Dv.includes(I));if(!t&&!c&&!n&&!(g!=null&&g.length)&&!(m!=null&&m.length))return{required:e.length?p:void 0};let w=g?.length&&m?.length||!t,R={chains:[...new Set(w?p.chains.concat(t||[]):t)],methods:[...new Set(p.methods.concat(n!=null&&n.length?n:Cj))],events:[...new Set(p.events.concat(c!=null&&c.length?c:Oj))],rpcMap:u};return{required:e.length?p:void 0,optional:t.length?R:void 0}}var Pv=class r{constructor(){this.events=new U_.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Rj,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static init(e){return L(this,null,function*(){let t=new r;return yield t.initialize(e),t})}request(e,t){return L(this,null,function*(){return yield this.signer.request(e,this.formatChainId(this.chainId),t)})}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}enable(){return L(this,null,function*(){return this.session||(yield this.connect()),yield this.request({method:"eth_requestAccounts"})})}connect(e){return L(this,null,function*(){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);let{required:t,optional:i}=Fj(this.rpc);try{let n=yield new Promise((c,u)=>L(this,null,function*(){var p;this.rpc.showQrModal&&((p=this.modal)==null||p.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))})),yield this.signer.connect(Mv(Rc({namespaces:Rc({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic})).then(g=>{c(g)}).catch(g=>{u(new Error(g.message))})}));if(!n)return;let a=g1(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:ad(this.chainId)})}catch(n){throw this.signer.logger.error(n),n}finally{this.modal&&this.modal.closeModal()}})}authenticate(e,t){return L(this,null,function*(){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{let i=yield new Promise((a,c)=>L(this,null,function*(){var u;this.rpc.showQrModal&&((u=this.modal)==null||u.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))})),yield this.signer.authenticate(Mv(Rc({},e),{chains:this.rpc.chains}),t).then(p=>{a(p)}).catch(p=>{c(new Error(p.message))})})),n=i.session;if(n){let a=g1(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:ad(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}})}disconnect(){return L(this,null,function*(){this.session&&(yield this.signer.disconnect()),this.reset()})}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{let{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{let t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",ad(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Mv(Rc({},ot("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){let t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",ad(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){let t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){let[t,i,n]=e.split(":");return{chainId:`${t}:${i}`,address:n}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;let n=(t=e?.chains)!=null?t:[],a=(i=e?.optionalChains)!=null?i:[],c=n.concat(a);if(!c.length)throw new Error("No chains specified in either `chains` or `optionalChains`");let u=n.length?e?.methods||Dv:[],p=n.length?e?.events||Rv:[],g=e?.optionalMethods||[],m=e?.optionalEvents||[],w=e?.rpcMap||this.buildRpcMap(c,e.projectId),R=e?.qrModalOptions||void 0;return{chains:n?.map(I=>this.formatChainId(I)),optionalChains:a.map(I=>this.formatChainId(I)),methods:u,events:p,optionalMethods:g,optionalEvents:m,rpcMap:w,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:R,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){let i={};return e.forEach(n=>{i[n]=this.getRpcUrl(n,t)}),i}initialize(e){return L(this,null,function*(){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?od(this.rpc.chains):od(this.rpc.optionalChains),this.signer=yield q_.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),yield this.loadPersistedSession(),this.rpc.showQrModal){let t;try{let{WalletConnectModal:i}=yield import("./chunk-JFWF5OHH.js");t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Rc({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}})}loadConnectOpts(e){if(!e)return;let{chains:t,optionalChains:i,rpcMap:n}=e;t&&Di(t)&&(this.rpc.chains=t.map(a=>this.formatChainId(a)),t.forEach(a=>{this.rpc.rpcMap[a]=n?.[a]||this.getRpcUrl(a)})),i&&Di(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(a=>this.formatChainId(a)),i.forEach(a=>{this.rpc.rpcMap[a]=n?.[a]||this.getRpcUrl(a)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${Pj}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}loadPersistedSession(){return L(this,null,function*(){if(this.session)try{let e=yield this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),yield this.disconnect().catch(t=>this.signer.logger.warn(t))}})}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}},y$=Pv;export{y$ as EthereumProvider,Oj as OPTIONAL_EVENTS,Cj as OPTIONAL_METHODS,Rv as REQUIRED_EVENTS,Dv as REQUIRED_METHODS,Pv as default};
